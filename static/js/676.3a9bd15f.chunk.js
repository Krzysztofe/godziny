"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[676],{676:function(n,e,t){t.r(e),t.d(e,{default:function(){return G}});var r=t(9439),a=(t(2685),t(2791)),o=t(3360),i=t(7732),s=t(8820),c=t(8014),u=t(7689),l=t(1087),d=t(7858),m=t(23),f=t(5048),h=t(2218),v=t(9065),p=t(184),x=function(){var n=(0,h.Z)(),e=n.sortedInfoMonths,t=n.databaseMonthsDatesToString,r=(0,f.v9)((function(n){return n.infoMonths})).infoMonths,a=(0,v.Z)(),o=a.monthURL,i=a.isMonthInURL?new Date(o):null,s=i&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(i);return(0,p.jsx)(m.Z,{className:"monthListContainer bg-white rounded-0 border border-primary",children:r&&0!==r.length?null===t||void 0===t?void 0:t.map((function(n,t){return(0,p.jsx)(m.Z.Item,{className:"border-0 p-0 px-1",children:(0,p.jsx)(l.rU,{to:"/".concat(null===e||void 0===e?void 0:e[t]),className:"".concat(s===n&&s?"text-warning":"text-reset"," text-decoration-none text-capitalize"),children:n})},n)})):(0,p.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},b=t(6856),g=function(){var n=(0,a.useState)(!1),e=(0,r.Z)(n,2),t=e[0],i=e[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(o.Z,{onClick:function(){return i(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,size:"sm",className:"p-0 px-1 border border-primary w-100 mt-1 text-start bg-white fw-medium d-flex justify-content-between align-items-center",children:["Wybierz miesi\u0105c",(0,p.jsx)(b.x3N,{className:"fs-3 me-1",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,p.jsx)(d.Z,{in:t,children:(0,p.jsx)("div",{children:(0,p.jsx)(x,{})})})]})},Z=t(4849),y=t(3200),j=t(2767),w=function(){var n=(0,u.s0)(),e=(0,a.useState)(!1),t=(0,r.Z)(e,2),i=t[0],s=t[1],c=(0,p.jsx)("div",{className:"text-start w-100",children:"Wyloguj"});return i&&(c=(0,p.jsx)(Z.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,p.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),(0,p.jsx)(o.Z,{onClick:function(){s(!0),y.I8.signOut().then((function(){n("/")})).catch((function(n){return(0,j.Z)(n)})).finally((function(){s(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:i,children:c})},z=t(3855),N=t(9662),L=t(1100),k=t(6021),D=function(){var n=(0,k.xY)().data,e=n||[],t=null===e||void 0===e?void 0:e.map((function(n){return n.userName}));return{dataSelects:[{name:"userName",firstOption:"".concat(0===t.length?"Zapisz w ustawieniach":"Imi\u0119"),labelText:"Podaj imi\u0119",options:t},{name:"hours",firstOption:"Liczba godzin",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}]}},S=t(4165),C=t(3433),T=t(1413),B=t(5861),M=t(5705),I=t(7615),U=t(8007),F=U.Ry({userName:U.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(n){return"Imi\u0119"!==n})).required("Imi\u0119 wymagane"),hours:U.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(n){return"Liczba godzin"!==n})).required("Liczba godzin wymagana"),place:U.Z_().test("is-place-valid","Lokalizacja wymagana",(function(n){return"Lokalizacja"!==n})).required("Lokalizacja wymagana")}),H=function(){var n,e=(0,v.Z)(),t=e.yearFromURL,a=e.monthFromURL,o=(0,f.v9)((function(n){return n.monthsPanel})).month,i=(0,f.v9)((function(n){return n.users})).users,s=(0,I.Og)(),c=(0,r.Z)(s,2),u=c[0],l=c[1],d=o&&(null===o||void 0===o||null===(n=o.columns)||void 0===n?void 0:n[0]),m=(0,M.TA)({initialValues:{id:"",date:N.nt,hours:"",userName:"",place:"",userColor:""},validationSchema:F,onSubmit:function(){var n=(0,B.Z)((0,S.Z)().mark((function n(e){var r,s,c,l,m;return(0,S.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===o||void 0===o||null===(r=o.calc)||void 0===r?void 0:r.currentHours)-+e.hours<0||0===(null===o||void 0===o||null===(s=o.calc)||void 0===s?void 0:s.currentHours))){n.next=2;break}return n.abrupt("return");case 2:return l=null===i||void 0===i||null===(c=i.find((function(n){return n.userName===e.userName})))||void 0===c?void 0:c.userColor,m=(0,T.Z)((0,T.Z)({},e),{},{id:crypto.randomUUID(),hours:+e.hours,userColor:l||""}),n.next=6,u({year:t,month:a,firstColumnBody:(0,T.Z)((0,T.Z)({},d),{},{days:null!==d&&void 0!==d&&d.days?[].concat((0,C.Z)(d.days),[m]):[m]})});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:m,success:l}},E=function(){var n,e,t=(0,f.v9)((function(n){return n.monthsPanel})).month,r=D().dataSelects,a=H(),i=a.formik,s=a.success,c=(0,L.Z)(s,"Zapisz dzie\u0144").btnContent,u=(0,v.Z)().isMonthInURL,l=null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.allHours,d=null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.currentHours;return(0,p.jsxs)(z.Z,{onSubmit:i.handleSubmit,className:"mt-2 ".concat(t&&u?"":"d-none"," ").concat(0===l?"formContainer":""),children:[r.map((function(n){var e=n.name,t=n.firstOption,r=n.labelText,a=n.options;return(0,p.jsxs)(z.Z.Group,{children:[(0,p.jsx)(z.Z.Label,{htmlFor:e,className:"mb-0 fs-7",children:r}),(0,p.jsxs)(z.Z.Select,{id:e,name:e,onChange:i.handleChange,onBlur:i.handleBlur,size:"sm",className:"p-0 px-1 border border-primary ".concat("Zapisz w ustawieniach"===t?"text-danger":""),style:{cursor:"pointer"},children:[(0,p.jsx)("option",{children:t}),null===a||void 0===a?void 0:a.map((function(n){return(0,p.jsx)("option",{value:n,children:n},n)}))]}),(0,p.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:i.touched[e]&&i.errors[e]&&i.errors[e]})]},r)})),(0,p.jsxs)(z.Z.Group,{children:[(0,p.jsx)(z.Z.Label,{htmlFor:"date",className:"mb-0 fs-7",children:"Podaj dzie\u0144"}),(0,p.jsx)(z.Z.Control,{id:"date",type:"date",name:"date",value:i.values.date,onChange:i.handleChange,onBlur:i.handleBlur,min:N.nt,max:N.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,p.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:i.touched.date&&i.errors.date&&i.errors.date})]}),(0,p.jsx)(o.Z,{type:"submit",disabled:s.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:c}),(0,p.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:d-+i.values.hours<0||0===d?"Brak dost\u0119pnych godzin":""})]})},R={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},P=function(){var n=(0,f.v9)((function(n){return n.infoMonths})).infoMonths;return{validationSchema:U.Ry({monthDate:U.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==n&&void 0!==n&&n.includes(e))}))})}},A=function(){var n=(0,u.s0)(),e=(0,I.CB)(),t=(0,r.Z)(e,2),o=t[0],i=t[1],s=(0,I.kM)(),c=(0,r.Z)(s,1)[0],l=(0,I.bw)(),d=(0,r.Z)(l,1)[0],m=(0,f.v9)((function(n){return n.infoMonths})).infoMonths,h=P().validationSchema,v=(0,a.useState)(!1),p=(0,r.Z)(v,2),x=p[0],b=p[1],g=(0,M.TA)({initialValues:{monthDate:"".concat(N.j0,"-").concat(N.vs)},validationSchema:h,onSubmit:function(){var n=(0,B.Z)((0,S.Z)().mark((function n(e){var t,r,a;return(0,S.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.monthDate.slice(0,4),r=e.monthDate.slice(-2),a=(0,T.Z)((0,T.Z)({},R),{},{id:e.monthDate}),n.next=5,o({year:t,month:r,monthBody:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,a.useEffect)((function(){i.isSuccess?b(!0):b(!1)}),[i.isSuccess]),(0,a.useEffect)((function(){var e=function(){var e=(0,B.Z)((0,S.Z)().mark((function e(){var t,r,a,o,s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=9;break}return t=g.values.monthDate.slice(0,4),r=g.values.monthDate.slice(-2),a=m||[],e.next=6,c([].concat((0,C.Z)(a),["".concat(t,"-").concat(r)]));case 6:n("/".concat(g.values.monthDate)),e.next=15;break;case 9:if(!i.isError){e.next=15;break}return o=g.values.monthDate.slice(0,4),s=g.values.monthDate.slice(-2),e.next=14,d({year:o,month:s});case 14:(0,j.Z)("");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[x,c]),{formik:g,success:i}},O=function(){var n=A(),e=n.formik,t=n.success,r=(0,L.Z)(t,(0,p.jsx)(s.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(z.Z,{onSubmit:e.handleSubmit,className:"mt-1",children:[(0,p.jsxs)(z.Z.Group,{children:[(0,p.jsx)(z.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-7",children:"Podaj miesi\u0105c"}),(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(z.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(N.j0,"-").concat(N.vs),max:"2025-12",value:e.values.monthDate,onChange:e.handleChange,onBlur:e.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,p.jsx)(o.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:r})]})]}),(0,p.jsx)(z.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:e.touched.monthDate&&e.errors.monthDate&&e.errors.monthDate})]})})},W=t(9288),Y=t(1362),_=t(8841),q=function(){var n=(0,f.I0)(),e=(0,v.Z)(),t=e.yearFromURL,r=e.monthFromURL,o=(0,I.a6)({year:t,month:r}),i=o.data,s=o.error,c=o.isLoading,u=(0,k.xY)(),l=u.data,d=u.error,m=u.isLoading,h=(0,I.yv)(),p=h.data,x=h.error,b=h.isLoading;return(0,a.useEffect)((function(){n((0,W.jw)(i)),n((0,W.MP)(s)),n((0,W.ed)(c))}),[i,s,c,n]),(0,a.useEffect)((function(){n((0,Y.Rf)(l)),n((0,Y.E7)(d)),n((0,Y.$$)(m))}),[l,d,m,n]),(0,a.useEffect)((function(){n((0,_.rn)(p)),n((0,_.K9)(x)),n((0,_.MT)(b))}),[p,x,b,n]),{}},G=function(){q();var n=(0,u.TH)().pathname,e=(0,a.useState)(!1),t=(0,r.Z)(e,2),d=t[0],m=t[1],f=(0,a.useState)(window.innerWidth),h=(0,r.Z)(f,2),v=h[0],x=h[1];return(0,a.useEffect)((function(){var n=function(){x(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),(0,a.useEffect)((function(){v>575&&m(!0)}),[v]),(0,p.jsx)(p.Fragment,{children:["/"].includes(n)?null:(0,p.jsxs)("aside",{children:[(0,p.jsx)(o.Z,{variant:"info",onClick:function(){return m((function(n){return!n}))},className:"me-2 p-2 mt-1  ".concat(v>575?"d-none":"d-block"),style:{position:"absolute",right:0,borderRadius:"50%"},children:(0,p.jsx)(c.vHB,{className:"fs-1"})}),(0,p.jsxs)(i.Z,{show:d,onHide:function(){return m(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"bg-primary-subtle",style:{width:220},children:[(0,p.jsx)(i.Z.Header,{className:"pb-0",children:(0,p.jsx)(w,{})}),(0,p.jsxs)(i.Z.Body,{className:"d-flex flex-column pt-0",children:[(0,p.jsx)(O,{}),(0,p.jsx)(g,{}),(0,p.jsx)(E,{}),(0,p.jsxs)(l.rU,{to:"/ustawienia",className:"text-info mt-auto fw-medium text-decoration-none ",children:[(0,p.jsx)(s.QAE,{})," Ustawienia"]})]})]})]})})}},9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return u},st:function(){return l},vs:function(){return c},xk:function(){return d}});var r=new Date,a=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(r)},o=new Date(r.getTime()+12096e5),i=new Date(r.getTime()+5184e6),s=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),u=(String(r.getDate()).padStart(2,"0"),a(r),a(o)),l=a(i),d=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},3200:function(n,e,t){t.d(e,{I8:function(){return s}});var r=t(4702),a=t(1793),o=t(2685),i=(0,r.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,a.v0)(i);(0,o.N8)(i)},1100:function(n,e,t){var r=t(1830),a=t.n(r),o=t(2791),i=t(4849),s=t(184);e.Z=function(n,e){(0,o.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;a().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(i.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(3433),a=t(5048);e.Z=function(){var n,e=(0,a.v9)((function(n){return n.infoMonths})).infoMonths,t=e&&(null===(n=(0,r.Z)(e))||void 0===n?void 0:n.sort((function(n,e){return new Date(n).getTime()-new Date(e).getTime()}))),o=null===t||void 0===t?void 0:t.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)}));return{sortedInfoMonths:t,databaseMonthsDatesToString:o}}},9065:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},2767:function(n,e,t){t.d(e,{Z:function(){return i},p:function(){return o}});var r=t(1830),a=t.n(r),o=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},i=function(n){a().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}}}]);
//# sourceMappingURL=676.3a9bd15f.chunk.js.map