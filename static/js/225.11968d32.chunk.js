"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[225],{380:function(e,n,r){var t=r(184);n.Z=function(){return(0,t.jsx)("div",{className:"border d-md-none"})}},6579:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(7064),i=r(5048),o=r(3360),a=r(184),d=function(e){return(0,a.jsx)(o.Z,{id:"noButton",className:"_radius bg-primary border-0 px-5 ms-4",onClick:e.action,children:"Ok"})},s=function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{id:"noButton",className:"_radius bg-dark border-0 px-4 px-sm-5",children:"Nie"}),(0,a.jsx)(o.Z,{onClick:e.action,className:"_radius bg-primary border-0 px-4 px-sm-5 ms-4",children:"Tak"})]})},c=(0,r(2791).memo)((function(e){var n=(0,i.I0)();return e.isPrinted?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{id:"opacityContainer",className:"fixed-top _d-center _alert",onClick:function(r){var i;["opacityContainer","noButton"].includes(null===(i=r.target)||void 0===i?void 0:i.id)&&(null!==e&&void 0!==e&&e.setIsPrinted&&(null===e||void 0===e||e.setIsPrinted(!1)),n((0,t.VG)("")))},children:(0,a.jsxs)("div",{className:"p-5 bg-white _radius text-center fs-2 fw-medium _anim-dropDown",children:[e.header,(0,a.jsx)("div",{className:"_w-fitContent m-auto mt-4",children:e.header.includes("Usun\u0105\u0107")?(0,a.jsx)(s,{action:e.action}):(0,a.jsx)(d,{action:e.action})})]})})}):null}))},9871:function(e,n,r){var t=r(7425),i=r(184);n.Z=function(){return(0,i.jsx)(t.GnT,{className:"text-light-emphasis  fs-2 ms-auto"})}},4954:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(9439),i=r(2791),o=function(){var e=(0,i.useState)(61),n=(0,t.Z)(e,2),r=n[0],o=n[1],a=0,d=function(){a=Date.now()+3e5};return(0,i.useEffect)((function(){var e=setInterval((function(){!function(){var e=Math.max(0,Math.floor((a-Date.now())/1e3));o(e),a<Date.now()&&localStorage.removeItem("token")}()}),1e3);return function(){return clearInterval(e)}}),[]),(0,i.useEffect)((function(){d();var e=["mousemove","keypress","click","scroll"];return e.map((function(e){return document.addEventListener(e,d)})),function(){e.map((function(e){return document.addEventListener(e,d)}))}}),[]),{secondsRemaining:r}},a=r(184),d=function(){var e=o().secondsRemaining;return e+1>60?null:(0,a.jsx)("div",{className:"fixed-top _d-center p-5 _autoLogout",children:(0,a.jsxs)("div",{className:"p-4 bg-white text-center rounded-1 _fs-primary fw-semiBold _anim-dropDown",children:["Wylogowanie nast\u0105pi za",(0,a.jsxs)("div",{className:"d-flex mx-auto _w-fitContent",children:[e+1," ",(0,a.jsx)("div",{children:"\xa0s."})]})]})})},s=function(e){return(0,a.jsxs)("main",{className:"d-flex m-0  bg-secondary _indexContainer ",children:[(0,a.jsx)("aside",{className:"_indexContainer__aside"}),(0,a.jsxs)("div",{className:"_indexContainer__rightSide bg-secondary",children:[(0,a.jsx)(d,{}),e.children]})]})}},4256:function(e,n,r){var t=r(184);n.Z=function(e){return(0,t.jsx)(t.Fragment,{children:e.styles((0,t.jsx)("div",{className:"text-danger fs-1 text-center",children:"B\u0142\u0105d. Od\u015bwie\u017c stron\u0119"}))})}},3464:function(e,n,r){var t=r(4849),i=r(184);n.Z=function(e){return(0,i.jsx)(i.Fragment,{children:e.styles((0,i.jsx)(t.Z,{animation:"border",variant:"primary",className:"fs-5",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})}))})}},7359:function(e,n,r){var t=r(9439),i=r(2791),o=r(6579),a=r(184);n.Z=function(e,n){var r=(0,i.useState)(!1),d=(0,t.Z)(r,2),s=d[0],c=d[1];return{handleAlert:function(){c(!0)},alert:(0,a.jsx)(o.Z,{action:e,isPrinted:s,setIsPrinted:c,header:n})}}},805:function(e,n,r){var t=r(4849),i=r(184);n.Z=function(e,n){var r=n;return e&&(r=(0,i.jsx)(t.Z,{animation:"border",size:"sm",variant:"primary",className:"text-dark",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:r}}},2661:function(e,n,r){var t=r(7615),i=r(9065);n.Z=function(){var e=(0,i.Z)(),n=e.yearFromURL,r=e.monthFromURL,o=(0,t.a6)({year:n,month:r});return{data:o.data,error:o.error,isLoading:o.isLoading}}},3234:function(e,n,r){var t=r(7689);n.Z=function(){var e=(0,t.TH)().pathname.slice(1);if(e&&/^\d{4}-\d{2}$/.test(e)){var n,r=e&&new Date(e);return{monthURLStringFormat:r&&(null===(n=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===n?void 0:n.format(r))}}return{monthURLStringFormat:""}}},9065:function(e,n,r){var t=r(7689);n.Z=function(){var e=(0,t.TH)().pathname.split("/").slice(-1)[0],n=null===e||void 0===e?void 0:e.slice(0,4),r=null===e||void 0===e?void 0:e.slice(-2);return{monthURL:e,yearFromURL:n,monthFromURL:r,isMonthInURL:/^\d{4}-\d{2}$/.test(e)}}},7225:function(e,n,r){r.r(n),r.d(n,{default:function(){return ee}});var t=r(5048),i=r(4954),o=r(4256),a=r(3464),d=r(2661),s=r(6021),c=r(2050),u=r(9439),l=r(2791),m=r(7689),v=r(380),f=r(184),x=function(){var e,n,r,t,i=(0,d.Z)().data;return(0,f.jsx)("div",{className:"position-sticky top-0 z-3 fs-2 pt-4 py-md-4 bg-secondary",children:(0,f.jsxs)("div",{className:"d-flex mx-auto fw-medium _w-fitContent",children:[(0,f.jsxs)("div",{children:["Wszystkie ",null===i||void 0===i||null===(e=i.hours)||void 0===e?void 0:e.allHours,"\xa0-\xa0"]}),(0,f.jsxs)("div",{className:"".concat(i&&(null===i||void 0===i||null===(n=i.hours)||void 0===n?void 0:n.currentHours)<=0?"text-danger":""),children:[(0,f.jsxs)("strong",{children:[i&&(null===i||void 0===i||null===(r=i.hours)||void 0===r?void 0:r.currentHours),"\xa0"]}),i&&(null===i||void 0===i||null===(t=i.hours)||void 0===t?void 0:t.currentHours)<=0?"Brak":"Dost\u0119pne"]})]})})},h=r(793),p=r(1413),j=r(4261),g=r(3360),y=r(9871),b=r(7359),Z=r(805),_=r(4165),N=r(4942),w=r(5861),I=r(9065),H=r(7615),C=function(e,n){var r=(0,d.Z)().data,t=(0,H.ur)(),i=(0,u.Z)(t,2),o=i[0],a=i[1],s=(0,I.Z)(),c=s.yearFromURL,l=s.monthFromURL,m=function(){var t=(0,w.Z)((0,_.Z)().mark((function t(){var i,a,d;return(0,_.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:if(a="rejected"===(i=["submitted","accepted","rejected"][n])?0:null===e||void 0===e?void 0:e.hours,d=(0,p.Z)((0,p.Z)({},r.hours),{},(0,N.Z)({currentHours:r.hours.currentHours+a},i+"Hours",r.hours[i+"Hours"]-(null===e||void 0===e?void 0:e.hours))),t.t0=r,!t.t0){t.next=9;break}return t.next=9,o({year:c,month:l,monthBody:{dayId:e._id,columnType:i,calcHours:d}});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{deleteDayAsync:m,success:a}},k=function(){var e=(0,l.useContext)(z),n=e.day,r=e.columnIdx,t=C(n,r),i=t.deleteDayAsync,o=t.success,a=(0,b.Z)(i,"Usun\u0105\u0107 dzie\u0144?"),d=a.handleAlert,s=a.alert,c=(0,Z.Z)(o.isLoading,(0,f.jsx)(y.Z,{})).btnContent;return(0,f.jsxs)(f.Fragment,{children:[s,(0,f.jsxs)(g.Z,{onClick:d,className:"d-flex justify-content-between fs-4 _fw-semiBold align-items-center w-100 p-0 bg-transparent border-0 text-dark _buttonDeleteDay  text-light-emphasis",disabled:o.isLoading,children:[(0,f.jsxs)("div",{children:[null===n||void 0===n?void 0:n.hours," h"]}),(0,f.jsx)("div",{children:c})]})]})},L=r(6856),F=r(1578),D=function(){return"Poza"===(0,l.useContext)(z).day.place?(0,f.jsx)(F.ols,{className:"text-light-emphasis"}):(0,f.jsx)(L.P8U,{className:"text-light-emphasis"})},R=function(){var e=(0,l.useContext)(z).day;if(!e)return(0,f.jsx)("div",{children:"Brak danych"});var n=e&&function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(n)}(e.date);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between text-light-emphasis fs-4 ",children:[(0,f.jsx)("div",{children:e.userName}),(0,f.jsx)(D,{})]}),(0,f.jsx)("div",{className:"d-flex justify-content-between text-light-emphasis fs-4 _fw-semiBold",children:(0,f.jsx)("div",{children:n||""})})]})},U=function(){var e,n=(0,t.v9)((function(e){return e.searchName})).searchedName,r=(0,l.useContext)(z),i=r.day,o=r.dayIdx;return n&&"Szukaj"!==n?n!==i.userName&&(e="d-none"):e="d-block",(0,f.jsx)(h._l,{draggableId:i&&(null===i||void 0===i?void 0:i._id),index:o,isDragDisabled:!1,children:function(n,r){return(0,f.jsx)("div",(0,p.Z)((0,p.Z)((0,p.Z)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,className:"mb-2 bg-white _radius border _overflow-hidden ".concat(r.isDragging?"border-dark":"border-dark-subtle"," ").concat(e),children:(0,f.jsxs)("div",{className:"ps-2 pe-1 py-2 py-sm-1",style:{borderTop:"8px solid ".concat(null===i||void 0===i?void 0:i.userColor),opacity:r.isDragging?.6:1},children:[i&&(0,f.jsx)(R,{}),(0,f.jsx)(k,{})]})}))}})},z=(0,l.createContext)({}),S=function(e){var n=(0,t.v9)((function(e){return e.searchName})).searchedName,r=n&&"Szukaj"!==n?"_isSearching _bg-opacity-dark":"";return(0,f.jsx)("div",{className:"_column position-relative",children:(0,f.jsx)(h.bK,{droppableId:e.column.id,children:function(n,t){var i,o;return(0,f.jsxs)("div",(0,p.Z)((0,p.Z)({},n.droppableProps),{},{ref:n.innerRef,className:"p-1 pt-3 px-lg-3 h-100 overflow-hidden border border-1 border border-top-0   ".concat((o=t.isDraggingOver,o?"_isDragging":"_noDragging")," ").concat(r),children:[Array.isArray(e.column.days)?null===(i=e.column)||void 0===i?void 0:i.days.map((function(n,r){return(0,f.jsx)(z.Provider,{value:{day:n,columnIdx:e.columnIdx,dayIdx:r},children:(0,f.jsx)(U,{})},(0,j.Z)())})):[],n.placeholder]}))}})})},T=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){return e+((null===n||void 0===n?void 0:n.hours)||0)}),0)},B=function(e,n){var r=(0,I.Z)(),t=r.yearFromURL,i=r.monthFromURL,o=(0,H.CB)(),a=(0,u.Z)(o,1)[0],s=(0,d.Z)().data,c=function(e){var n,r,t;return{submittedHours:T(null===(n=e[0])||void 0===n?void 0:n.days),acceptedHours:T(null===(r=e[1])||void 0===r?void 0:r.days),rejectedHours:T(null===(t=e[2])||void 0===t?void 0:t.days)}}(e),m=c.submittedHours,v=c.acceptedHours,f=c.rejectedHours;(0,l.useEffect)((function(){var n,r,o,d,c={submitted:null===(n=e[0])||void 0===n?void 0:n.days,accepted:null===(r=e[1])||void 0===r?void 0:r.days,rejected:null===(o=e[2])||void 0===o?void 0:o.days};e.length>0&&s&&a({year:t,month:i,monthBody:{columns:c,hours:(0,p.Z)((0,p.Z)({},null===s||void 0===s?void 0:s.hours),{},{currentHours:(null===s||void 0===s||null===(d=s.hours)||void 0===d?void 0:d.allHours)-m-v-f+f,submittedHours:m,acceptedHours:v,rejectedHours:f})}})}),[n])},P=r(3433),E=function(e,n){return e.findIndex((function(e){return e.id===n.droppableId}))},A=function(e,n){var r=e.splice(n.index,1);return(0,u.Z)(r,1)[0]},M=function(e,n,r){var t=(0,P.Z)(e);return t[n]=(0,p.Z)((0,p.Z)({},e[n]),{},{days:r}),t},O=function(e,n,r){var t=e.source,i=e.destination;i&&(t&&i&&t.droppableId===i.droppableId&&t.index===i.index||"rejected"!==t.droppableId&&(t.droppableId!==i.droppableId?function(e,n,r,t){var i=E(e,n),o=function(e,n){return e.findIndex((function(e){return e.id===n.droppableId}))}(e,r),a=e&&(0,P.Z)(e[i].days),d=n.droppableId!==r.droppableId?(0,P.Z)(e[o].days):a,s=A(a,n);d.splice(r.index,0,s);var c=M(e,i,a);t(M(c,o,d))}(n,t,i,r):function(e,n,r,t){var i=r.index,o=E(e,n),a=(0,P.Z)(e[o].days),d=A(a,n);a.splice(i,0,d),t(M(e,o,a))}(n,t,i,r)))},W=r(6490),G=function(){var e=(0,d.Z)().data,n=(0,l.useState)([]),r=(0,u.Z)(n,2),t=r[0],i=r[1],o=(0,l.useState)(!1),a=(0,u.Z)(o,2),s=a[0],c=a[1],m=(0,l.useRef)(null),v=(0,I.Z)(),x=(v.yearFromURL,v.monthFromURL,(0,H.CB)());(0,u.Z)(x,1)[0];(0,l.useEffect)((function(){if(e){var n=[{id:"submitted",days:e.columns.submitted},{id:"accepted",days:e.columns.accepted},{id:"rejected",days:e.columns.rejected}];i(n)}}),[e]),B(t,s);var p=["submitted","accepted","rejected"];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("audio",{src:W,ref:m}),(0,f.jsx)("div",{className:"_d-between _dragDropContex",children:(0,f.jsx)(h.Z5,{onDragEnd:function(n){e&&O(n,t,i),c((function(e){return!e})),function(e,n){var r;if("rejected"!==e.source.droppableId&&e.source.droppableId!==(null===(r=e.destination)||void 0===r?void 0:r.droppableId)){var t=n.current;t&&(t.volume=window.innerWidth<=650?.8:.05,t.play())}}(n,m)},children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,f.jsx)(S,{columnIdx:n,column:e},p[n])}))})})]})},Y=function(e){var n=(0,d.Z)().data,r=(0,l.useState)(e.counter?[e.counter]:[0]),t=(0,u.Z)(r,2),i=t[0],o=t[1],a=(0,l.useRef)(!0);return(0,l.useEffect)((function(){o(e.counter?[e.counter]:[0]),a.current=!1}),[null===n||void 0===n?void 0:n.id]),(0,l.useEffect)((function(){a.current&&void 0!==e.counter?o((function(n){return[].concat((0,P.Z)(n),[null===e||void 0===e?void 0:e.counter])})):a.current=!0}),[e.counter,null===n||void 0===n?void 0:n.id]),(0,f.jsx)("div",{className:"_counterHeader",children:(0,f.jsx)("div",{style:{transform:"translateY(-".concat(20*(i.length-1),"px)"),transition:"transform 0.3s"},children:i.map((function(e,n){return(0,f.jsx)("div",{className:"_counterHeader__dygit",children:e},n)}))})})},$=function(){var e=((0,d.Z)().data||{}).hours;return{dataColumnsHeader:[{headerText:"Z\u0142o\u017cone:",counter:null===e||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===e||void 0===e?void 0:e.acceptedHours},{headerText:"Odrzucone:",counter:null===e||void 0===e?void 0:e.rejectedHours}]}},q=function(){var e=$().dataColumnsHeader;return(0,f.jsx)("div",{className:"_d-between _columnsHeader",children:e.map((function(e){var n=e.headerText,r=e.counter;return(0,f.jsxs)("div",{className:"text-primary _d-center _fw-semiBold p-1 _columnsHeader__item bg-secondary-light  border border-bottom-0            \n            ",children:[n,(0,f.jsx)(Y,{counter:r,text:n})]},n)}))})},K=r(3234),V=r(9622),J=(0,l.memo)((function(){var e=(0,K.Z)().monthURLStringFormat;return(0,f.jsx)("div",{className:"text-center fs-4 d-md-none pt-1 pb-4 z-3 bg-secondary _currentMonth",children:(0,V.f)(e)})})),Q=function(){var e=(0,m.TH)().pathname,n=(0,l.useState)(!1),r=(0,u.Z)(n,2),t=r[0],i=r[1];return(0,l.useEffect)((function(){i(!1);var e=setTimeout((function(){i(!0)}));return function(){clearTimeout(e)}}),[e]),(0,f.jsx)(f.Fragment,{children:t&&(0,f.jsxs)("div",{className:"px-2 px-sm-5 px-md-3 pb-3 _anim-opacity",children:[(0,f.jsx)(v.Z,{}),(0,f.jsx)(x,{}),(0,f.jsx)(J,{}),(0,f.jsx)(q,{}),(0,f.jsx)(G,{})]})})},X=function(){var e=(0,K.Z)().monthURLStringFormat;return(0,f.jsxs)("div",{className:"_d-center fs-2 text-danger text-center _monthPanelEmpty",children:["Brak danych z miesi\u0105ca ",e,". Zapisz miesi\u0105c w ustawieniach."]})},ee=function(){var e,n=(0,d.Z)(),r=n.data,u=n.error,l=n.isLoading,m=(0,s.xY)(),v=m.error,x=m.isLoading,h=(0,t.v9)((function(e){return e.listMonths})).listMonthsError;return e=l||x?(0,f.jsx)(a.Z,{styles:c.u}):u||v||h?(0,f.jsx)(o.Z,{styles:c.u}):r?(0,f.jsx)(Q,{}):(0,f.jsx)(X,{}),(0,f.jsx)(i.Z,{children:e})}},9622:function(e,n,r){r.d(n,{f:function(){return t}});var t=function(e){return e.toLowerCase().split(" ").map((function(e){var n;return(null===e||void 0===e||null===(n=e.charAt(0))||void 0===n?void 0:n.toUpperCase())+e.slice(1)})).join(" ")}},2050:function(e,n,r){r.d(n,{u:function(){return i}});var t=r(184),i=function(e){return(0,t.jsx)("div",{className:"fixed-top _d-center fs-4 _requestContainer",style:{width:"100vw",height:"100vh",zIndex:"1060",backgroundColor:"rgba(255,255,255,0.4)"},children:e})}},6490:function(e,n,r){e.exports=r.p+"static/media/dragSound.91940e3f5c0dacec1c6c.wav"}}]);
//# sourceMappingURL=225.11968d32.chunk.js.map