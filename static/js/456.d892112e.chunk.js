"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[456],{9456:function(e,n,a){a.r(n),a.d(n,{default:function(){return P}});var r=a(9439),t=a(2791),s=a(3360),i=a(7732),o=a(8014),d=a(7689),l=a(3200),c=a(184),u=function(){var e=(0,d.s0)();return(0,c.jsx)("div",{onClick:function(){l.I.signOut(),e("/")},className:"fw-bolder text-info-emphasis",style:{cursor:"pointer",fontSize:"0.8rem"},children:"Wyloguj"})},m=a(4849),h=a(3027),p=a(8566),v=a(4165),f=a(1413),x=a(3433),b=a(5861),y=a(5705),j={id:crypto.randomUUID(),date:"",hours:"",userName:"",place:""},g=a(8007),Z=g.Ry({userName:g.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(e){return"Imi\u0119"!==e})).required("Imi\u0119 wymagane"),date:g.Z_().required("Data wymagana"),hours:g.nK().test("is-hours-valid","Liczba godzin wymagana",(function(e){return"Liczba godzin"!==e})).required("Liczba godzin wymagana"),place:g.Z_().test("is-place-valid","Lokalizacja wymagana",(function(e){return"Lokalizacja"!==e})).required("Lokalizacja wymagana")}),z=a(322),N=function(){var e=(0,z.CB)(),n=(0,r.Z)(e,2),a=n[0],t=n[1],s=(0,d.TH)().pathname.split("/"),i=s[s.length-1],o=((0,d.UO)().monthURL,(0,p.Z)(i)),l=o.databaseColumns,c=o.databaseMonth,u=o.data,m=o.dataCurrentHours,h=(0,y.TA)({initialValues:j,validationSchema:Z,onSubmit:function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){var r,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.setFieldValue("id",crypto.randomUUID()),!(m-+h.values.hours<0)){e.next=3;break}return e.abrupt("return");case 3:return(t=u&&c&&(null===l||void 0===l?void 0:l.length)>0?(0,x.Z)(l):[])[0]=u&&c&&(null===l||void 0===l?void 0:l.length)>0&&(0,f.Z)((0,f.Z)({},null===l||void 0===l?void 0:l[0]),{},{days:[].concat((0,x.Z)(null===l||void 0===l||null===(r=l[0])||void 0===r?void 0:r.days),[(0,f.Z)((0,f.Z)({},n),{},{hours:+n.hours})])}),e.next=7,a({id:u&&c.id,columns:(0,f.Z)((0,f.Z)({},c),{},{columns:t})});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:h,success:t}},w=a(9662),k=function(){var e=N(),n=e.formik,a=e.success,r=(0,d.TH)().pathname.split("/"),t=r[r.length-1],i=(0,p.Z)(t),o=i.dataCurrentHours,l=i.databaseAllHours,u=i.databaseMonth,v=(0,c.jsx)("span",{children:"Zapisz dzie\u0144"});return a.isLoading&&(v=(0,c.jsx)(m.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),a.isError&&(v=(0,c.jsx)("span",{children:' "B\u0142\u0105d" '})),(0,c.jsxs)(h.Z,{onSubmit:n.handleSubmit,className:"mt-2 ".concat(u?"":"d-none"," ").concat(u&&0===l?"formContainer":""),children:[(0,c.jsxs)(h.Z.Group,{children:[(0,c.jsx)(h.Z.Label,{htmlFor:"userName",className:"mb-0 fs-7",children:"Podaj imi\u0119"}),(0,c.jsxs)(h.Z.Select,{id:"userName",name:"userName",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,c.jsx)("option",{children:"Imi\u0119"}),["Jan","Maria","Mariola"].map((function(e){return(0,c.jsx)("option",{value:e,children:e},e)}))]}),(0,c.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:n.touched.userName&&n.errors.userName&&n.errors.userName})]}),(0,c.jsxs)(h.Z.Group,{children:[(0,c.jsx)(h.Z.Label,{htmlFor:"date",className:"mb-0 fs-7",children:"Podaj dzie\u0144"}),(0,c.jsx)(h.Z.Control,{id:"date",type:"date",name:"date",value:n.values.date,onChange:n.handleChange,onBlur:n.handleBlur,min:w.tM,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,c.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:n.touched.date&&n.errors.date&&n.errors.date})]}),(0,c.jsxs)(h.Z.Group,{children:[(0,c.jsx)(h.Z.Label,{htmlFor:"hours",className:"mb-0 fs-7",children:"Podaj liczb\u0119 godzin"}),(0,c.jsxs)(h.Z.Select,{id:"hours",name:"hours",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,c.jsx)("option",{children:"Liczba godzin "}),[1,2,3,4,5,6,7,8,9,10].map((function(e){return(0,c.jsx)("option",{value:+e,children:e},e)}))]}),(0,c.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:n.touched.hours&&n.errors.hours&&n.errors.hours})]}),(0,c.jsxs)(h.Z.Group,{children:[(0,c.jsx)(h.Z.Label,{htmlFor:"place",className:"mb-0 fs-7",children:"Podaj lokalizacj\u0119"}),(0,c.jsxs)(h.Z.Select,{id:"place",name:"place",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,c.jsx)("option",{children:"Lokalizacja"}),(0,c.jsx)("option",{value:"Wewn\u0105trz",children:"Wewn\u0105trz"}),(0,c.jsx)("option",{value:"Poza",children:"Poza"})]}),(0,c.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:n.touched.place&&n.errors.place&&n.errors.place})]}),(0,c.jsx)(s.Z,{variant:"info",type:"submit",disabled:a.isLoading,className:"fw-medium w-100 mt-2 ",children:v}),(0,c.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o-+n.values.hours<0?"Brak wolnych godzin":""})]})},D={id:"",monthDate:"",allHours:0,currentHours:0,submitedHours:0,acceptedHours:0,rejectedHours:0,columns:[{id:"miesiac",columnName:"Miesi\u0105c",days:[]},{id:"oczekuj\u0105ce",columnName:"Oczekuj\u0105ce",days:[]},{id:"zatwierdzone",columnName:"Zatwierdzone",days:[]}]},C=function(){var e=(0,d.s0)(),n=(0,z.Su)(),a=(0,r.Z)(n,2),t=a[0],s=a[1],i=(0,p.Z)().databaseMonthsDates,o=void 0===i?[]:i,l=(0,y.TA)({initialValues:{monthDate:"".concat(w.hR,"-").concat(w.TB)},validationSchema:g.Ry({monthDate:g.Z_().test("is-in-database","Miesi\u0105c ju\u017c zapisany",(function(e){return void 0!==e&&!(null!==o&&void 0!==o&&o.includes(e))}))}),onSubmit:function(){var n=(0,b.Z)((0,v.Z)().mark((function n(a){var r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,f.Z)((0,f.Z)({},D),{},{monthDate:a.monthDate}),n.next=3,t(r);case 3:e("/miesiac/".concat(a.monthDate));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:l,success:s}},I=a(8820),H=function(){var e=C(),n=e.formik,a=e.success;return{formik:n,success:a,btnContent:a.isLoading?(0,c.jsx)(m.Z,{animation:"border",variant:"primary",style:{height:"1.5rem",width:"1.5rem"},children:(0,c.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):a.isError?(0,c.jsx)("span",{className:"text-danger",children:" B\u0142\u0105d "}):(0,c.jsx)(I.dEn,{style:{fontSize:"1.5rem"}})}},S=function(){var e=H(),n=e.formik,a=e.success,r=e.btnContent;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(h.Z,{onSubmit:n.handleSubmit,className:"mt-1",children:[(0,c.jsxs)(h.Z.Group,{children:[(0,c.jsx)(h.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-7",children:"Podaj miesi\u0105c"}),(0,c.jsxs)("div",{className:"d-flex",children:[(0,c.jsx)(h.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(w.hR,"-").concat(w.TB),max:"2025-12",value:n.values.monthDate,onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,c.jsx)(s.Z,{type:"submit",disabled:a.isLoading,className:"d-flex justify-content-center align-items-start m-0 justify-content-center p-0 ms-1  text-info-emphasis border-0 bg-transparent",children:r})]})]}),(0,c.jsx)(h.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:n.touched.monthDate&&n.errors.monthDate&&n.errors.monthDate})]})})},L=a(7858),B=a(23),T=a(1087),M=function(){var e=(0,d.TH)(),n=(0,z.S$)(void 0).data,a=(0,p.Z)(),r=a.databaseMonthsDatesSorted,t=a.databaseMonthsDatesToString,s=e.pathname.split("/").slice(-1)[0],i=new Date(s),o=s&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(i);return(0,c.jsx)(B.Z,{className:"monthListContainer bg-white border border-primary",children:n?t.map((function(e,n){return(0,c.jsx)(B.Z.Item,{action:!0,className:"border-0 p-0 px-1",children:(0,c.jsx)(T.rU,{to:"/miesiac/".concat(r[n]),className:"".concat(o!==e?"text-reset":"text-success"," text-decoration-none text-capitalize"),children:e},e)},e)})):(0,c.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},F=a(6856),A=function(){var e=(0,t.useState)(!1),n=(0,r.Z)(e,2),a=n[0],i=n[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(s.Z,{onClick:function(){return i(!a)},"aria-controls":"example-collapse-text","aria-expanded":a,variant:"info",className:"fw-medium p-1 w-100 mt-1",children:["Wybierz miesi\u0105c",(0,c.jsx)(F.x3N,{className:"fs-3 fw-medium",style:{transform:"".concat(a?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,c.jsx)(L.Z,{in:a,children:(0,c.jsx)("div",{children:(0,c.jsx)(M,{})})})]})},P=function(){var e=(0,d.TH)().pathname,n=(0,t.useState)(!1),a=(0,r.Z)(n,2),l=a[0],m=a[1];return(0,c.jsx)(c.Fragment,{children:["/"].includes(e)?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.Z,{variant:"secondary",onClick:function(){return m((function(e){return!e}))},className:"me-2 p-1 mt-1 col-sm-1",style:{position:"absolute",right:0},children:(0,c.jsx)(o.vHB,{className:"fs-1"})}),(0,c.jsxs)(i.Z,{show:l,onHide:function(){return m(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"w-20 bg-primary-subtle",style:{width:200},children:[(0,c.jsx)(i.Z.Header,{className:"pb-0",children:(0,c.jsx)(i.Z.Title,{children:(0,c.jsx)(u,{})})}),(0,c.jsxs)(i.Z.Body,{className:"pt-0",children:[(0,c.jsx)(S,{}),(0,c.jsx)(A,{}),(0,c.jsx)(k,{})]})]})]})})}},9662:function(e,n,a){a.d(n,{TB:function(){return s},hR:function(){return t},tM:function(){return i},xk:function(){return o}});var r=new Date,t=new Intl.DateTimeFormat("pl",{year:"numeric"}).format(r),s=new Intl.DateTimeFormat("pl",{month:"2-digit"}).format(r),i=r.toISOString().split("T")[0],o=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},3200:function(e,n,a){a.d(n,{I:function(){return i}});var r=a(4702),t=a(1793),s=(0,r.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),i=(0,t.v0)(s)},8566:function(e,n,a){var r=a(1413),t=a(322),s=a(3572);n.Z=function(){var e,n,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(0,t.S$)(void 0),d=o.data,l=o.error,c=o.isLoading,u=d&&Object.keys(d),m=u&&Object.values(d).flat().map((function(e,n){return(0,r.Z)((0,r.Z)({},e),{},{id:u[n]})})),h=(0,s.nr)(m),p=d&&h.length>0?null===h||void 0===h?void 0:h.find((function(e){return e.monthDate===i})):void 0,v=d&&(null===p||void 0===p?void 0:p.columns),f=d?null===p||void 0===p?void 0:p.allHours:"",x=d?null===p||void 0===p?void 0:p.currentHours:"",b=d?null===p||void 0===p?void 0:p.submitedHours:"",y=d?null===p||void 0===p?void 0:p.acceptedHours:"",j=d?null===p||void 0===p?void 0:p.rejectedHours:"",g=d&&h.length>0&&null!==v&&void 0!==v&&v[0].days?null===v||void 0===v||null===(e=v[0])||void 0===e?void 0:e.days.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.hours)}),0):0,Z=d&&h.length>0&&null!==v&&void 0!==v&&v[0].days?null===v||void 0===v||null===(n=v[1])||void 0===n?void 0:n.days.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.hours)}),0):0,z=d&&h.length>0&&null!==v&&void 0!==v&&v[0].days?null===v||void 0===v||null===(a=v[2])||void 0===a?void 0:a.days.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.hours)}),0):0,N=d&&h?h.map((function(e){return e.monthDate})):[],w=d?N.sort((function(e,n){return e<n?-1:e>n?1:0})):[],k=w.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)}));return{data:d,error:l,isLoading:c,databaseMonthsId:u,databaseMonthsCollection:h,databaseMonth:p,databaseColumns:v,databaseAllHours:f,dataCurrentHours:x,databaseAcceptedHours:y,databaseRejectedHours:j,dataBaseSubmitedHours:b,acceptedHoursSum:Z,rejectedHoursSum:z,submitedHoursSum:g,databaseMonthsDates:N,databaseMonthsDatesSorted:w,databaseMonthsDatesToString:k}}},3572:function(e,n,a){a.d(n,{nr:function(){return i},qs:function(){return o}});var r=a(9439),t=a(3433),s=a(1413),i=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,a;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,s.Z)((0,s.Z)({},e),{},{columns:null===e||void 0===e||null===(a=e.columns)||void 0===a?void 0:a.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{days:e.days||[]})}))})})):[]},o=function(e,n,a){var i=e.source,o=e.destination;if(o&&(i.draggableId!==o.droppableId||i.index===o.index))if(i.droppableId!==o.droppableId){var d=n.findIndex((function(e){return e.id===i.droppableId})),l=n.findIndex((function(e){return e.id===o.droppableId})),c=(0,t.Z)(n[d].days),u=i.droppableId!==o.dropableId?(0,t.Z)(n[l].days):c,m=c.splice(i.index,1),h=(0,r.Z)(m,1)[0];u.splice(o.index,0,h);var p=(0,t.Z)(n);p[d]=(0,s.Z)((0,s.Z)({},n[d]),{},{days:c}),p[l]=(0,s.Z)((0,s.Z)({},n[l]),{},{days:u}),a(p)}else{var v=o.index,f=n.findIndex((function(e){return e.id===i.droppableId})),x=(0,t.Z)(n[f].days),b=x.splice(i.index,1),y=(0,r.Z)(b,1)[0];x.splice(v,0,y);var j=(0,t.Z)(n);j[f]=(0,s.Z)((0,s.Z)({},n[f]),{},{days:x}),a(j)}}}}]);
//# sourceMappingURL=456.d892112e.chunk.js.map