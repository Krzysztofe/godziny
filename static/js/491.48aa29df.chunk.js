"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[491],{9662:function(n,e,t){t.d(e,{j0:function(){return l},nt:function(){return d},st:function(){return c},vs:function(){return s},xk:function(){return u}});var r=new Date,o=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(r)},i=new Date(r.getTime()+12096e5),a=new Date(r.getTime()+5184e6),l=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),d=(String(r.getDate()).padStart(2,"0"),o(r),o(i)),c=o(a),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},1100:function(n,e,t){var r=t(1830),o=t.n(r),i=t(2791),a=t(4849),l=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;o().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,l.jsx)(a.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(3433),o=t(5048);e.Z=function(){var n,e=(0,o.v9)((function(n){return n.infoMonths})).infoMonths,t=e&&(null===(n=(0,r.Z)(e))||void 0===n?void 0:n.sort((function(n,e){return new Date(n).getTime()-new Date(e).getTime()}))),i=null===t||void 0===t?void 0:t.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)}));return{sortedInfoMonths:t,databaseMonthsDatesToString:i}}},3234:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.UO)().monthURL;if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},3491:function(n,e,t){t.r(e),t.d(e,{default:function(){return K}});var r=t(5048),o=t(9662),i=t(1413),a=t(9439),l=t(2791),s=t(793),d=t(9743),c=t(7762),u=t(3433),m=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,i.Z)((0,i.Z)({},n),{},{days:[]})})):[]},v=function(){var n,e=(0,r.v9)((function(n){return n.monthsPanel})).month,t=0,o=0,i=0,a=m(null===e||void 0===e?void 0:e.columns),l=(0,c.Z)(a);try{for(l.s();!(n=l.n()).done;){var s=n.value,d=(s.days||[]).reduce((function(n,e){var t;return n+(null!==(t=null===e||void 0===e?void 0:e.hours)&&void 0!==t?t:0)}),0);switch(s.id){case"submitted":t=d;break;case"accepted":o=d;break;case"rejected":i=d}}}catch(u){l.e(u)}finally{l.f()}return{submittedHoursSum:t,acceptedHoursSum:o,rejectedHoursSum:i}},f=t(9065),h=t(7615),x=t(2677),p=t(4165),g=t(5861),y=t(3360),b=t(7425),j=t(1830),Z=t.n(j),w=t(1100),N=t(2767),I=t(6856),k=t(1578),D=t(184),L=function(n){var e,t;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var r,o,i=new Date(n.day.date);return t=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(i),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"d-flex justify-content-between fs-7",children:[(0,D.jsx)("div",{children:null===(r=n.day)||void 0===r?void 0:r.userName}),(0,D.jsx)("div",{children:"Poza"===(null===(o=n.day)||void 0===o?void 0:o.place)?(0,D.jsx)(k.ols,{style:{color:"rgb(80,173,150)"}}):(0,D.jsx)(I.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,D.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,D.jsx)("div",{children:t||""})})]})}return(0,D.jsx)("div",{children:"Brak danych"})},S=function(n){var e,t=(0,f.Z)(),o=t.yearFromURL,l=t.monthFromURL,d=(0,r.v9)((function(n){return n.monthsPanel})).month,c=(0,h.ur)(),u=(0,a.Z)(c,2),m=u[0],v=u[1],x=(0,w.Z)(v,(0,D.jsx)(b.GnT,{className:"text-danger"})).btnContent,j=function(){var e=(0,g.Z)((0,p.Z)().mark((function e(t,r){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z().fire((0,N.p)("Chcesz usun\u0105\u0107 dzie\u0144")).then(function(){var e=(0,g.Z)((0,p.Z)().mark((function e(i){var a,s,c;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isConfirmed){e.next=4;break}return c=null===d||void 0===d||null===(a=d.columns[t])||void 0===a||null===(s=a.days)||void 0===s?void 0:s.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==r})),e.next=4,m({year:o,month:l,colIdx:n.columnIdx,daysBody:c||[]});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,D.jsx)(s._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,t){var r,o;return(0,D.jsx)("div",(0,i.Z)((0,i.Z)((0,i.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(t.isDragging?"border-secondary-subtle":"border-transparent"," "),children:(0,D.jsxs)("div",{className:"mb-2 px-1 py-2 py-sm-1",style:{borderTop:"8px solid ".concat(null===(r=n.day)||void 0===r?void 0:r.userColor),opacity:t.isDragging?.8:1},children:[(0,D.jsx)(L,{day:n.day}),(0,D.jsxs)(y.Z,{onClick:function(){return j(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:v.isLoading,children:[(0,D.jsxs)("div",{className:"d-flex align-items-center fs-7",children:[null===(o=n.day)||void 0===o?void 0:o.hours," h"]}),(0,D.jsx)("div",{className:"d-flex align-items-center",children:x})]})]})}))}})},T=function(n){return(0,D.jsx)(x.Z,{className:"p-0",children:(0,D.jsx)(s.bK,{droppableId:n.column.id,children:function(e,t){return(0,D.jsxs)("div",(0,i.Z)((0,i.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 ".concat(t.isDraggingOver?"bg-dark-subtle":"bg-primary"),children:[Array.isArray(n.column.days)?n.column.days.map((function(e,t){return(0,D.jsx)(S,{day:e,columnIdx:n.columnIdx,dayIdx:t},crypto.randomUUID())})):[],e.placeholder]}))}})})},H=function(n){var e,t,o,i=(0,r.v9)((function(n){return n.monthsPanel})).month;return(0,D.jsx)(D.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===i||void 0===i||null===(e=i.calc)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===i||void 0===i||null===(t=i.calc)||void 0===t?void 0:t.acceptedHours},{headerText:"Odrzucone:",counter:null===i||void 0===i||null===(o=i.calc)||void 0===o?void 0:o.rejectedHours}].map((function(e){var t=e.headerText,r=e.counter;return(0,D.jsxs)(x.Z,{className:"bg-primary text-dark-emphasis fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-primary":" border-bottom border-2 border-white"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[t," ","",r]},t)}))})},U=function(){var n=(0,l.useRef)(null),e=(0,l.useState)(0),t=(0,a.Z)(e,2),r=t[0],o=t[1];return{scrollableRef:n,thumbPosition:r,handleScroll:function(){var e=n.current;if(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;o(t/(r-i)*100)}}}},z=function(){var n=(0,f.Z)(),e=n.yearFromURL,t=n.monthFromURL,o=(0,h.CB)(),c=(0,a.Z)(o,1)[0],x=v(),p=x.submittedHoursSum,g=x.acceptedHoursSum,y=x.rejectedHoursSum,b=U(),j=b.scrollableRef,Z=b.thumbPosition,w=b.handleScroll,N=(0,r.v9)((function(n){return n.monthsPanel})).month,I=m(null===N||void 0===N?void 0:N.columns),k=(0,l.useState)([]),L=(0,a.Z)(k,2),S=L[0],z=L[1];(0,l.useEffect)((function(){z(I)}),[N]),(0,l.useEffect)((function(){var n,r;S.length>0&&c({year:e,month:t,monthBody:(0,i.Z)((0,i.Z)({},N),{},{columns:S,calc:(0,i.Z)((0,i.Z)({},null===N||void 0===N?void 0:N.calc),{},{currentHours:(null!==(n=null===N||void 0===N||null===(r=N.calc)||void 0===r?void 0:r.allHours)&&void 0!==n?n:0)-p-g-y+y,submittedHours:p,acceptedHours:g,rejectedHours:y})})})}),[S]);var P="d-flex column-gap-1 px-1";return(0,D.jsxs)("div",{ref:j,onScroll:w,className:"overflow-x-hidden overflow-y-scroll  ps-2 mb-1 col-xxl-9 border border-3 border-dark",style:{maxHeight:"calc(100% - 155px)"},children:[(0,D.jsx)(d.Z,{className:"".concat(P," sticky-top  "),style:{marginRight:"0.1px"},children:(0,D.jsx)(H,{thumbPosition:Z})}),(0,D.jsx)(d.Z,{className:"".concat(P),style:{marginRight:"0.1px"},children:(0,D.jsx)(s.Z5,{onDragEnd:function(n){!function(n,e,t){var r=n.source,o=n.destination;if(o&&(r.draggableId!==o.droppableId||r.index===o.index))if(r.droppableId!==o.droppableId){var l=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===r.droppableId})),s=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===o.droppableId})),d=e&&(0,u.Z)(e[l].days),c=r.droppableId!==o.dropableId?(0,u.Z)(e[s].days):d,m=d.splice(r.index,1),v=(0,a.Z)(m,1)[0];c.splice(o.index,0,v);var f=(0,u.Z)(e);f[l]=(0,i.Z)((0,i.Z)({},e[l]),{},{days:d}),f[s]=(0,i.Z)((0,i.Z)({},e[s]),{},{days:c}),t(f)}else{var h=o.index,x=e.findIndex((function(n){return n.id===r.droppableId})),p=(0,u.Z)(e[x].days),g=p.splice(r.index,1),y=(0,a.Z)(g,1)[0];p.splice(h,0,y);var b=(0,u.Z)(e);b[x]=(0,i.Z)((0,i.Z)({},e[x]),{},{days:p}),t(b)}}(n,S,z)},children:null===S||void 0===S?void 0:S.map((function(n,e){return(0,D.jsx)(T,{column:n,columnIdx:e},n.id)}))})})]})},P=t(7858),C=t(23),F=t(1087),R=t(2218),B=function(){var n=(0,R.Z)(),e=n.sortedInfoMonths,t=n.databaseMonthsDatesToString,o=(0,r.v9)((function(n){return n.infoMonths})).infoMonths,i=(0,f.Z)(),a=i.monthURL,l=i.isMonthInURL?new Date(a):null,s=l&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(l);return(0,D.jsx)(C.Z,{className:"monthListContainer bg-white rounded-0 border border-primary",children:o&&0!==o.length?null===t||void 0===t?void 0:t.map((function(n,t){return(0,D.jsx)(C.Z.Item,{className:"border-0 p-0 px-1",children:(0,D.jsx)(F.rU,{to:"/".concat(null===e||void 0===e?void 0:e[t]),className:"".concat(s===n&&s?"text-warning":"text-reset"," text-decoration-none text-capitalize"),children:n})},n)})):(0,D.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},M=t(3234),E=function(){var n=(0,l.useState)(!1),e=(0,a.Z)(n,2),t=e[0],r=e[1],o=(0,M.Z)().monthURLStringFormat;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(y.Z,{onClick:function(){return r(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,size:"sm",className:"p-0 px-1 border border-primary w-100 mt-1 text-start bg-white fw-medium d-flex justify-content-between align-items-center",children:[o,(0,D.jsx)(I.x3N,{className:"fs-3 me-1",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,D.jsx)(P.Z,{in:t,children:(0,D.jsx)("div",{children:(0,D.jsx)(B,{})})})]})},A=t(7923),O=function(){return(0,D.jsx)("header",{className:"me-3",children:(0,D.jsxs)(d.Z,{className:"col-sm-8 col-md-9 col-xl-8 col-xxl-8 ms-sm-auto mx-xl-auto px-1 ",children:[(0,D.jsx)(E,{}),(0,D.jsx)(A.Z,{})]})})},Y=t(4849),$=t(7022),G=function(){var n,e=(0,r.v9)((function(n){return n.infoMonths})).infoMonths,t=(0,r.v9)((function(n){return n.monthsPanel})),i=t.month,a=t.error,l=t.isLoading;if(console.log("",o.xk),l)n=(0,D.jsx)(Y.Z,{animation:"border",variant:"secondary",children:(0,D.jsx)("span",{className:"visually-hidden",children:"Loading..."})});else if(a){if("status"in a){var s="status"in a&&a.status;n=(0,D.jsx)("h3",{className:"text-danger mx-auto ",children:(0,D.jsxs)(D.Fragment,{children:[" B\u0142\u0105d: ",s," "]})})}}else n=e&&0!==(null===e||void 0===e?void 0:e.length)?i&&""!==(null===i||void 0===i?void 0:i.id)?(0,D.jsxs)($.Z,{fluid:!0,className:"d-flex flex-column   container backgroundImage ",style:{height:"100vh"},children:[(0,D.jsx)(O,{}),(0,D.jsx)(z,{})]}):(0,D.jsxs)("h3",{className:"text-warning",children:["Brak danych z miesi\u0105ca ",o.xk,". Zapisz miesi\u0105c za pomoc\u0105 formularza"]}):(0,D.jsx)("h5",{className:"text-warning",children:"Brak miesi\u0119cy zapisanych w bazie danych. Zapisz miesi\u0105c za pomoc\u0105 formularza"});return{panelContent:n}},K=(t(5293),function(){var n=(0,r.v9)((function(n){return n.infoMonths})).infoMonths,e=(0,r.v9)((function(n){return n.monthsPanel})),t=e.month,o=e.error,i=e.isLoading,a=G().panelContent;return i&&!t?"d-flex align-items-center justify-content-center":!o&&t&&n&&0!==(null===n||void 0===n?void 0:n.length)||"d-flex justify-content-end align-items-center p-1 pe-sm-5 col-sm-7 col-md-8 ms-auto mx-xxl-auto",(0,D.jsx)("main",{children:a})})},7923:function(n,e,t){var r=t(5048),o=t(3234),i=t(184);e.Z=function(){var n,e,t,a,l,s=(0,r.v9)((function(n){return n.monthsPanel})).month,d=(0,o.Z)().monthURLStringFormat;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:" d-flex justify-content-center my-2 fw-medium position-relative",children:[(0,i.jsx)("div",{className:"text-capitalize fw-medium d-none d-md-block  position-absolute end-0",children:d}),(0,i.jsx)("div",{className:"col-3 text-end",children:"Wszystkie"}),(0,i.jsxs)("div",{className:"mx-2",children:[null===s||void 0===s||null===(n=s.calc)||void 0===n?void 0:n.allHours," -"," ",(0,i.jsx)("span",{className:"".concat((null===s||void 0===s||null===(e=s.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===s||void 0===s||null===(t=s.calc)||void 0===t?void 0:t.currentHours})]}),(0,i.jsx)("div",{className:"col-3 ".concat((null===s||void 0===s||null===(a=s.calc)||void 0===a?void 0:a.currentHours)<=0?"text-danger":""),children:(null===s||void 0===s||null===(l=s.calc)||void 0===l?void 0:l.currentHours)<0?"Brak":"Dost\u0119pne"})]})})}},2767:function(n,e,t){t.d(e,{Z:function(){return a},p:function(){return i}});var r=t(1830),o=t.n(r),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},a=function(n){o().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},5293:function(){}}]);
//# sourceMappingURL=491.48aa29df.chunk.js.map