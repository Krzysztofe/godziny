"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[58],{1058:function(n,e,t){t.r(e),t.d(e,{default:function(){return _}});var r=t(9439),a=(t(2685),t(2791)),i=t(3360),o=t(7732),s=t(8820),c=t(8014),u=t(5048),l=t(7689),d=t(1087),m=t(8841),h=t(7615),f=t(7858),v=t(23),p=t(2218),x=t(9065),b=t(184),g=function(){var n=(0,p.Z)().databaseMonthsDatesToString,e=(0,u.v9)((function(n){return n.infoMonths})).infoMonths,t=(0,x.Z)(),r=t.monthURL,a=t.isMonthInURL?new Date(r):null,i=a&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a);return(0,b.jsx)(v.Z,{className:"monthListContainer bg-white rounded-0 border border-primary",children:e&&0!==e.length?null===n||void 0===n?void 0:n.map((function(n,t){return(0,b.jsx)(v.Z.Item,{className:"border-0 p-0 px-1",children:(0,b.jsx)(d.rU,{to:"/".concat(null===e||void 0===e?void 0:e[t]),className:"".concat(i===n&&i?"text-warning":"text-reset"," text-decoration-none text-capitalize"),children:n})},n)})):(0,b.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},Z=t(6856),y=function(){var n=(0,a.useState)(!1),e=(0,r.Z)(n,2),t=e[0],o=e[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Z,{onClick:function(){return o(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,size:"sm",className:"p-0 px-1 border border-primary w-100 mt-1 text-start bg-white fw-medium d-flex justify-content-between align-items-center",children:["Wybierz miesi\u0105c",(0,b.jsx)(Z.x3N,{className:"fs-3 me-1",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,b.jsx)(f.Z,{in:t,children:(0,b.jsx)("div",{children:(0,b.jsx)(g,{})})})]})},j=t(4849),w=t(3200),z=t(2767),N=function(){var n=(0,l.s0)(),e=(0,a.useState)(!1),t=(0,r.Z)(e,2),o=t[0],s=t[1],c=(0,b.jsx)("div",{className:"text-start w-100",children:"Wyloguj"});return o&&(c=(0,b.jsx)(j.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),(0,b.jsx)(i.Z,{onClick:function(){s(!0),w.I8.signOut().then((function(){n("/")})).catch((function(n){return(0,z.Z)(n)})).finally((function(){s(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:o,children:c})},k=t(3855),S=t(9662),L=t(1100),D=t(6021),C=function(){var n=(0,D.xY)().data,e=n||[],t=null===e||void 0===e?void 0:e.map((function(n){return n.userName}));return{dataSelects:[{name:"userName",firstOption:"".concat(0===t.length?"Zapisz w ustawieniach":"Imi\u0119"),labelText:"Podaj imi\u0119",options:t},{name:"hours",firstOption:"Liczba godzin",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}]}},B=t(4165),T=t(3433),I=t(1413),M=t(5861),H=t(5705),U=t(8007),F=U.Ry({userName:U.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(n){return"Imi\u0119"!==n})).required("Imi\u0119 wymagane"),hours:U.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(n){return"Liczba godzin"!==n})).required("Liczba godzin wymagana"),place:U.Z_().test("is-place-valid","Lokalizacja wymagana",(function(n){return"Lokalizacja"!==n})).required("Lokalizacja wymagana")}),E=function(){var n,e=(0,x.Z)(),t=e.yearFromURL,a=e.monthFromURL,i=(0,u.v9)((function(n){return n.monthsPanel})).month,o=(0,u.v9)((function(n){return n.users})).users,s=(0,h.Og)(),c=(0,r.Z)(s,2),l=c[0],d=c[1],m=i&&(null===i||void 0===i||null===(n=i.columns)||void 0===n?void 0:n[0]),f=(0,H.TA)({initialValues:{id:"",date:S.nt,hours:"",userName:"",place:"",userColor:""},validationSchema:F,onSubmit:function(){var n=(0,M.Z)((0,B.Z)().mark((function n(e){var r,s,c,u,d;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===i||void 0===i||null===(r=i.calc)||void 0===r?void 0:r.currentHours)-+e.hours<0||0===(null===i||void 0===i||null===(s=i.calc)||void 0===s?void 0:s.currentHours))){n.next=2;break}return n.abrupt("return");case 2:return u=null===o||void 0===o||null===(c=o.find((function(n){return n.userName===e.userName})))||void 0===c?void 0:c.userColor,d=(0,I.Z)((0,I.Z)({},e),{},{id:crypto.randomUUID(),hours:+e.hours,userColor:u||""}),n.next=6,l({year:t,month:a,firstColumnBody:(0,I.Z)((0,I.Z)({},m),{},{days:null!==m&&void 0!==m&&m.days?[].concat((0,T.Z)(m.days),[d]):[d]})});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:f,success:d}},R=function(){var n,e,t=(0,u.v9)((function(n){return n.monthsPanel})).month,r=C().dataSelects,a=E(),o=a.formik,s=a.success,c=(0,L.Z)(s,"Zapisz dzie\u0144").btnContent,l=(0,x.Z)().isMonthInURL,d=null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.allHours,m=null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.currentHours;return(0,b.jsxs)(k.Z,{onSubmit:o.handleSubmit,className:"mt-2 ".concat(t&&l?"":"d-none"," ").concat(0===d?"formContainer":""),children:[r.map((function(n){var e=n.name,t=n.firstOption,r=n.labelText,a=n.options;return(0,b.jsxs)(k.Z.Group,{children:[(0,b.jsx)(k.Z.Label,{htmlFor:e,className:"mb-0 fs-7",children:r}),(0,b.jsxs)(k.Z.Select,{id:e,name:e,onChange:o.handleChange,onBlur:o.handleBlur,size:"sm",className:"p-0 px-1 border border-primary ".concat("Zapisz w ustawieniach"===t?"text-danger":""),style:{cursor:"pointer"},children:[(0,b.jsx)("option",{children:t}),null===a||void 0===a?void 0:a.map((function(n){return(0,b.jsx)("option",{value:n,children:n},n)}))]}),(0,b.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched[e]&&o.errors[e]&&o.errors[e]})]},r)})),(0,b.jsxs)(k.Z.Group,{children:[(0,b.jsx)(k.Z.Label,{htmlFor:"date",className:"mb-0 fs-7",children:"Podaj dzie\u0144"}),(0,b.jsx)(k.Z.Control,{id:"date",type:"date",name:"date",value:o.values.date,onChange:o.handleChange,onBlur:o.handleBlur,min:S.nt,max:S.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,b.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.date&&o.errors.date&&o.errors.date})]}),(0,b.jsx)(i.Z,{type:"submit",disabled:s.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:c}),(0,b.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:m-+o.values.hours<0||0===m?"Brak dost\u0119pnych godzin":""})]})},P={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},A=function(){var n=(0,u.v9)((function(n){return n.infoMonths})).infoMonths;return{validationSchema:U.Ry({monthDate:U.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==n&&void 0!==n&&n.includes(e))}))})}},O=function(){var n=(0,l.s0)(),e=(0,h.CB)(),t=(0,r.Z)(e,2),i=t[0],o=t[1],s=(0,h.kM)(),c=(0,r.Z)(s,2),d=c[0],m=(c[1],(0,h.bw)()),f=(0,r.Z)(m,1)[0],v=(0,u.v9)((function(n){return n.infoMonths})).infoMonths,p=A().validationSchema,x=(0,a.useState)(!1),b=(0,r.Z)(x,2),g=(b[0],b[1],(0,a.useState)(!1)),Z=(0,r.Z)(g,2),y=Z[0],j=Z[1],w=(0,H.TA)({initialValues:{monthDate:"".concat(S.j0,"-").concat(S.vs)},validationSchema:p,onSubmit:function(){var n=(0,M.Z)((0,B.Z)().mark((function n(e){var t,r,a;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.monthDate.slice(0,4),r=e.monthDate.slice(-2),a=(0,I.Z)((0,I.Z)({},P),{},{id:e.monthDate}),n.next=5,i({year:t,month:r,monthBody:a});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,a.useEffect)((function(){o.isSuccess?j(!0):j(!1)}),[o.isSuccess]),(0,a.useEffect)((function(){var e=function(){var e=(0,M.Z)((0,B.Z)().mark((function e(){var t,r,a,i,s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=9;break}return t=w.values.monthDate.slice(0,4),r=w.values.monthDate.slice(-2),a=v||[],e.next=6,d([].concat((0,T.Z)(a),["".concat(t,"-").concat(r)]));case 6:n("/".concat(w.values.monthDate)),e.next=15;break;case 9:if(!o.isError){e.next=15;break}return i=w.values.monthDate.slice(0,4),s=w.values.monthDate.slice(-2),e.next=14,f({year:i,month:s});case 14:(0,z.Z)("");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[y,d]),{formik:w,success:o}},W=function(){var n=O(),e=n.formik,t=n.success,r=(0,L.Z)(t,(0,b.jsx)(s.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(k.Z,{onSubmit:e.handleSubmit,className:"mt-1",children:[(0,b.jsxs)(k.Z.Group,{children:[(0,b.jsx)(k.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-7",children:"Podaj miesi\u0105c"}),(0,b.jsxs)("div",{className:"d-flex",children:[(0,b.jsx)(k.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(S.j0,"-").concat(S.vs),max:"2025-12",value:e.values.monthDate,onChange:e.handleChange,onBlur:e.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,b.jsx)(i.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:r})]})]}),(0,b.jsx)(k.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:e.touched.monthDate&&e.errors.monthDate&&e.errors.monthDate})]})})},_=function(){var n=(0,u.I0)(),e=(0,l.TH)().pathname,t=(0,a.useState)(!1),f=(0,r.Z)(t,2),v=f[0],p=f[1],x=(0,h.yv)(),g=x.data,Z=x.error,j=x.isLoading;(0,a.useEffect)((function(){n((0,m.rn)(g)),n((0,m.K9)(Z)),n((0,m.MT)(j))}),[g,n]);var w=(0,a.useState)(window.innerWidth),z=(0,r.Z)(w,2),k=z[0],S=z[1];return(0,a.useEffect)((function(){var n=function(){S(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),(0,a.useEffect)((function(){k>575&&p(!0)}),[k]),(0,b.jsx)(b.Fragment,{children:["/"].includes(e)?null:(0,b.jsxs)("aside",{children:[(0,b.jsx)(i.Z,{variant:"info",onClick:function(){return p((function(n){return!n}))},className:"me-2 p-2 mt-1  ".concat(k>575?"d-none":"d-block"),style:{position:"absolute",right:0,borderRadius:"50%"},children:(0,b.jsx)(c.vHB,{className:"fs-1"})}),(0,b.jsxs)(o.Z,{show:v,onHide:function(){return p(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"bg-primary-subtle",style:{width:220},children:[(0,b.jsx)(o.Z.Header,{className:"pb-0",children:(0,b.jsx)(N,{})}),(0,b.jsxs)(o.Z.Body,{className:"d-flex flex-column pt-0",children:[(0,b.jsx)(W,{}),(0,b.jsx)(y,{}),(0,b.jsx)(R,{}),(0,b.jsxs)(d.rU,{to:"/ustawienia",className:"text-info mt-auto fw-medium text-decoration-none ",children:[(0,b.jsx)(s.QAE,{})," Ustawienia"]})]})]})]})})}},9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return u},st:function(){return l},vs:function(){return c},xk:function(){return d}});var r=new Date,a=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(r)},i=new Date(r.getTime()+12096e5),o=new Date(r.getTime()+5184e6),s=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),u=(String(r.getDate()).padStart(2,"0"),a(r),a(i)),l=a(o),d=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},3200:function(n,e,t){t.d(e,{I8:function(){return s}});var r=t(4702),a=t(1793),i=t(2685),o=(0,r.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,a.v0)(o);(0,i.N8)(o)},1100:function(n,e,t){var r=t(1830),a=t.n(r),i=t(2791),o=t(4849),s=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;a().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(o.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(5048);e.Z=function(){var n=(0,r.v9)((function(n){return n.infoMonths})).infoMonths;return{databaseMonthsDatesToString:null===n||void 0===n?void 0:n.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)}))}}},9065:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},2767:function(n,e,t){t.d(e,{Z:function(){return o},p:function(){return i}});var r=t(1830),a=t.n(r),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},o=function(n){a().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}}}]);
//# sourceMappingURL=58.ef6a0c8e.chunk.js.map