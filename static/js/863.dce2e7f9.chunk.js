"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[863],{6863:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var a=r(9439),t=r(2791),o=r(3360),i=r(3787),s=r(8014),d=r(7689),l=r(3200),u=r(184),c=function(){var e=(0,d.s0)();return(0,u.jsx)("div",{onClick:function(){l.I.signOut(),e("/")},className:"fw-bolder text-info-emphasis",style:{cursor:"pointer",fontSize:"0.8rem"},children:"Wyloguj"})},m=r(4849),h=r(3027),p=r(6712),v=r(4165),f=r(1413),x=r(3433),b=r(5861),y=r(5705),Z={id:crypto.randomUUID(),date:"",hours:"",userName:"",place:""},j=r(8007),g=j.Ry({userName:j.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(e){return"Imi\u0119"!==e})).required("Imi\u0119 wymagane"),date:j.Z_().required("Data wymagana"),hours:j.nK().test("is-hours-valid","Liczba godzin wymagana",(function(e){return"Liczba godzin"!==e})).required("Liczba godzin wymagana"),place:j.Z_().test("is-place-valid","Lokalizacja wymagana",(function(e){return"Lokalizacja"!==e})).required("Lokalizacja wymagana")}),z=r(322),N=function(){var e=(0,z.CB)(),n=(0,a.Z)(e,2),r=n[0],t=n[1],o=(0,d.TH)().pathname.split("/"),i=o[o.length-1],s=((0,d.UO)().monthURL,(0,p.Z)(i)),l=s.databaseColumns,u=s.databaseMonth,c=s.data,m=s.dataCurrentHours,h=(0,y.TA)({initialValues:Z,validationSchema:g,onSubmit:function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){var a,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.setFieldValue("id",crypto.randomUUID()),!(m-+h.values.hours<0)){e.next=3;break}return e.abrupt("return");case 3:return(t=c&&u&&(null===l||void 0===l?void 0:l.length)>0?(0,x.Z)(l):[])[0]=c&&u&&(null===l||void 0===l?void 0:l.length)>0&&(0,f.Z)((0,f.Z)({},null===l||void 0===l?void 0:l[0]),{},{days:[].concat((0,x.Z)(null===l||void 0===l||null===(a=l[0])||void 0===a?void 0:a.days),[(0,f.Z)((0,f.Z)({},n),{},{hours:+n.hours})])}),e.next=7,r({id:c&&u.id,columns:(0,f.Z)((0,f.Z)({},u),{},{columns:t})});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:h,success:t}},w=function(){(0,d.UO)().monthURL;var e=N(),n=e.formik,r=e.success,a=(0,d.TH)().pathname.split("/"),t=a[a.length-1],i=(0,p.Z)(t),s=i.dataCurrentHours,l=i.databaseAllHours,c=r.isLoading,v=(0,u.jsx)("span",{children:"Zapisz dzie\u0144"});return r.isLoading&&(v=(0,u.jsx)(m.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(v=(0,u.jsx)("span",{children:' "B\u0142\u0105d" '})),0===l&&(v=(0,u.jsx)("span",{style:{color:"red"},children:" Podaj godziny"})),s-+n.values.hours<0&&(v=(0,u.jsx)("span",{style:{color:"red"},children:"Brak godzin "})),(0,u.jsxs)(h.Z,{onSubmit:n.handleSubmit,className:"mt-4",children:[(0,u.jsxs)(h.Z.Group,{children:[(0,u.jsx)(h.Z.Label,{htmlFor:"userName",className:"mb-0",style:{fontSize:"0.8rem"},children:"Podaj imi\u0119"}),(0,u.jsxs)(h.Z.Select,{name:"userName",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,u.jsx)("option",{children:"Imi\u0119"}),["Jan","Maria","Mariola"].map((function(e){return(0,u.jsx)("option",{value:e,children:e},e)}))]}),(0,u.jsx)(h.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:n.touched.userName&&n.errors.userName&&n.errors.userName})]}),(0,u.jsxs)(h.Z.Group,{children:[(0,u.jsx)(h.Z.Label,{htmlFor:"date",className:"mb-0",style:{fontSize:"0.8rem"},children:"Podaj dzie\u0144"}),(0,u.jsx)(h.Z.Control,{id:"date",type:"date",name:"date",value:n.values.date,onChange:n.handleChange,onBlur:n.handleBlur,min:1,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,u.jsx)(h.Z.Text,{className:"text-danger d-block mt-0 mb-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:n.touched.date&&n.errors.date&&n.errors.date})]}),(0,u.jsxs)(h.Z.Group,{children:[(0,u.jsx)(h.Z.Label,{htmlFor:"hours",className:"mb-0",style:{fontSize:"0.8rem"},children:"Podaj liczb\u0119 godzin"}),(0,u.jsxs)(h.Z.Select,{name:"hours",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,u.jsx)("option",{children:"Liczba godzin "}),[1,2,3,4,5,6,7,8,9,10].map((function(e){return(0,u.jsx)("option",{value:+e,children:e},e)}))]}),(0,u.jsx)(h.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:n.touched.hours&&n.errors.hours&&n.errors.hours})]}),(0,u.jsxs)(h.Z.Group,{children:[(0,u.jsx)(h.Z.Label,{htmlFor:"place",className:"mb-0",style:{fontSize:"0.8rem"},children:"Podaj lokalizacj\u0119"}),(0,u.jsxs)(h.Z.Select,{name:"place",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,u.jsx)("option",{children:"Lokalizacja"}),(0,u.jsx)("option",{value:"Wewn\u0105trz",children:"Wewn\u0105trz"}),(0,u.jsx)("option",{value:"Poza",children:"Poza"})]}),(0,u.jsx)(h.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:n.touched.place&&n.errors.place&&n.errors.place})]}),(0,u.jsx)(o.Z,{variant:"info",type:"submit",disabled:c,className:"fw-medium w-100 mt-2 ",children:v})]})},k={id:"",month:"",allHours:0,currentHours:0,submitedHours:0,acceptedHours:0,rejectedHours:0,columns:[{id:"miesiac",columnName:"Miesi\u0105c",days:[]},{id:"oczekuj\u0105ce",columnName:"Oczekuj\u0105ce",days:[]},{id:"zatwierdzone",columnName:"Zatwierdzone",days:[]}]},S=function(){var e=(0,z.Su)(),n=(0,a.Z)(e,2),r=n[0],t=n[1],o=new Date,i=new Intl.DateTimeFormat("pl",{year:"numeric"}).format(o),s=new Intl.DateTimeFormat("pl",{month:"2-digit"}).format(o),d=(0,y.TA)({initialValues:{monthYear:"".concat(i,"-").concat(s)},validationSchema:j.Ry({monthYear:j.Z_()}),onSubmit:function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){var a;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,f.Z)((0,f.Z)({},k),{},{month:n.monthYear}),e.next=3,r(a);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:d,success:t}},H=r(8820),I=function(){var e=S(),n=e.formik,r=e.success,a=(0,u.jsx)(H.dEn,{className:"info-text-emphasis",style:{fontSize:"2rem"}});return r.isLoading&&(a=(0,u.jsx)(m.Z,{animation:"border",variant:"primary",size:"sm",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(a=(0,u.jsx)("span",{children:' "B\u0142\u0105d" '})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h.Z,{onSubmit:n.handleSubmit,children:(0,u.jsxs)(h.Z.Group,{className:"d-flex align-items-center",children:[(0,u.jsx)(h.Z.Control,{type:"month",name:"monthYear",min:"2023-06",max:"2025-12",value:n.values.monthYear,onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,u.jsx)(o.Z,{type:"submit",variant:"secondary",size:"sm",className:"rounded-0 d-flex align-items-center justify-content-center px-0  bg-transparent text-info-emphasis border-0",style:{width:"25%",height:"100%"},children:a})]})})})},C=r(23),L=r(1087),B=function(){var e=(0,z.S$)(void 0).data,n=(0,d.UO)().monthURL,r=(0,p.Z)(n).databaseMonthsCollection,a=e&&r?r.map((function(e){return e.month})).sort((function(e,n){return e<n?-1:e>n?1:0})):[],t=e&&(null===a||void 0===a?void 0:a.map((function(n){var r=e&&a&&new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)})));return(0,u.jsx)(C.Z,{className:"monthListContainer",children:void 0===e||null===e?(0,u.jsx)("p",{className:"py-1 px-2",children:"Brak danych"}):t.map((function(e,n){return(0,u.jsx)(C.Z.Item,{className:"border-0 p-0 px-1 ",children:(0,u.jsx)(L.rU,{to:"/miesiac/".concat(a[n]),style:{textDecoration:"none",color:"black"},children:e},e)},e)}))})},T=function(){var e=(0,d.TH)().pathname,n=(0,t.useState)(!1),r=(0,a.Z)(n,2),l=r[0],m=r[1];return(0,u.jsx)(u.Fragment,{children:["/"].includes(e)?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Z,{variant:"secondary",onClick:function(){return m((function(e){return!e}))},className:"me-2",style:{position:"absolute",right:0},children:(0,u.jsx)(s.vHB,{})}),(0,u.jsxs)(i.Z,{show:l,onHide:function(){return m(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"w-20 bg-primary-subtle",style:{width:200},children:[(0,u.jsx)(i.Z.Header,{className:"pb-0",children:(0,u.jsx)(i.Z.Title,{children:(0,u.jsx)(c,{})})}),(0,u.jsxs)(i.Z.Body,{className:"pt-0",children:[(0,u.jsx)(I,{}),(0,u.jsx)(B,{}),(0,u.jsx)(w,{})]})]})]})})}},3200:function(e,n,r){r.d(n,{I:function(){return i}});var a=r(4702),t=r(1793),o=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),i=(0,t.v0)(o)},6712:function(e,n,r){var a=r(1413),t=r(322),o=r(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,t.S$)(void 0),r=n.data,i=n.error,s=n.isLoading,d=r&&Object.keys(r),l=d&&Object.values(r).flat().map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{id:d[n]})})),u=(0,o.nr)(l),c=r&&u.length>0?null===u||void 0===u?void 0:u.find((function(n){return n.month===e})):void 0,m=r&&(null===c||void 0===c?void 0:c.columns),h=r?null===c||void 0===c?void 0:c.allHours:"",p=r?null===c||void 0===c?void 0:c.currentHours:"",v=r?null===c||void 0===c?void 0:c.submitedHours:"",f=r?null===c||void 0===c?void 0:c.acceptedHours:"",x=r?null===c||void 0===c?void 0:c.rejectedHours:"",b=r&&u.length>0&&null!==m&&void 0!==m&&m[0].days?null===m||void 0===m?void 0:m[0].days.reduce((function(e,n){return e+n.hours}),0):0,y=r&&u.length>0&&null!==m&&void 0!==m&&m[0].days?null===m||void 0===m?void 0:m[1].days.reduce((function(e,n){return e+n.hours}),0):0,Z=r&&u.length>0&&null!==m&&void 0!==m&&m[0].days?null===m||void 0===m?void 0:m[2].days.reduce((function(e,n){return e+n.hours}),0):0,j=r&&u?u.map((function(e){return e.month})):[];return{string:j.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),data:r,error:i,isLoading:s,databaseMonthsId:d,databaseMonthsCollection:u,databaseMonth:c,databaseColumns:m,databaseAllHours:h,dataCurrentHours:p,databaseAcceptedHours:f,databaseRejectedHours:x,dataBaseSubmitedHours:v,acceptedHoursSum:y,rejectedHoursSum:Z,submitedHoursSum:b,databaseMonthsDates:j}}},3572:function(e,n,r){r.d(n,{nr:function(){return i},qs:function(){return s}});var a=r(9439),t=r(3433),o=r(1413),i=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,r;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,o.Z)((0,o.Z)({},e),{},{columns:null===e||void 0===e||null===(r=e.columns)||void 0===r?void 0:r.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{days:e.days||[]})}))})})):[]},s=function(e,n,r){var i=e.source,s=e.destination;if(s&&(i.draggableId!==s.droppableId||i.index===s.index))if(i.droppableId!==s.droppableId){var d=n.findIndex((function(e){return e.id===i.droppableId})),l=n.findIndex((function(e){return e.id===s.droppableId})),u=(0,t.Z)(n[d].days),c=i.droppableId!==s.dropableId?(0,t.Z)(n[l].days):u,m=u.splice(i.index,1),h=(0,a.Z)(m,1)[0];c.splice(s.index,0,h);var p=(0,t.Z)(n);p[d]=(0,o.Z)((0,o.Z)({},n[d]),{},{days:u}),p[l]=(0,o.Z)((0,o.Z)({},n[l]),{},{days:c}),r(p)}else{var v=s.index,f=n.findIndex((function(e){return e.id===i.droppableId})),x=(0,t.Z)(n[f].days),b=x.splice(i.index,1),y=(0,a.Z)(b,1)[0];x.splice(v,0,y);var Z=(0,t.Z)(n);Z[f]=(0,o.Z)((0,o.Z)({},n[f]),{},{days:x}),r(Z)}}}}]);
//# sourceMappingURL=863.dce2e7f9.chunk.js.map