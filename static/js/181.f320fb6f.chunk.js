"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[181,228],{3786:function(n,e,r){var d=r(7485),i=r(1419),t=r(184);e.Z=function(n){var e=(0,i.Z)().windowWidth;return(0,t.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100vh",overflow:"hidden"},children:[(0,t.jsx)(d.default,{}),(0,t.jsx)("div",{className:"d-flex ps-1 flex-fill",style:{width:e>=500?"70%":"100%"},children:n.children})]})}},2837:function(n,e,r){r.r(e),r.d(e,{default:function(){return A}});var d=r(4849),i=r(5048),t=r(3234),o=r(3940),l=r(1413),a=r(9439),s=r(2791),c=r(793),u=r(7762),v=r(3433),m=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,l.Z)((0,l.Z)({},n),{},{days:[]})})):[]},h=function(){var n,e=(0,i.v9)((function(n){return n.monthsPanel})).month,r=0,d=0,t=0,o=m(null===e||void 0===e?void 0:e.columns),l=(0,u.Z)(o);try{for(l.s();!(n=l.n()).done;){var a=n.value,s=(a.days||[]).reduce((function(n,e){var r;return n+(null!==(r=null===e||void 0===e?void 0:e.hours)&&void 0!==r?r:0)}),0);switch(a.id){case"submitted":r=s;break;case"accepted":d=s;break;case"rejected":t=s}}}catch(c){l.e(c)}finally{l.f()}return{submittedHoursSum:r,acceptedHoursSum:d,rejectedHoursSum:t}},f=r(9065),x=r(7615),p=r(2677),y=r(4165),b=r(5861),j=r(3360),g=r(7425),Z=r(1830),w=r.n(Z),I=r(1100),H=r(2767),N=r(6856),k=r(1578),P=r(184),S=function(n){var e,r;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var d,i,t=new Date(n.day.date);return r=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(t),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,P.jsx)("div",{children:null===(d=n.day)||void 0===d?void 0:d.userName}),(0,P.jsx)("div",{children:"Poza"===(null===(i=n.day)||void 0===i?void 0:i.place)?(0,P.jsx)(k.ols,{style:{color:"rgb(80,173,150)"}}):(0,P.jsx)(N.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,P.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,P.jsx)("div",{children:r||""})})]})}return(0,P.jsx)("div",{children:"Brak danych"})},z=function(n){var e,r=(0,f.Z)(),d=r.yearFromURL,t=r.monthFromURL,o=(0,i.v9)((function(n){return n.monthsPanel})).month,s=(0,x.ur)(),u=(0,a.Z)(s,2),v=u[0],m=u[1],h=(0,I.Z)(m,(0,P.jsx)(g.GnT,{className:"text-danger"})).btnContent,p=function(){var e=(0,b.Z)((0,y.Z)().mark((function e(r,i){return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w().fire((0,H.p)("Usun\u0105\u0107 dzie\u0144")).then(function(){var e=(0,b.Z)((0,y.Z)().mark((function e(l){var a,s,c;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.isConfirmed){e.next=4;break}return c=null===o||void 0===o||null===(a=o.columns[r])||void 0===a||null===(s=a.days)||void 0===s?void 0:s.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==i})),e.next=4,v({year:d,month:t,colIdx:n.columnIdx,daysBody:c||[]});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,P.jsx)(c._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,r){var d,i;return(0,P.jsx)("div",(0,l.Z)((0,l.Z)((0,l.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(r.isDragging?"border-dark":"border-dark-subtle"," "),children:(0,P.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(d=n.day)||void 0===d?void 0:d.userColor),opacity:r.isDragging?.8:1},children:[(0,P.jsx)(S,{day:n.day}),(0,P.jsxs)(j.Z,{onClick:function(){return p(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:m.isLoading,children:[(0,P.jsxs)("div",{children:[null===(i=n.day)||void 0===i?void 0:i.hours," h"]}),(0,P.jsx)("div",{className:"",children:h})]})]})}))}})},C=r(4261),F=function(n){return(0,P.jsx)(p.Z,{children:(0,P.jsx)(c.bK,{droppableId:n.column.id,children:function(e,r){return(0,P.jsxs)("div",(0,l.Z)((0,l.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 overflow-hidden border border-1 border border-top-0",style:{backgroundColor:r.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)"},children:[Array.isArray(n.column.days)?n.column.days.map((function(e,r){return(0,P.jsx)(z,{day:e,columnIdx:n.columnIdx,dayIdx:r},(0,C.Z)())})):[],e.placeholder]}))}})})},R=function(n){var e,r,d,t=(0,i.v9)((function(n){return n.monthsPanel})).month;return(0,P.jsx)(P.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===t||void 0===t||null===(r=t.calc)||void 0===r?void 0:r.acceptedHours},{headerText:"Odrzucone:",counter:null===t||void 0===t||null===(d=t.calc)||void 0===d?void 0:d.rejectedHours}].map((function(e){var r=e.headerText,d=e.counter;return(0,P.jsxs)(p.Z,{className:"text-dark-emphasis bg-white fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-white":"border-bottom border-2 border-dark-subtle"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[r," ","",d]},r)}))})},D=function(){var n=(0,s.useRef)(null),e=(0,s.useState)(0),r=(0,a.Z)(e,2),d=r[0],i=r[1];return{scrollableRef:n,thumbPosition:d,handleScroll:function(){var e=n.current;if(e){var r=e.scrollTop,d=e.scrollHeight,t=e.clientHeight;i(r/(d-t)*100)}}}},L=r(1419),T=function(){var n=(0,L.Z)().windowWidth,e=(0,f.Z)(),r=e.yearFromURL,d=e.monthFromURL,t=(0,x.CB)(),o=(0,a.Z)(t,1)[0],u=h(),p=u.submittedHoursSum,y=u.acceptedHoursSum,b=u.rejectedHoursSum,j=D(),g=j.scrollableRef,Z=j.thumbPosition,w=j.handleScroll,I=(0,i.v9)((function(n){return n.monthsPanel})).month,H=m(null===I||void 0===I?void 0:I.columns),N=(0,s.useState)([]),k=(0,a.Z)(N,2),S=k[0],z=k[1];(0,s.useEffect)((function(){z(H)}),[I]),(0,s.useEffect)((function(){var n,e;S.length>0&&o({year:r,month:d,monthBody:(0,l.Z)((0,l.Z)({},I),{},{columns:S,calc:(0,l.Z)((0,l.Z)({},null===I||void 0===I?void 0:I.calc),{},{currentHours:(null!==(n=null===I||void 0===I||null===(e=I.calc)||void 0===e?void 0:e.allHours)&&void 0!==n?n:0)-p-y-b+b,submittedHours:p,acceptedHours:y,rejectedHours:b})})})}),[S]);var C="d-flex column-gap-1";return(0,P.jsxs)("div",{ref:g,onScroll:w,className:"p-0 overflow-y-scroll",style:{height:"fit-content",maxHeight:n>500?"calc(100% - 32px)":"calc(100% - 32px - 2.5rem)"},children:[(0,P.jsx)("div",{className:"".concat(C," sticky-top"),children:(0,P.jsx)(R,{thumbPosition:Z})}),(0,P.jsx)("div",{className:"".concat(C),children:(0,P.jsx)(c.Z5,{onDragEnd:function(n){!function(n,e,r){var d=n.source,i=n.destination;if(i&&(d.draggableId!==i.droppableId||d.index===i.index))if(d.droppableId!==i.droppableId){var t=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===d.droppableId})),o=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===i.droppableId})),s=e&&(0,v.Z)(e[t].days),c=d.droppableId!==i.dropableId?(0,v.Z)(e[o].days):s,u=s.splice(d.index,1),m=(0,a.Z)(u,1)[0];c.splice(i.index,0,m);var h=(0,v.Z)(e);h[t]=(0,l.Z)((0,l.Z)({},e[t]),{},{days:s}),h[o]=(0,l.Z)((0,l.Z)({},e[o]),{},{days:c}),r(h)}else{var f=i.index,x=e.findIndex((function(n){return n.id===d.droppableId})),p=(0,v.Z)(e[x].days),y=p.splice(d.index,1),b=(0,a.Z)(y,1)[0];p.splice(f,0,b);var j=(0,v.Z)(e);j[x]=(0,l.Z)((0,l.Z)({},e[x]),{},{days:p}),r(j)}}(n,S,z)},children:null===S||void 0===S?void 0:S.map((function(n,e){return(0,P.jsx)(F,{column:n,columnIdx:e},n.id)}))})})]})},B=function(){var n,e,r,d,t,o=(0,i.v9)((function(n){return n.monthsPanel})).month;return(0,P.jsxs)("div",{className:"d-flex gap-2 mx-auto fw-medium pb-2",style:{width:"fit-content"},children:[(0,P.jsx)("div",{children:"Wszystkie"}),(0,P.jsxs)("div",{children:[null===o||void 0===o||null===(n=o.calc)||void 0===n?void 0:n.allHours," -"," ",(0,P.jsx)("span",{className:"".concat((null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===o||void 0===o||null===(r=o.calc)||void 0===r?void 0:r.currentHours})]}),(0,P.jsx)("div",{className:" ".concat((null===o||void 0===o||null===(d=o.calc)||void 0===d?void 0:d.currentHours)<=0?"text-danger":""),children:(null===o||void 0===o||null===(t=o.calc)||void 0===t?void 0:t.currentHours)<0?"Brak":"Dost\u0119pne"})]})},U=function(){var n,e=(0,i.v9)((function(n){return n.monthsPanel})),r=e.month,l=e.error,a=e.isLoading,s=(0,t.Z)().monthURLStringFormat;if(a)n=(0,o.a)((0,P.jsx)(d.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,P.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(l){if("status"in l){var c="status"in l&&l.status;n=(0,o.a)((0,P.jsx)("div",{className:"text-danger text-center ",children:(0,P.jsxs)(P.Fragment,{children:[" B\u0142\u0105d: ",c," "]})}))}}else n=r&&""!==(null===r||void 0===r?void 0:r.id)?(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{className:"py-2",style:{maxWidth:"1000px",width:"100%"},children:[(0,P.jsx)(B,{}),(0,P.jsx)(T,{})]})}):(0,o.a)((0,P.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",s,". Zapisz miesi\u0105c w ustawieniach."]}));return{monthContent:n}},W=r(3786),A=function(){var n=U().monthContent;return(0,P.jsx)(W.Z,{children:n})}},3940:function(n,e,r){r.d(e,{a:function(){return i}});var d=r(184),i=function(n){return(0,d.jsx)("div",{className:" d-flex justify-content-center align-items-center fs-3 text-warning text-center",style:{maxWidth:"1000px",width:"100%",height:"100%"},children:n})}}}]);
//# sourceMappingURL=181.f320fb6f.chunk.js.map