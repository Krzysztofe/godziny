"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[519],{871:function(n,e,t){t.d(e,{Z:function(){return c}});var r=t(1419),s=t(9439),i=t(2791),a=t(4604),o=function(){var n=(0,i.useState)(61),e=(0,s.Z)(n,2),t=e[0],r=e[1],o=0,l=function(){o=Date.now()+3e5};return(0,i.useEffect)((function(){var n=setInterval((function(){!function(){var n=Math.max(0,Math.floor((o-Date.now())/1e3));r(n),o<Date.now()&&a.I8.signOut()}()}),1e3);return function(){return clearInterval(n)}}),[]),(0,i.useEffect)((function(){l();var n=["mousemove","keypress","click","scroll"];return n.map((function(n){return document.addEventListener(n,l)})),function(){n.map((function(n){return document.addEventListener(n,l)}))}}),[]),{secondsRemaining:t}},l=t(184),u=function(){var n=o().secondsRemaining;return o(),(0,l.jsx)("div",{children:n+1<=60&&(0,l.jsx)("div",{id:"opacityContainer",className:"fixed-top d-flex d-center",style:{height:"100vh",zIndex:"1060",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,l.jsxs)("div",{className:"p-4 bg-white rounded-1 fs-3 fw-medium alertAnimationDown",children:["Wylogowanie nast\u0105pi za",(0,l.jsxs)("div",{className:"d-flex mx-auto w-fit-content",children:[n+1," ",(0,l.jsx)("div",{children:"\xa0s."})]}),(0,l.jsx)("div",{className:"w-fit-content m-auto"})]})})})},c=function(n){var e=(0,r.Z)().windowWidth;return(0,l.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100vh",overflow:"hidden",position:"relative"},children:[(0,l.jsx)("aside",{style:{width:e>=500?"30%":0,maxWidth:"250px",height:"100%"}}),(0,l.jsxs)("div",{className:"d-flex ps-1 flex-fill",style:{width:e>=500?"70%":"100%"},children:[(0,l.jsx)(u,{}),n.children]})]})}},1014:function(n,e,t){t.d(e,{Z:function(){return o}});var r=t(3360),s=t(5048),i=t(7064),a=t(184),o=function(n){var e=(0,s.I0)();return(0,a.jsx)(a.Fragment,{children:n.isPrinted?(0,a.jsx)("div",{id:"opacityContainer",className:"fixed-top d-center ",onClick:function(t){return function(t){var r,s;"opacityContainer"!==(null===(r=t.target)||void 0===r?void 0:r.id)&&"noButton"!==(null===(s=t.target)||void 0===s?void 0:s.id)||(null!==n&&void 0!==n&&n.setIsPrinted&&(null===n||void 0===n||n.setIsPrinted(!1)),e((0,i.VG)("")))}(t)},style:{height:"100vh",zIndex:"1060",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,a.jsxs)("div",{className:"p-4 bg-white rounded-1 fs-3 fw-medium alertAnimationDown",children:[n.header,(0,a.jsx)("div",{className:"w-fit-content m-auto",children:n.header.includes("Usun\u0105\u0107")?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{id:"noButton",children:"Nie"}),(0,a.jsx)(r.Z,{onClick:n.action,className:"bg-danger ms-4 border ",children:"Tak"})]}):(0,a.jsx)(r.Z,{id:"noButton",onClick:n.action,children:"Ok"})})]})}):(0,a.jsx)(a.Fragment,{})})}},5010:function(n,e,t){var r=t(6856),s=t(184);e.Z=function(n){return(0,s.jsx)(r.x3N,{className:"fs-3",style:{transform:"".concat(n.isOpen?"rotate(180deg)":""," "),transitionDuration:"320ms"}})}},3175:function(n,e,t){var r=t(184);e.Z=function(n){return(0,r.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:n.touched[n.value]&&n.errors[n.value]&&n.errors[n.value]})}},2015:function(n,e,t){var r=t(5705),s=t(3027),i=t(3175),a=t(184);e.Z=function(n){var e=(0,r.u6)(),t=e.values,o=e.handleBlur,l=e.setFieldValue,u=e.errors,c=e.touched;return(0,a.jsx)(a.Fragment,{children:n.inputsData.map((function(n){var e=n.value,r=n.label,d=n.type,v=n.isErrorPrint,h=n.min,m=n.max,f=n.placeholder;return(0,a.jsxs)(s.Z.Group,{children:[r&&(0,a.jsx)(s.Z.Label,{htmlFor:"date",className:"mb-0 fs-responsive fw-medium",children:r}),(0,a.jsx)(s.Z.Control,{id:e,type:d,name:e,value:t[e],onChange:function(n){return l(e,n.target.value)},onBlur:o,min:h,max:m,placeholder:f,size:"sm",className:"p-0 border border-primary shadow-sm w-100 text-capitalize ".concat("color"===d?"px-0":"px-1"),style:{minHeight:0}}),v&&(0,a.jsx)(i.Z,{value:e,errors:u,touched:c})]},e)}))})}},4256:function(n,e,t){var r=t(184);e.Z=function(n){return(0,r.jsx)(r.Fragment,{children:n.styles((0,r.jsx)("div",{className:"text-danger text-centerh",children:"B\u0142\u0105d. Od\u015bwie\u017c stron\u0119"}))})}},3464:function(n,e,t){var r=t(4849),s=t(184);e.Z=function(n){return(0,s.jsx)(s.Fragment,{children:n.styles((0,s.jsx)(r.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}))})}},7359:function(n,e,t){var r=t(9439),s=t(2791),i=t(1014),a=t(184);e.Z=function(n){var e=(0,s.useState)(!1),t=(0,r.Z)(e,2),o=t[0],l=t[1];return{handleAlert:function(){l(!0)},alert:(0,a.jsx)(i.Z,{action:n,isPrinted:o,setIsPrinted:l,header:"Usun\u0105\u0107 dzie\u0144?"})}}},1100:function(n,e,t){var r=t(4849),s=t(184);e.Z=function(n,e){var t=e;return n.isLoading&&(t=(0,s.jsx)(r.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(3433),s=t(5048);e.Z=function(){var n,e=(0,s.v9)((function(n){return n.listMonths})).listMonths;return{databaseMonthsDatesToString:e&&(null===(n=(0,r.Z)(e))||void 0===n?void 0:n.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)})))}}},1419:function(n,e,t){var r=t(9439),s=t(2791);e.Z=function(){var n=(0,s.useState)(window.innerWidth),e=(0,r.Z)(n,2),t=e[0],i=e[1];return(0,s.useEffect)((function(){var n=function(){i(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:t}}},5519:function(n,e,t){t.r(e),t.d(e,{default:function(){return nn}});var r=t(5048),s=t(871),i=t(4256),a=t(3464),o=t(2050),l=t(23),u=t(184),c=function(n){var e,t,r;return 0!==(null===(e=n.listContent)||void 0===e?void 0:e.length)&&n.listContent||(r="Brak danych"),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h3",{className:"h6",children:[n.header,": ",null===(t=n.listContent)||void 0===t?void 0:t.length]}),(0,u.jsxs)(l.Z,{className:"border-0 p-0",children:[(0,u.jsx)(l.Z.Item,{className:"py-1 px-2 text-warning border-0",children:r}),n.children]})]})},d=t(1419),v=t(9439),h=t(2791),m=t(3360),f=t(1100),x=t(7359),p=t(7425),j="shadow-sm p-0 mb-2 ps-2 pe-0 rounded-1",g=t(4165),Z=t(5861),b=t(6021),w=function(n){var e=(0,r.v9)((function(n){return n.listUsers})).listUsers,t=(0,b.I1)(),s=(0,v.Z)(t,2),i=s[0],a=s[1],o=function(){var t=(0,Z.Z)((0,g.Z)().mark((function t(){var r;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}if(r=null===e||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.userName)!==n})),t.t0=r,!t.t0){t.next=6;break}return t.next=6,i(r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{deleteUserAsync:o,success:a}},y=function(n){var e=(0,h.useState)(""),t=(0,v.Z)(e,2),r=t[0],s=t[1],i=w(r),a=i.deleteUserAsync,o=i.success,l=(0,f.Z)(o,(0,u.jsx)(p.GnT,{className:"text-danger fs-5 ms-auto"})).btnContent,c=(0,x.Z)(a),d=c.alert,j=c.handleAlert;return(0,u.jsxs)(u.Fragment,{children:[d,(0,u.jsxs)(m.Z,{onClick:function(){var e;!function(n){s(n)}(null===(e=n.user)||void 0===e?void 0:e.userName),j()},disabled:o.isLoading,className:"w-100 d-flex justify-content-between align-items-center px-1 rounded-0 bg-white border-0",style:{color:n.user.userColor},children:[n.user.userName,r===n.user.userName?l:(0,u.jsx)(p.GnT,{className:"text-danger fs-5 ms-auto"})]})]})},N=function(){var n=(0,r.v9)((function(n){return n.listUsers})).listUsers;return(0,u.jsx)(u.Fragment,{children:null===n||void 0===n?void 0:n.map((function(n){return(0,u.jsx)(l.Z.Item,{className:j,style:{backgroundColor:n.userColor,overflow:"hidden"},children:(0,u.jsx)(y,{user:n})},n.userName)}))})},k=t(2218),C=t(7858),H=function(n){var e=(0,r.v9)((function(n){return n.listMonths})).listMonths;return{monthDate:e&&e[n]}},M=t(3920),I=t(7615),F=function(n){var e=(0,r.I0)(),t=H(n).monthDate,s=(0,r.v9)((function(n){return n.listMonths})).listMonths,i=(0,I.bw)(),a=(0,v.Z)(i,2),o=a[0],l=a[1],u=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var r,i;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||null===s||void 0===s||!s.includes(t)){n.next=6;break}return e((0,M.fY)(-1)),r=t.slice(0,4),i=t.slice(-2),n.next=6,o({year:r,month:i});case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{deleteMonthAsync:u,success:l}},D=function(n){var e=F(n.idx),t=e.deleteMonthAsync,s=e.success,i=(0,f.Z)(s,(0,u.jsx)(p.GnT,{className:"text-danger fs-5 ms-auto"})).btnContent,a=H(n.idx).monthDate,o=(0,r.v9)((function(n){return n.listMonths})).listMonths,l=(0,x.Z)(t),c=l.handleAlert,d=l.alert;return(0,u.jsxs)(u.Fragment,{children:[d,(0,u.jsx)(m.Z,{disabled:s.isLoading,onClick:c,className:"ms-auto bg-transparent border-0 p-1",children:o&&a===o[n.idx]?i:(0,u.jsx)(p.GnT,{className:"text-danger fs-5 ms-auto"})})]})},z=t(828),L=t(1087),U=t(9622),E=function(n){var e=(0,r.v9)((function(n){return n.listMonths})).listMonths,t=(0,k.Z)().databaseMonthsDatesToString,s=t&&(0,U.f)(t[n.idx]);return(0,u.jsx)("div",{style:{width:"45%"},children:(0,u.jsxs)(L.rU,{to:"/godziny/".concat(null===e||void 0===e?void 0:e[n.idx]),className:"text-decoration-none fs-responsive text-dark fw-medium",children:[(0,u.jsx)(z.Fjg,{className:"fs-6 me-1 text-primary"}),s]})})},A=t(5010),S=t(1175),P=function(n,e){var t=(0,r.I0)(),s=(0,I._r)({year:null!==n&&void 0!==n?n:"",month:null!==e&&void 0!==e?e:""}),i=s.data,a=s.isLoading,o=s.error;return(0,h.useEffect)((function(){t((0,S.PA)(i)),t((0,S.le)(o)),t((0,S.rr)(a))}),[i,o,a,t]),(0,u.jsx)("div",{})},T=t(5705),B=t(8820),G=t(3027),V=function(n){var e=(0,T.u6)(),t=e.values,r=e.handleBlur,s=e.setFieldValue,i=t.allHours/3.2,a="linear-gradient(to right, rgba(180,120,255) ".concat(i,"%, rgba(180,180,255) ").concat(i,"%)");return(0,u.jsx)(u.Fragment,{children:n.inputsValues.map((function(n){return(0,u.jsx)(G.Z.Group,{className:"mt-2 d-flex align-items-center w-100",children:(0,u.jsx)(G.Z.Range,{name:n,min:0,max:320,value:t[n],onChange:function(e){return s(n,e.target.value)},onBlur:r,className:"form-range custom-range medium",style:{height:10,background:a}})},n)}))})},W=function(n){var e=(0,T.u6)().values,t=(0,r.v9)((function(n){return n.calcHours})).calcHours,s="";return t&&(null===t||void 0===t?void 0:t.submittedHours)+(null===t||void 0===t?void 0:t.acceptedHours)>+(null===e||void 0===e?void 0:e.allHours)&&(s="Min. ".concat((null===t||void 0===t?void 0:t.submittedHours)+(null===t||void 0===t?void 0:t.acceptedHours)," h")),(0,u.jsx)("div",{className:"text-danger fs-8",children:s})},O=t(2015),R=function(){var n=(0,r.v9)((function(n){return n.calcHours})).calcHours;console.log("",n);var e="fs-7 d-flex align-items-end";return(0,u.jsxs)("div",{className:"d-flex justify-content-between fw-medium ",children:[(0,u.jsx)("div",{className:e,children:"0 h"}),"Zapisane: ",null===n||void 0===n?void 0:n.allHours," h",(0,u.jsxs)("div",{className:"col-6 col-sm-5 d-flex",style:{width:"62px"},children:[(0,u.jsx)(O.Z,{inputsData:[{value:"allHours",type:"number",isErrorPrint:!1}]})," \xa0",(0,u.jsx)("div",{children:"h"})]}),(0,u.jsx)("div",{className:e,children:"320 h"})]})},Y=t(1413),J=function(n,e){var t=(0,I.uZ)(),s=(0,v.Z)(t,2),i=s[0],a=s[1],o=(0,r.v9)((function(n){return n.calcHours})).calcHours,l=function(){var t=(0,Z.Z)((0,g.Z)().mark((function t(r){return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=3;break}if(!((null===o||void 0===o?void 0:o.submittedHours)+(null===o||void 0===o?void 0:o.acceptedHours)>+(null===r||void 0===r?void 0:r.allHours))){t.next=3;break}return t.abrupt("return");case 3:if(t.t0=o&&r.allHours&&n&&e,!t.t0){t.next=7;break}return t.next=7,i({year:n,month:e,calcHours:(0,Y.Z)((0,Y.Z)({},o),{},{allHours:+r.allHours,currentHours:+r.allHours-o.acceptedHours-o.submittedHours})});case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return{initialValues:{allHours:0},onSubmit:l,success:a}},_=function(n){var e,t,r=H(n.idx).monthDate,s=null!==(e=null===r||void 0===r?void 0:r.slice(0,4))&&void 0!==e?e:"",i=null!==(t=null===r||void 0===r?void 0:r.slice(5))&&void 0!==t?t:"",a=J(s,i),o=a.initialValues,l=a.onSubmit,c=a.success,d=(0,f.Z)(c,(0,u.jsx)(B.dEn,{className:"text-primary",style:{fontSize:"1.4rem"}})).btnContent;return(0,u.jsx)(T.J9,{initialValues:o,onSubmit:l,children:(0,u.jsxs)(T.l0,{className:"py-2 pe-2",children:[(0,u.jsx)(R,{}),(0,u.jsx)(V,{inputsValues:["allHours"]}),(0,u.jsxs)("div",{className:"d-between align-items-center mt-2",children:[(0,u.jsx)(W,{}),(0,u.jsx)(m.Z,{type:"submit",disabled:c.isLoading,className:"col-2 d-center m-0 p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:d})]})]})})},q=function(n){return(0,u.jsx)("div",{className:"d-center fs-6",style:{height:"88px"},children:n})},K=function(n){var e,t,s=H(n.idx).monthDate,o=null!==(e=null===s||void 0===s?void 0:s.slice(0,4))&&void 0!==e?e:"",l=null!==(t=null===s||void 0===s?void 0:s.slice(5))&&void 0!==t?t:"";P(o,l);var c,d=(0,r.v9)((function(n){return n.calcHours})),v=d.calcHoursIsLoading,h=d.calcHoursError;return c=v?(0,u.jsx)(a.Z,{styles:q}):h?(0,u.jsx)(i.Z,{styles:q}):(0,u.jsx)(_,{idx:n.idx}),(0,u.jsxs)(u.Fragment,{children:[" ",c," "]})},Q=function(n){var e=(0,r.I0)(),t=(0,r.v9)((function(n){return n.listMonths})).openCollapseIndex,s=n.idx===t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(E,{idx:n.idx}),(0,u.jsxs)(m.Z,{onClick:function(){var t;t=n.idx,e((0,M.fY)(t)),s&&e((0,M.fY)(-1))},"aria-expanded":s,"aria-controls":"example-collapse-text",size:"sm",className:"fw-medium fs-responsive d-flex justify-content-between align-items-center p-0 ps-1",children:["Zapisz godziny",(0,u.jsx)(A.Z,{isOpen:s})]}),(0,u.jsx)(D,{idx:n.idx})]}),(0,u.jsx)(C.Z,{in:s,children:(0,u.jsx)("div",{className:"pe-1",children:s?(0,u.jsx)(K,{idx:n.idx}):(0,u.jsx)("div",{style:{height:"88px"}})})})]})},X=function(){var n=(0,k.Z)().databaseMonthsDatesToString;return(0,u.jsx)(u.Fragment,{children:null===n||void 0===n?void 0:n.map((function(n,e){return(0,u.jsx)(l.Z.Item,{className:j,children:(0,u.jsx)(Q,{idx:e})},n)}))})},$=function(){var n=(0,r.v9)((function(n){return n.listMonths})).listMonths,e=(0,r.v9)((function(n){return n.listUsers})).listUsers,t=(0,d.Z)().windowWidth;return(0,u.jsx)("div",{className:"bg-white p-2 py-4 p-sm-4 w-100",style:{height:t>=500?"calc(100%)":"calc(100% - 2.5rem)",overflow:"hidden auto",outline:"4px solid white",scrollbarGutter:"stable"},children:(0,u.jsxs)("div",{style:{maxWidth:"480px",width:"100%"},children:[(0,u.jsx)(c,{header:"Zapisane miesi\u0105ce",listContent:n,children:(0,u.jsx)(X,{})}),(0,u.jsx)("div",{className:"border my-4"}),(0,u.jsx)(c,{header:"Zapisani u\u017cytkownicy",listContent:e,children:(0,u.jsx)(N,{})})]})})},nn=function(){var n,e=(0,r.v9)((function(n){return n.listUsers})),t=e.listUsersError,l=e.listUsersIsLoading,c=(0,r.v9)((function(n){return n.listMonths})).listMonthsError,d=(0,r.v9)((function(n){return n.monthPanel})).updateMonthError;return n=l?(0,u.jsx)(a.Z,{styles:o.u}):d||c||t?(0,u.jsx)(i.Z,{styles:o.u}):(0,u.jsx)($,{}),(0,u.jsx)(s.Z,{children:n})}},9622:function(n,e,t){t.d(e,{f:function(){return r}});var r=function(n){return n.toLowerCase().split(" ").map((function(n){var e;return(null===n||void 0===n||null===(e=n.charAt(0))||void 0===e?void 0:e.toUpperCase())+n.slice(1)})).join(" ")}},2050:function(n,e,t){t.d(e,{u:function(){return s}});var r=t(184),s=function(n){return(0,r.jsx)("div",{className:"fixed-top d-center fs-4",style:{width:"100vw",height:"100vh",zIndex:"1060",backgroundColor:"rgba(255,255,255,0.4)"},children:n})}}}]);
//# sourceMappingURL=519.e86f50dc.chunk.js.map