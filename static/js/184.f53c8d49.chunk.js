"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[184],{9662:function(e,n,t){t.d(n,{j0:function(){return o},kc:function(){return l},p1:function(){return c},vs:function(){return d},xk:function(){return u}});var a=new Date,r=function(e){var n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(n,"-").concat(t,"-").concat(a)},s=new Date(a.getTime()+12096e5),i=new Date(a.getTime()+5184e6),o=a.getFullYear(),d=String(a.getMonth()+1).padStart(2,"0"),l=(String(a.getDate()).padStart(2,"0"),r(a),r(s)),c=r(i),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},8566:function(e,n,t){var a=t(1413),r=t(322),s=t(3572);n.Z=function(){var e,n,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(0,r.S$)(void 0),d=o.data,l=o.error,c=o.isLoading,u=d&&Object.keys(d),m=u&&Object.values(d).flat().map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{id:u[n]})})),h=(0,s.nr)(m),f=d&&h.length>0?null===h||void 0===h?void 0:h.find((function(e){return e.monthDate===i})):void 0,x=d&&(null===f||void 0===f?void 0:f.columns),v=d?null===f||void 0===f?void 0:f.allHours:"",p=d?null===f||void 0===f?void 0:f.currentHours:"",g=d?null===f||void 0===f?void 0:f.submitedHours:"",j=d?null===f||void 0===f?void 0:f.acceptedHours:"",y=d?null===f||void 0===f?void 0:f.rejectedHours:"",b=d&&h.length>0&&null!==x&&void 0!==x&&x[0].days?null===x||void 0===x||null===(e=x[0])||void 0===e?void 0:e.days.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.hours)}),0):0,Z=d&&h.length>0&&null!==x&&void 0!==x&&x[0].days?null===x||void 0===x||null===(n=x[1])||void 0===n?void 0:n.days.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.hours)}),0):0,w=d&&h.length>0&&null!==x&&void 0!==x&&x[0].days?null===x||void 0===x||null===(t=x[2])||void 0===t?void 0:t.days.reduce((function(e,n){return e+(null===n||void 0===n?void 0:n.hours)}),0):0,H=d&&h?h.map((function(e){return e.monthDate})):[],N=d?H.sort((function(e,n){return e<n?-1:e>n?1:0})):[],S=N.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)}));return{data:d,error:l,isLoading:c,databaseMonthsId:u,databaseMonthsCollection:h,databaseMonth:f,databaseColumns:x,databaseAllHours:v,dataCurrentHours:p,databaseAcceptedHours:j,databaseRejectedHours:y,dataBaseSubmitedHours:g,acceptedHoursSum:Z,rejectedHoursSum:w,submitedHoursSum:b,databaseMonthsDates:H,databaseMonthsDatesSorted:N,databaseMonthsDatesToString:S}}},4184:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var a=t(4849),r=t(7689),s=t(1413),i=t(9439),o=t(793),d=t(3572),l=t(8566),c=t(2791),u=t(322),m=t(4165),h=t(3433),f=t(5861),x=t(1830),v=t.n(x),p=t(6856),g=t(1578),j=t(3853),y=t(184),b=function(e){var n=new Date(e.day.date),t=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(n);return(0,y.jsxs)("div",{className:"px-1 py-2 py-sm-1",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between",style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[(0,y.jsx)("div",{children:e.day.userName}),(0,y.jsxs)("div",{children:[e.day.hours," ",(0,y.jsx)(j.TCC,{className:"text-primary"})]})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsx)("div",{children:t}),(0,y.jsx)("div",{children:"Poza"===e.day.place?(0,y.jsx)(g.ols,{className:"text-success"}):(0,y.jsx)(p.P8U,{className:"text-danger"})})]})]})},Z=t(3360),w=function(e){var n,t=(0,u.CB)(),a=(0,i.Z)(t,2),d=a[0],c=a[1],x=(0,r.UO)().monthURL,p=(0,l.Z)(x),g=p.databaseColumns,j=p.databaseMonth,w=p.data,H=function(){var e=(0,f.Z)((0,m.Z)().mark((function e(n){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var e=(0,f.Z)((0,m.Z)().mark((function e(t){var a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=4;break}return a=(0,h.Z)(g).map((function(e){return e&&e.days?(0,s.Z)((0,s.Z)({},e),{},{days:e.days.filter((function(e){return e.id!==n}))}):e})),e.next=4,d({id:w&&(null===j||void 0===j?void 0:j.id),columns:(0,s.Z)((0,s.Z)({},j),{},{columns:a})});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=(0,y.jsx)(o._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id.toString()),index:e.index,isDragDisabled:!1,children:function(n){return(0,y.jsxs)("div",(0,s.Z)((0,s.Z)((0,s.Z)({className:"bg-white card mb-2"},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[(0,y.jsx)(b,{day:e.day}),(0,y.jsx)(Z.Z,{variant:"info",size:"sm",className:"rounded-top-0 w-100 fw-medium ",onClick:function(){return H(e.day.id)},children:"Usu\u0144"})]}))}});return c.isLoading&&(N=(0,y.jsx)("div",{children:' "Loading" '})),c.isError&&(N=(0,y.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,y.jsx)(y.Fragment,{children:N})},H=function(e){return(0,y.jsx)("div",{className:"w-100",children:(0,y.jsx)(o.bK,{droppableId:e.column.id,children:function(n,t){var a,r;return(0,y.jsxs)("div",(0,s.Z)((0,s.Z)({},n.droppableProps),{},{ref:n.innerRef,className:"p-1 bg-primary-subtle",style:{height:"100%"},children:[e.column.days&&e.column.days.length>0&&(null===(a=e.column)||void 0===a||null===(r=a.days)||void 0===r?void 0:r.map((function(e,n){return(0,y.jsx)(w,{day:e,index:n},crypto.randomUUID())}))),n.placeholder]}))}})})},N=function(){var e=(0,r.UO)().monthURL,n=(0,l.Z)(e),t=n.databaseAcceptedHours,a=n.databaseRejectedHours,s=n.dataBaseSubmitedHours;return(0,y.jsx)(y.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:s},{headerText:"Przyznane:",counter:t},{headerText:"Odrzucone:",counter:a}].map((function(e){var n=e.headerText,t=e.counter;return(0,y.jsxs)("div",{className:"p-1 bg-primary-subtle text-dark-emphasis fw-medium w-100 border-4 border-bottom border-white",style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[n," ","",t]},n)}))})},S=t(7022),z=function(){var e=(0,r.UO)().monthURL,n=(0,l.Z)(e),t=n.data,a=n.databaseAllHours,m=n.databaseColumns,h=n.dataCurrentHours,f=n.databaseMonth,x=n.submitedHoursSum,v=n.acceptedHoursSum,p=n.rejectedHoursSum,g=(0,u.CB)(),j=(0,i.Z)(g,2),b=j[0],Z=(j[1],(0,c.useState)([])),w=(0,i.Z)(Z,2),z=w[0],k=w[1];(0,c.useEffect)((function(){t&&f&&k(m)}),[t,e]),(0,c.useEffect)((function(){t&&(null===z||void 0===z?void 0:z.length)>1&&(null===f||void 0===f?void 0:f.monthDate)&&b({id:t&&(null===f||void 0===f?void 0:f.id),columns:(0,s.Z)((0,s.Z)({},f),{},{columns:z,currentHours:a-x-v-p+p,submitedHours:x,acceptedHours:v,rejectedHours:p})})}),[z,a,h]);var C=(0,c.useRef)(null),D=(0,c.useState)(0),L=(0,i.Z)(D,2),U=L[0],B=L[1];return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("main",{ref:C,onScroll:function(){var e=C.current;if(e){var n=e.scrollTop,t=e.scrollHeight,a=e.clientHeight;B(n/(t-a)*100)}},className:"mb-2 overflow-y-scroll ",style:{top:"".concat(U,"%")},children:[(0,y.jsx)(S.Z,{className:"mx-0 ms-sm-auto sticky-top d-flex column-gap-2",children:(0,y.jsx)(N,{})}),(0,y.jsx)(S.Z,{className:"mx-0 ms-sm-auto mb-5 d-flex column-gap-2",style:{height:"fit-content"},children:(0,y.jsx)(o.Z5,{onDragEnd:function(e){return(0,d.qs)(e,z,k)},children:z&&z.length>0&&z.map((function(e){return(0,y.jsx)(H,{column:e},e.id)}))})})]})})},k=t(7858),C=t(3027),D=t(5705),L=t(8007),U=L.Ry({allHours:L.Rx().max(320,"Max. 320").required("Podaj liczb\u0119 godzin")}),B=function(){var e=(0,r.UO)().monthURL,n=(0,u.CB)(),t=(0,i.Z)(n,2),a=t[0],o=t[1],d=(0,l.Z)(e),c=d.databaseMonth,h=d.data,x=d.dataBaseSubmitedHours,v=d.databaseAcceptedHours,p=(0,D.TA)({initialValues:{allHours:0},validationSchema:U,onSubmit:function(){var e=(0,f.Z)((0,m.Z)().mark((function e(n){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x+v>+p.values.allHours)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a({id:h&&(null===c||void 0===c?void 0:c.id),columns:(0,s.Z)((0,s.Z)({},c),{},{allHours:n.allHours})});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:p,success:o}},I=function(){var e,n=(0,r.UO)().monthURL,t=B(),s=t.formik,i=t.success,o=(0,l.Z)(n),d=o.dataBaseSubmitedHours,c=o.databaseAcceptedHours;return e=i.isLoading?(0,y.jsx)(a.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,y.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):i.isError?(0,y.jsx)("div",{children:' "B\u0142\u0105d" '}):"Zapisz liczb\u0119 godzin",(0,y.jsxs)(C.Z,{onSubmit:s.handleSubmit,className:"my-2",children:[(0,y.jsx)(C.Z.Control,{type:"number",name:"allHours",min:0,max:320,value:s.values.allHours,onChange:s.handleChange,onBlur:s.handleBlur,placeholder:"Liczba",size:"sm",className:"p-0 px-1 mx-auto mb-2 border border-primary",style:{minHeight:0,cursor:"pointer",width:"fit-content"}}),(0,y.jsx)("div",{className:"text-danger d-block mt-0 fs-8 text-center",style:{height:"0.7rem"},children:d+c>+s.values.allHours?"Podaj ilo\u015b\u0107 godzin wi\u0119ksz\u0105 od ".concat(d+c," "):""}),(0,y.jsxs)(C.Z.Group,{className:"mt-2 d-flex align-items-center w-100",children:[(0,y.jsx)("div",{className:"fw-medium",children:"0"}),(0,y.jsx)(C.Z.Range,{name:"allHours",min:0,max:320,value:s.values.allHours,onChange:s.handleChange,onBlur:s.handleBlur,className:"form-range custom-range mx-2 medium",style:{height:10,background:"linear-gradient(to right, olive 0%, red ".concat(s.values.allHours,"%, transparent ").concat(s.values.allHours,"%, transparent 100%)")}}),(0,y.jsx)("div",{className:"fw-medium",children:"320"})]}),(0,y.jsx)(Z.Z,{type:"submit",variant:"info",size:"sm",className:"fw-medium d-block mx-auto mt-2 col-sm-4 col-md-3 col-lg-2",disabled:i.isLoading,children:e})]})},T=function(){var e=(0,c.useState)(!1),n=(0,i.Z)(e,2),t=n[0],a=n[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(Z.Z,{onClick:function(){return a(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,variant:"info",className:"fw-medium p-1 w-100 mt-1 d-flex justify-content-center align-items-center",children:["Liczba godzin w miesi\u0105cu",(0,y.jsx)(p.x3N,{className:"fs-1 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,y.jsx)(k.Z,{in:t,children:(0,y.jsx)("div",{className:"bg-primary-subtle rounded p-1",children:(0,y.jsx)(I,{})})})]})},R=function(){var e=(0,r.UO)().monthURL,n=e&&new Date(e);return{monthURLStringFormat:n&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)}},F=function(){var e=(0,r.UO)().monthURL,n=(0,l.Z)(e),t=n.databaseAllHours,a=n.dataCurrentHours,s=R().monthURLStringFormat;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"text-capitalize fw-medium mt-2 text-center d-sm-none",children:s}),(0,y.jsxs)("div",{className:" d-flex justify-content-center my-2 fw-medium position-relative",children:[(0,y.jsx)("div",{className:"text-capitalize fw-medium d-none d-sm-block  position-absolute end-0",children:s}),(0,y.jsx)("div",{className:"col-3 text-end",children:"Wszystkie"}),(0,y.jsxs)("div",{className:"mx-2",children:[t," -"," ",(0,y.jsx)("span",{className:"".concat(a<0?"text-danger":""),children:a})]}),(0,y.jsx)("div",{className:"col-3 ".concat(a<0?"text-danger":""),children:a<0?"Brak":"Dost\u0119pne"})]})]})},M=function(){return(0,y.jsx)("header",{className:"me-3",children:(0,y.jsxs)(S.Z,{className:"mx-0 ms-sm-auto ",children:[(0,y.jsx)(T,{}),(0,y.jsx)(F,{})]})})},P=t(9662),O=function(){var e,n=(0,r.UO)().monthURL,t=(0,l.Z)(n),s=t.databaseMonth,i=t.data,o=t.error;if(t.isLoading)e=(0,y.jsx)("main",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,y.jsx)(a.Z,{animation:"border",variant:"secondary",children:(0,y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});else if(o){if("status"in o){var d="status"in o&&o.status;return(0,y.jsx)("main",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,y.jsx)("h3",{className:"text-danger col-5",children:(0,y.jsxs)(y.Fragment,{children:[" B\u0142\u0105d: ",d," "]})})})}}else e=i?s?(0,y.jsxs)("main",{className:"d-flex flex-column",style:{height:"100vh"},children:[(0,y.jsx)(M,{}),(0,y.jsx)(z,{})]}):(0,y.jsx)("main",{className:"d-flex justify-content-center align-items-center text-center",style:{height:"100vh"},children:(0,y.jsxs)("h3",{className:"text-warning text-center col-5",children:["Brak danych z miesi\u0105ca ",P.xk]})}):(0,y.jsx)("main",{className:"d-flex justify-content-center align-items-center text-center",style:{height:"100vh"},children:(0,y.jsx)("h5",{className:"text-warning text-center col-5",children:"Brak  miesi\u0119cy zapisanych w bazie danych. Dodaj miesi\u0105c za pomoc\u0105 formularza"})});return(0,y.jsx)(y.Fragment,{children:e})}},3572:function(e,n,t){t.d(n,{nr:function(){return i},qs:function(){return o}});var a=t(9439),r=t(3433),s=t(1413),i=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,t;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,s.Z)((0,s.Z)({},e),{},{columns:null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{days:e.days||[]})}))})})):[]},o=function(e,n,t){var i=e.source,o=e.destination;if(o&&(i.draggableId!==o.droppableId||i.index===o.index))if(i.droppableId!==o.droppableId){var d=n.findIndex((function(e){return e.id===i.droppableId})),l=n.findIndex((function(e){return e.id===o.droppableId})),c=(0,r.Z)(n[d].days),u=i.droppableId!==o.dropableId?(0,r.Z)(n[l].days):c,m=c.splice(i.index,1),h=(0,a.Z)(m,1)[0];u.splice(o.index,0,h);var f=(0,r.Z)(n);f[d]=(0,s.Z)((0,s.Z)({},n[d]),{},{days:c}),f[l]=(0,s.Z)((0,s.Z)({},n[l]),{},{days:u}),t(f)}else{var x=o.index,v=n.findIndex((function(e){return e.id===i.droppableId})),p=(0,r.Z)(n[v].days),g=p.splice(i.index,1),j=(0,a.Z)(g,1)[0];p.splice(x,0,j);var y=(0,r.Z)(n);y[v]=(0,s.Z)((0,s.Z)({},n[v]),{},{days:p}),t(y)}}}}]);
//# sourceMappingURL=184.f53c8d49.chunk.js.map