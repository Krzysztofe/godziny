"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[961],{380:function(n,e,r){var t=r(184);e.Z=function(){return(0,t.jsx)("div",{className:"border d-md-none"})}},1014:function(n,e,r){r.d(e,{Z:function(){return a}});var t=r(3360),o=r(7064),i=r(5048),s=r(184),a=function(n){var e=(0,i.I0)();return n.isPrinted?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{id:"opacityContainer",className:"fixed-top _d-center _alert",onClick:function(r){var t;["opacityContainer","noButton"].includes(null===(t=r.target)||void 0===t?void 0:t.id)&&(null!==n&&void 0!==n&&n.setIsPrinted&&(null===n||void 0===n||n.setIsPrinted(!1)),e((0,o.VG)("")))},children:(0,s.jsxs)("div",{className:"p-5 bg-white _radius text-center fs-2 fw-medium _anim-dropDown",children:[n.header,(0,s.jsx)("div",{className:"_w-fitContent m-auto mt-4",children:n.header.includes("Usun\u0105\u0107")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Z,{id:"noButton",className:"_radius bg-dark border-0 px-4 px-sm-5",children:"Nie"}),(0,s.jsx)(t.Z,{onClick:n.action,className:"_radius bg-primary border-0 px-4 px-sm-5 ms-4 border ",children:"Tak"})]}):(0,s.jsx)(t.Z,{id:"noButton",className:"_radius _fs-3 bg-primary border-0 px-5 ms-4 border ",onClick:n.action,children:"Ok"})})]})})}):null}},4954:function(n,e,r){r.d(e,{Z:function(){return u}});var t=r(9439),o=r(2791),i=r(4604),s=function(){var n=(0,o.useState)(61),e=(0,t.Z)(n,2),r=e[0],s=e[1],a=0,d=function(){a=Date.now()+3e5};return(0,o.useEffect)((function(){var n=setInterval((function(){!function(){var n=Math.max(0,Math.floor((a-Date.now())/1e3));s(n),a<Date.now()&&i.I8.signOut()}()}),1e3);return function(){return clearInterval(n)}}),[]),(0,o.useEffect)((function(){d();var n=["mousemove","keypress","click","scroll"];return n.map((function(n){return document.addEventListener(n,d)})),function(){n.map((function(n){return document.addEventListener(n,d)}))}}),[]),{secondsRemaining:r}},a=r(184),d=function(){var n=s().secondsRemaining;return(0,a.jsx)(a.Fragment,{children:n+1<=60&&(0,a.jsx)("div",{className:"fixed-top _d-center p-5 _autoLogout",children:(0,a.jsxs)("div",{className:"p-5 bg-white rounded-1 _fs-3 fw-medium _anim-dropDown",children:["Wylogowanie nast\u0105pi za",(0,a.jsxs)("div",{className:"d-flex mx-auto _w-fitContent",children:[n+1," ",(0,a.jsx)("div",{children:"\xa0s."})]})]})})})},u=function(n){return(0,a.jsxs)("main",{className:"d-flex m-0 bg-secondary _indexContainer ",children:[(0,a.jsx)("aside",{className:"_indexContainer__aside"}),(0,a.jsxs)("div",{className:"_indexContainer__rightSide",children:[(0,a.jsx)(d,{}),n.children]})]})}},4256:function(n,e,r){var t=r(184);e.Z=function(n){return(0,t.jsx)(t.Fragment,{children:n.styles((0,t.jsx)("div",{className:"text-danger fs-1 text-center",children:"B\u0142\u0105d. Od\u015bwie\u017c stron\u0119"}))})}},3464:function(n,e,r){var t=r(4849),o=r(184);e.Z=function(n){return(0,o.jsx)(o.Fragment,{children:n.styles((0,o.jsx)(t.Z,{animation:"border",variant:"primary",className:"fs-5",children:(0,o.jsx)("span",{className:"visually-hidden",children:"Loading..."})}))})}},7359:function(n,e,r){var t=r(9439),o=r(2791),i=r(1014),s=r(184);e.Z=function(n,e){var r=(0,o.useState)(!1),a=(0,t.Z)(r,2),d=a[0],u=a[1];return{handleAlert:function(){u(!0)},alert:(0,s.jsx)(i.Z,{action:n,isPrinted:d,setIsPrinted:u,header:e})}}},1100:function(n,e,r){var t=r(4849),o=r(184);e.Z=function(n,e){var r=e;return n&&(r=(0,o.jsx)(t.Z,{animation:"border",size:"sm",variant:"primary",className:"text-dark",children:(0,o.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:r}}},3234:function(n,e,r){var t=r(7689);e.Z=function(){var n=(0,t.TH)().pathname.slice(1);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,r=n&&new Date(n);return{monthURLStringFormat:r&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(r))}}return{monthURLStringFormat:""}}},9065:function(n,e,r){var t=r(7689);e.Z=function(){var n=(0,t.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),r=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:r,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},6961:function(n,e,r){r.r(e),r.d(e,{default:function(){return nn}});var t=r(5048),o=r(4954),i=r(2791),s=r(8755),a=r(7615),d=r(9065),u=function(){var n=(0,t.I0)(),e=(0,d.Z)(),r=e.yearFromURL,o=e.monthFromURL,u=(0,d.Z)().isMonthInURL,c=u?r:"",l=u?o:"",v=(0,a.a6)({year:c,month:l}),m=v.data,f=v.error,h=v.isLoading;(0,i.useEffect)((function(){n((0,s.jw)(m)),n((0,s.MP)(f)),n((0,s.ed)(h))}),[m,f,h,n])},c=r(3234),l=r(184),v=function(){var n=(0,c.Z)().monthURLStringFormat;return(0,l.jsxs)("div",{className:"_d-center fs-2 text-warning text-center _monthPanelEmpty",children:["Brak danych z miesi\u0105ca ",n,". Zapisz miesi\u0105c w ustawieniach."]})},m=r(4256),f=r(3464),h=r(9439),x=r(7689),p=r(380),j=function(){var n,e=(0,c.Z)().monthURLStringFormat,r=(null===(n=e[0])||void 0===n?void 0:n.toUpperCase())+e.slice(1);return(0,l.jsx)("div",{className:"text-center fs-4 d-md-none",children:r})},y=function(){var n,e,r,o,i=(0,t.v9)((function(n){return n.monthPanel})).month;return(0,l.jsxs)("div",{className:"position-sticky z-3 fs-2 top-0 py-2 bg-secondary",children:[(0,l.jsxs)("div",{className:"d-flex mx-auto fw-medium _w-fitContent",children:[(0,l.jsxs)("div",{children:["Wszystkie ",null===i||void 0===i||null===(n=i.calcHours)||void 0===n?void 0:n.allHours,"\xa0-\xa0"]}),(0,l.jsxs)("div",{className:"".concat(i&&(null===i||void 0===i||null===(e=i.calcHours)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:[(0,l.jsx)("strong",{children:i&&(null===i||void 0===i||null===(r=i.calcHours)||void 0===r?void 0:r.currentHours)})," ","",i&&(null===i||void 0===i||null===(o=i.calcHours)||void 0===o?void 0:o.currentHours)<=0?"Brak":"Dost\u0119pne"]})]}),(0,l.jsx)(j,{})]})},g=r(793),b=r(1413),Z=r(4261),H=r(3360),_=r(7425),N=r(1100),w=r(7359),I=r(4165),k=r(5861),L=function(n,e){var r=n.columns.map((function(n){var r,t=null===n||void 0===n||null===(r=n.days)||void 0===r?void 0:r.filter((function(n){return console.log("",null===n||void 0===n?void 0:n.id),!(!n||!n.id)&&n.id!==e}));return(0,b.Z)((0,b.Z)({},n),{},{days:t})}));return(0,b.Z)((0,b.Z)({},n),{},{columns:r})},P=function(n,e,r){if(!n||!n.calcHours)return{currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0,allHours:0};var t=n.calcHours;return(0,b.Z)((0,b.Z)({},t),{},{currentHours:2!==e&&r?t.currentHours+r:t.currentHours,submittedHours:0===e&&r?t.submittedHours-r:t.submittedHours,acceptedHours:1===e&&r?t.acceptedHours-r:t.acceptedHours,rejectedHours:2===e&&r?t.rejectedHours-r:t.rejectedHours})},C=function(n,e){var r=(0,t.v9)((function(n){return n.monthPanel})).month,o=(0,a.ur)(),i=(0,h.Z)(o,2),s=i[0],u=i[1],c=(0,d.Z)(),l=c.yearFromURL,v=c.monthFromURL,m=function(){var t=(0,k.Z)((0,I.Z)().mark((function t(){var o;return(0,I.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null===n||void 0===n?void 0:n.hours,console.log("async",n.id),t.t0=r,!t.t0){t.next=6;break}return t.next=6,s({year:l,month:v,colIdx:e,monthBody:(0,b.Z)((0,b.Z)({},r),{},{calcHours:P(r,+e,o),columns:L((0,b.Z)({},r),null===n||void 0===n?void 0:n.id).columns})});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{deleteDayAsync:m,success:u}},D=function(n){var e,r=C(n.day,n.columnIdx),t=r.deleteDayAsync,o=r.success,i=(0,w.Z)(t,"Usun\u0105\u0107 dzie\u0144?"),s=i.handleAlert,a=i.alert,d=(0,N.Z)(o.isLoading,(0,l.jsx)(_.GnT,{className:"text-light-emphasis fs-2"})).btnContent;return(0,l.jsxs)(l.Fragment,{children:[a,(0,l.jsxs)(H.Z,{onClick:s,className:"d-flex justify-content-between fs-4 _fw-semiBold align-items-center w-100 p-0 bg-transparent border-0 text-dark",disabled:o.isLoading,children:[(0,l.jsxs)("div",{children:[null===(e=n.day)||void 0===e?void 0:e.hours," h"]}),(0,l.jsx)("div",{children:d})]})]})},R=r(6856),U=r(1578),F=function(n){return(0,l.jsx)("div",{children:"Poza"===n.place?(0,l.jsx)(U.ols,{className:"text-light-emphasis"}):(0,l.jsx)(R.P8U,{className:"text-light-emphasis"})})},S=function(n){var e,r;if(null===n||void 0===n||!n.day)return(0,l.jsx)("div",{children:"Brak danych"});var t=function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(e)}(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.date);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between text-light-emphasis fs-4 ",children:[(0,l.jsx)("div",{children:null===(r=n.day)||void 0===r?void 0:r.userName}),(0,l.jsx)(F,{place:n.day.place})]}),(0,l.jsx)("div",{className:"d-flex justify-content-between text-light-emphasis fs-4 _fw-semiBold",children:(0,l.jsx)("div",{children:t||""})})]})},z=function(n){var e,r,o=(0,t.v9)((function(n){return n.filterDays})).searchedName;return o&&"Szukaj"!==o?o!==n.day.userName&&(r="d-none"):r="d-block",(0,l.jsx)(g._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,t){var o;return(0,l.jsx)("div",(0,b.Z)((0,b.Z)((0,b.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white _radius border ".concat(t.isDragging?"border-dark":"border-dark-subtle"," ").concat(r),children:(0,l.jsxs)("div",{className:"ps-2 pe-1 py-2 py-sm-1 _radius",style:{borderTop:"8px solid ".concat(null===(o=n.day)||void 0===o?void 0:o.userColor),opacity:t.isDragging?.8:1},children:[(0,l.jsx)(S,{day:n.day}),(0,l.jsx)(D,{columnIdx:n.columnIdx,day:n.day})]})}))}})},T=function(n){var e=(0,t.v9)((function(n){return n.filterDays})).searchedName,r=e&&"Szukaj"!==e?"_isSearching":"";return(0,l.jsx)("div",{className:"_column position-relative",children:(0,l.jsx)(g.bK,{droppableId:n.column.id,children:function(e,t){return(0,l.jsxs)("div",(0,b.Z)((0,b.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 pt-3 px-lg-3 h-100 overflow-hidden border border-1 border border-top-0  ".concat((o=t.isDraggingOver,o?"_isDragging":"_noDragging")," ").concat(r),children:[Array.isArray(n.column.days)?n.column.days.map((function(e,r){return(0,l.jsx)(z,{day:e,columnIdx:n.columnIdx,dayIdx:r},(0,Z.Z)())})):[],e.placeholder]}));var o}})})},E=function(){var n=(0,i.useRef)(null),e=(0,i.useState)(0),r=(0,h.Z)(e,2),t=r[0],o=r[1];return{scrollableRef:n,thumbPosition:t,handleScroll:function(){var e=n.current;if(e){var r=e.scrollTop,t=e.scrollHeight,i=e.clientHeight;o(r/(t-i)*100)}}}},B=function(n){var e,r=(0,t.v9)((function(n){return n.monthPanel})).month,o=r&&(e=null===r||void 0===r?void 0:r.columns,Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,b.Z)((0,b.Z)({},n),{},{days:[]})})):[]);(0,i.useEffect)((function(){o&&n(o)}),[null===r||void 0===r?void 0:r.columns])},A=function(n){return null===n||void 0===n?void 0:n.reduce((function(n,e){return n+((null===e||void 0===e?void 0:e.hours)||0)}),0)},M=function(n,e){var r=(0,d.Z)(),o=r.yearFromURL,s=r.monthFromURL,u=(0,a.CB)(),c=(0,h.Z)(u,1)[0],l=(0,t.v9)((function(n){return n.monthPanel})).month,v=function(n){var e,r,t;return{submittedHours:A(null===(e=n[0])||void 0===e?void 0:e.days),acceptedHours:A(null===(r=n[1])||void 0===r?void 0:r.days),rejectedHours:A(null===(t=n[2])||void 0===t?void 0:t.days)}}(n),m=v.submittedHours,f=v.acceptedHours,x=v.rejectedHours;(0,i.useEffect)((function(){var e;n.length>0&&l&&c({year:o,month:s,monthBody:(0,b.Z)((0,b.Z)({},l),{},{columns:n,calcHours:(0,b.Z)((0,b.Z)({},null===l||void 0===l?void 0:l.calcHours),{},{currentHours:(null===l||void 0===l||null===(e=l.calcHours)||void 0===e?void 0:e.allHours)-m-f-x+x,submittedHours:m,acceptedHours:f,rejectedHours:x})})})}),[e])},O=r(3433),G=function(n,e){return null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e.droppableId}))},W=function(n,e){var r=n.splice(e.index,1);return(0,h.Z)(r,1)[0]},$=function(n,e,r){var t=(0,O.Z)(n);return t[e]=(0,b.Z)((0,b.Z)({},n[e]),{},{days:r}),t},q=function(n,e,r,t){var o=n.source,i=n.destination;i&&(o.draggableId===i.droppableId&&o.index!==i.index||"rejected"!==o.droppableId&&(o.droppableId!==i.droppableId?function(n,e,r,t){var o=G(n,e),i=function(n,e){return null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e.droppableId}))}(n,r),s=n&&(0,O.Z)(n[o].days),a=e.droppableId!==r.dropableId?(0,O.Z)(n[i].days):s,d=W(s,e);a.splice(r.index,0,d);var u=$(n,o,s);t($(u,i,a))}(e,o,i,r):function(n,e,r,t){var o=r.index,i=G(n,e),s=(0,O.Z)(n[i].days),a=W(s,e);s.splice(o,0,a),t($(n,i,s))}(e,o,i,r)))},K=function(){var n=E(),e=n.scrollableRef,r=(n.thumbPosition,n.handleScroll),o=(0,t.v9)((function(n){return n.monthPanel})).month,s=((0,t.v9)((function(n){return n.filterDays})).searchedName,(0,i.useState)([])),a=(0,h.Z)(s,2),d=a[0],u=a[1],c=(0,i.useState)(!1),v=(0,h.Z)(c,2),m=v[0],f=v[1];B(u),M(d,m);return(0,l.jsx)("div",{ref:e,onScroll:r,className:"_columnsContainer",children:(0,l.jsx)("div",{className:"_d-between _dragDropContex",children:(0,l.jsx)(g.Z5,{onDragEnd:function(n){o&&q(n,d,u),f((function(n){return!n}))},children:null===d||void 0===d?void 0:d.map((function(n,e){return(0,l.jsx)(T,{columnIdx:e,column:n},n.id)}))})})})},V=function(n){var e=(0,t.v9)((function(n){return n.monthPanel})).month,r=(0,i.useState)([n.counter]),o=(0,h.Z)(r,2),s=o[0],a=o[1],d=(0,i.useRef)(!0);return(0,i.useEffect)((function(){a([n.counter]),d.current=!1}),[null===e||void 0===e?void 0:e.id]),(0,i.useEffect)((function(){d.current?a((function(e){var r;return[].concat((0,O.Z)(e),[null!==(r=null===n||void 0===n?void 0:n.counter)&&void 0!==r?r:0])})):d.current=!0}),[n.counter]),(0,l.jsx)("div",{className:"_counter",children:(0,l.jsx)("div",{style:{transform:"translateY(-".concat(20*(s.length-1),"px)"),transition:"transform 0.3s"},children:s.map((function(n,e){return(0,l.jsx)("div",{className:"_counter__dygit",children:n},e)}))})})},Y=function(){var n,e,r,o=(0,t.v9)((function(n){return n.monthPanel})).month;return{dataColumnsHeader:[{headerText:"Z\u0142o\u017cone:",counter:null===o||void 0===o||null===(n=o.calcHours)||void 0===n?void 0:n.submittedHours},{headerText:"Przyznane:",counter:null===o||void 0===o||null===(e=o.calcHours)||void 0===e?void 0:e.acceptedHours},{headerText:"Odrzucone:",counter:null===o||void 0===o||null===(r=o.calcHours)||void 0===r?void 0:r.rejectedHours}]}},J=function(n){var e=Y().dataColumnsHeader;return(0,l.jsx)("div",{className:"_d-between _columnsHeader",children:e.map((function(n){var e=n.headerText,r=n.counter;return(0,l.jsxs)("div",{className:"text-primary _d-center _fw-semiBold p-1 _columnsHeader__item bg-secondary  border border-bottom-0\n        \n            \n            ",children:[e,(0,l.jsx)(V,{counter:r,text:e})]},e)}))})},Q=function(){var n=(0,x.TH)().pathname,e=(0,i.useState)(!1),r=(0,h.Z)(e,2),t=r[0],o=r[1],s=E();s.scrollableRef,s.thumbPosition,s.handleScroll;return(0,i.useEffect)((function(){o(!1);var n=setTimeout((function(){o(!0)}));return function(){clearTimeout(n)}}),[n]),(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{className:"px-2 px-sm-5 px-md-3 pb-3 _anim-opacity",children:[(0,l.jsx)(p.Z,{}),(0,l.jsx)(y,{}),(0,l.jsx)(J,{}),(0,l.jsx)(K,{})]})})},X=r(2050),nn=function(){u();var n,e=(0,t.v9)((function(n){return n.monthPanel})),r=e.month,i=e.monthErrorGet,s=e.monthIsLoading,a=(0,t.v9)((function(n){return n.listUsers})),d=a.listUsersError,c=a.listUsersIsLoading,h=(0,t.v9)((function(n){return n.listMonths})).listMonthsError;return n=s||c?(0,l.jsx)(f.Z,{styles:X.u}):i||d||h?(0,l.jsx)(m.Z,{styles:X.u}):r&&""!==(null===r||void 0===r?void 0:r.id)?(0,l.jsx)(Q,{}):(0,l.jsx)(v,{}),(0,l.jsx)(o.Z,{children:n})}},2050:function(n,e,r){r.d(e,{u:function(){return o}});var t=r(184),o=function(n){return(0,t.jsx)("div",{className:"fixed-top _d-center fs-4 _requestContainer",style:{width:"100vw",height:"100vh",zIndex:"1060",backgroundColor:"rgba(255,255,255,0.4)"},children:n})}}}]);
//# sourceMappingURL=961.249951b4.chunk.js.map