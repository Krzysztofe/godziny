"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[67],{3786:function(n,e,r){var t=r(1419),i=r(184);e.Z=function(n){var e=(0,t.Z)().windowWidth;return(0,i.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100dvh",overflow:"hidden"},children:[(0,i.jsx)("aside",{style:{width:e>=500?"30%":0,maxWidth:"250px",height:"100%"}}),(0,i.jsx)("div",{className:"d-flex ps-1 flex-fill",style:{width:e>=500?"70%":"100%"},children:n.children})]})}},1100:function(n,e,r){var t=r(1830),i=r.n(t),o=r(2791),d=r(4849),a=r(184);e.Z=function(n,e){(0,o.useEffect)((function(){if(n.isError){var e=n.error,r=e&&"status"in e&&e.status&&e.status;i().fire({text:"B\u0142\u0105d: ".concat(r||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var r=e;return n.isLoading&&(r=(0,a.jsx)(d.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:r}}},3234:function(n,e,r){var t=r(7689);e.Z=function(){var n=(0,t.TH)().pathname.slice(1);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,r=n&&new Date(n);return{monthURLStringFormat:r&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(r))}}return{monthURLStringFormat:""}}},9065:function(n,e,r){var t=r(7689);e.Z=function(){var n=(0,t.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),r=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:r,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,r){var t=r(9439),i=r(2791);e.Z=function(){var n=(0,i.useState)(window.innerWidth),e=(0,t.Z)(n,2),r=e[0],o=e[1];return(0,i.useEffect)((function(){var n=function(){o(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:r}}},67:function(n,e,r){r.r(e),r.d(e,{default:function(){return A}});var t=r(4849),i=r(5048),o=r(3234),d=r(3940),a=r(184),l=function(){var n,e,r,t,o,d=(0,i.v9)((function(n){return n.monthsPanel})).month;return(0,a.jsxs)("div",{className:"d-flex gap-2 mx-auto fw-medium pb-2",style:{width:"fit-content"},children:[(0,a.jsx)("div",{children:"Wszystkie"}),(0,a.jsxs)("div",{children:[null===d||void 0===d||null===(n=d.calc)||void 0===n?void 0:n.allHours," -"," ",(0,a.jsx)("span",{className:"".concat((null===d||void 0===d||null===(e=d.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===d||void 0===d||null===(r=d.calc)||void 0===r?void 0:r.currentHours})]}),(0,a.jsx)("div",{className:" ".concat((null===d||void 0===d||null===(t=d.calc)||void 0===t?void 0:t.currentHours)<=0?"text-danger":""),children:(null===d||void 0===d||null===(o=d.calc)||void 0===o?void 0:o.currentHours)<0?"Brak":"Dost\u0119pne"})]})},s=r(1413),c=r(9439),u=r(2791),v=r(793),m=r(7762),f=r(3433),h=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,s.Z)((0,s.Z)({},n),{},{days:[]})})):[]},x=function(){var n,e=(0,i.v9)((function(n){return n.monthsPanel})).month,r=0,t=0,o=0,d=h(null===e||void 0===e?void 0:e.columns),a=(0,m.Z)(d);try{for(a.s();!(n=a.n()).done;){var l=n.value,s=(l.days||[]).reduce((function(n,e){var r;return n+(null!==(r=null===e||void 0===e?void 0:e.hours)&&void 0!==r?r:0)}),0);switch(l.id){case"submitted":r=s;break;case"accepted":t=s;break;case"rejected":o=s}}}catch(c){a.e(c)}finally{a.f()}return{submittedHoursSum:r,acceptedHoursSum:t,rejectedHoursSum:o}},p=r(9065),y=r(7615),b=r(2677),g=r(4165),j=r(5861),Z=r(3360),w=r(7425),I=r(1830),H=r.n(I),N=r(1100),k=r(2767),L=r(6856),P=r(1578),S=function(n){var e,r;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var t,i,o=new Date(n.day.date);return r=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(o),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,a.jsx)("div",{children:null===(t=n.day)||void 0===t?void 0:t.userName}),(0,a.jsx)("div",{children:"Poza"===(null===(i=n.day)||void 0===i?void 0:i.place)?(0,a.jsx)(P.ols,{style:{color:"rgb(80,173,150)"}}):(0,a.jsx)(L.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,a.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,a.jsx)("div",{children:r||""})})]})}return(0,a.jsx)("div",{children:"Brak danych"})},B=function(n){var e,r=(0,p.Z)(),t=r.yearFromURL,o=r.monthFromURL,d=(0,i.v9)((function(n){return n.monthsPanel})).month,l=(0,y.ur)(),u=(0,c.Z)(l,2),m=u[0],f=u[1],h=(0,N.Z)(f,(0,a.jsx)(w.GnT,{className:"text-danger"})).btnContent,x=function(){var e=(0,j.Z)((0,g.Z)().mark((function e(r,i){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H().fire((0,k.p)("Usun\u0105\u0107 dzie\u0144")).then(function(){var e=(0,j.Z)((0,g.Z)().mark((function e(a){var l,s,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=4;break}return c=null===d||void 0===d||null===(l=d.columns[r])||void 0===l||null===(s=l.days)||void 0===s?void 0:s.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==i})),e.next=4,m({year:t,month:o,colIdx:n.columnIdx,daysBody:c||[]});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,a.jsx)(v._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,r){var t,i;return(0,a.jsx)("div",(0,s.Z)((0,s.Z)((0,s.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(r.isDragging?"border-dark":"border-dark-subtle"," "),children:(0,a.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(t=n.day)||void 0===t?void 0:t.userColor),opacity:r.isDragging?.8:1},children:[(0,a.jsx)(S,{day:n.day}),(0,a.jsxs)(Z.Z,{onClick:function(){return x(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:f.isLoading,children:[(0,a.jsxs)("div",{children:[null===(i=n.day)||void 0===i?void 0:i.hours," h"]}),(0,a.jsx)("div",{className:"",children:h})]})]})}))}})},R=r(4261),C=function(n){return(0,a.jsx)(b.Z,{children:(0,a.jsx)(v.bK,{droppableId:n.column.id,children:function(e,r){return(0,a.jsxs)("div",(0,s.Z)((0,s.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 overflow-hidden border border-1 border border-top-0",style:{backgroundColor:r.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)"},children:[Array.isArray(n.column.days)?n.column.days.map((function(e,r){return(0,a.jsx)(B,{day:e,columnIdx:n.columnIdx,dayIdx:r},(0,R.Z)())})):[],e.placeholder]}))}})})},F=function(n){var e,r,t,o=(0,i.v9)((function(n){return n.monthsPanel})).month;return(0,a.jsx)(a.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===o||void 0===o||null===(r=o.calc)||void 0===r?void 0:r.acceptedHours},{headerText:"Odrzucone:",counter:null===o||void 0===o||null===(t=o.calc)||void 0===t?void 0:t.rejectedHours}].map((function(e){var r=e.headerText,t=e.counter;return(0,a.jsxs)(b.Z,{className:"text-dark-emphasis bg-white fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-white":"border-bottom border-2 border-dark-subtle"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[r," ","",t]},r)}))})},T=function(){var n=(0,u.useRef)(null),e=(0,u.useState)(0),r=(0,c.Z)(e,2),t=r[0],i=r[1];return{scrollableRef:n,thumbPosition:t,handleScroll:function(){var e=n.current;if(e){var r=e.scrollTop,t=e.scrollHeight,o=e.clientHeight;i(r/(t-o)*100)}}}},z=r(1419),U=function(){var n=(0,z.Z)().windowWidth,e=(0,p.Z)(),r=e.yearFromURL,t=e.monthFromURL,o=(0,y.CB)(),d=(0,c.Z)(o,1)[0],l=x(),m=l.submittedHoursSum,b=l.acceptedHoursSum,g=l.rejectedHoursSum,j=T(),Z=j.scrollableRef,w=j.thumbPosition,I=j.handleScroll,H=(0,i.v9)((function(n){return n.monthsPanel})).month,N=h(null===H||void 0===H?void 0:H.columns),k=(0,u.useState)([]),L=(0,c.Z)(k,2),P=L[0],S=L[1];(0,u.useEffect)((function(){S(N)}),[H]),(0,u.useEffect)((function(){var n,e;P.length>0&&d({year:r,month:t,monthBody:(0,s.Z)((0,s.Z)({},H),{},{columns:P,calc:(0,s.Z)((0,s.Z)({},null===H||void 0===H?void 0:H.calc),{},{currentHours:(null!==(n=null===H||void 0===H||null===(e=H.calc)||void 0===e?void 0:e.allHours)&&void 0!==n?n:0)-m-b-g+g,submittedHours:m,acceptedHours:b,rejectedHours:g})})})}),[P]);var B="d-flex column-gap-1";return(0,a.jsxs)("div",{ref:Z,onScroll:I,className:"p-0 overflow-y-scroll",style:{height:"fit-content",maxHeight:n>500?"calc(100% - 32px)":"calc(100% - 32px - 2.5rem)"},children:[(0,a.jsx)("div",{className:"".concat(B," sticky-top"),children:(0,a.jsx)(F,{thumbPosition:w})}),(0,a.jsx)("div",{className:"".concat(B),children:(0,a.jsx)(v.Z5,{onDragEnd:function(n){!function(n,e,r){var t=n.source,i=n.destination;if(i&&(t.draggableId!==i.droppableId||t.index===i.index))if(t.droppableId!==i.droppableId){var o=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===t.droppableId})),d=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===i.droppableId})),a=e&&(0,f.Z)(e[o].days),l=t.droppableId!==i.dropableId?(0,f.Z)(e[d].days):a,u=a.splice(t.index,1),v=(0,c.Z)(u,1)[0];l.splice(i.index,0,v);var m=(0,f.Z)(e);m[o]=(0,s.Z)((0,s.Z)({},e[o]),{},{days:a}),m[d]=(0,s.Z)((0,s.Z)({},e[d]),{},{days:l}),r(m)}else{var h=i.index,x=e.findIndex((function(n){return n.id===t.droppableId})),p=(0,f.Z)(e[x].days),y=p.splice(t.index,1),b=(0,c.Z)(y,1)[0];p.splice(h,0,b);var g=(0,f.Z)(e);g[x]=(0,s.Z)((0,s.Z)({},e[x]),{},{days:p}),r(g)}}(n,P,S)},children:null===P||void 0===P?void 0:P.map((function(n,e){return(0,a.jsx)(C,{column:n,columnIdx:e},n.id)}))})})]})},D=function(){return(0,a.jsxs)("div",{className:"py-1",style:{maxWidth:"1000px",width:"100%"},children:[(0,a.jsx)(l,{}),(0,a.jsx)(U,{})]})},E=function(){var n,e=(0,i.v9)((function(n){return n.monthsPanel})),r=e.month,l=e.error,s=e.isLoading,c=(0,o.Z)().monthURLStringFormat;if(s)n=(0,d.a)((0,a.jsx)(t.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(l){if("status"in l){var u="status"in l&&l.status;n=(0,d.a)((0,a.jsx)("div",{className:"text-danger text-center ",children:(0,a.jsxs)(a.Fragment,{children:[" B\u0142\u0105d: ",u," "]})}))}}else n=r&&""!==(null===r||void 0===r?void 0:r.id)?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(D,{})}):(0,d.a)((0,a.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",c,". Zapisz miesi\u0105c w ustawieniach."]}));return{requestState:n}},W=r(3786),A=function(){var n=E().requestState;return(0,a.jsx)(W.Z,{children:n})}},2767:function(n,e,r){r.d(e,{Z:function(){return d},p:function(){return o}});var t=r(1830),i=r.n(t),o=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},d=function(n){i().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},3940:function(n,e,r){r.d(e,{a:function(){return i}});var t=r(184),i=function(n){return(0,t.jsx)("div",{className:" d-flex justify-content-center align-items-center fs-3 text-warning text-center",style:{maxWidth:"1000px",width:"100%",height:"100%"},children:n})}}}]);
//# sourceMappingURL=67.cb4190ba.chunk.js.map