"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[140],{9140:function(n,e,t){t.r(e),t.d(e,{default:function(){return q}});var a=t(9439),r=(t(2685),t(2791)),i=t(7732),o=t(8820),s=t(7689),c=t(1087),l=t(7923),u=t(5048),d=t(9065),m=t(7615),h=t(9288),f=t(6021),v=t(1362),x=t(8841),p=function(){var n=(0,u.I0)(),e=(0,d.Z)(),t=e.yearFromURL,a=e.monthFromURL,i=(0,m.a6)({year:t,month:a}),o=i.data,s=i.error,c=i.isLoading,l=(0,f.xY)(),p=l.data,g=l.error,b=l.isLoading,j=(0,m.yv)(),Z=j.data,y=j.error,w=j.isLoading;return(0,r.useEffect)((function(){n((0,h.jw)(o)),n((0,h.MP)(s)),n((0,h.ed)(c))}),[o,s,c,n]),(0,r.useEffect)((function(){n((0,v.Rf)(p)),n((0,v.E7)(g)),n((0,v.$$)(b))}),[p,g,b,n]),(0,r.useEffect)((function(){n((0,x.rn)(Z)),n((0,x.K9)(y)),n((0,x.MT)(w))}),[Z,y,w,n]),{}},g=(t(5293),t(4849)),b=t(3360),j=t(3200),Z=t(2767),y=t(7425),w=t(184),N=function(){var n=(0,s.s0)(),e=(0,r.useState)(!1),t=(0,a.Z)(e,2),i=t[0],o=t[1],c=(0,w.jsxs)("div",{className:"d-flex align-center text-start w-100",children:[(0,w.jsx)(y.aIK,{className:"fs-6 me-1"}),"Wyloguj"]});return i&&(c=(0,w.jsx)(g.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,w.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),(0,w.jsx)(b.Z,{onClick:function(){o(!0),j.I8.signOut().then((function(){n("/")})).catch((function(n){return(0,Z.Z)(n)})).finally((function(){o(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:i,children:c})},z=t(3855),k=t(9662),L=t(1100),S=function(){var n=(0,f.xY)().data,e=n||[],t=null===e||void 0===e?void 0:e.map((function(n){return n.userName}));return{dataSelects:[{name:"userName",firstOption:"".concat(0===t.length?"Zapisz w ustawieniach":"Imi\u0119"),labelText:"Podaj imi\u0119",options:t},{name:"hours",firstOption:"Liczba godzin",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}]}},C=t(4165),H=t(3433),D=t(1413),B=t(5861),F=t(5705),U=t(8007),R=U.Ry({userName:U.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(n){return"Imi\u0119"!==n})).required("Imi\u0119 wymagane"),hours:U.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(n){return"Liczba godzin"!==n})).required("Liczba godzin wymagana"),place:U.Z_().test("is-place-valid","Lokalizacja wymagana",(function(n){return"Lokalizacja"!==n})).required("Lokalizacja wymagana")}),I=function(){var n,e=(0,d.Z)(),t=e.yearFromURL,r=e.monthFromURL,i=(0,u.v9)((function(n){return n.monthsPanel})).month,o=(0,u.v9)((function(n){return n.users})).users,s=(0,m.Og)(),c=(0,a.Z)(s,2),l=c[0],h=c[1],f=i&&(null===i||void 0===i||null===(n=i.columns)||void 0===n?void 0:n[0]),v=(0,F.TA)({initialValues:{id:"",date:k.nt,hours:"",userName:"Imi\u0119",place:"",userColor:""},validationSchema:R,onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){var a,s,c,u,d;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===i||void 0===i||null===(a=i.calc)||void 0===a?void 0:a.currentHours)-+e.hours<0||0===(null===i||void 0===i||null===(s=i.calc)||void 0===s?void 0:s.currentHours))){n.next=2;break}return n.abrupt("return");case 2:return u=null===o||void 0===o||null===(c=o.find((function(n){return n.userName===e.userName})))||void 0===c?void 0:c.userColor,d=(0,D.Z)((0,D.Z)({},e),{},{id:crypto.randomUUID(),hours:+e.hours,userColor:u||""}),n.next=6,l({year:t,month:r,firstColumnBody:(0,D.Z)((0,D.Z)({},f),{},{days:null!==f&&void 0!==f&&f.days?[].concat((0,H.Z)(f.days),[d]):[d]})});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:v,success:h}},T=function(){var n,e,t=(0,u.v9)((function(n){return n.monthsPanel})).month,a=S().dataSelects,r=I(),i=r.formik,o=r.success,s=(0,L.Z)(o,"Dodaj dzie\u0144").btnContent,c=(0,d.Z)().isMonthInURL,l=null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.allHours,m=null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.currentHours;return(0,w.jsxs)(z.Z,{onSubmit:i.handleSubmit,className:"mt-2 ".concat(t&&c?"":"d-none"," ").concat(0===l?"formContainer":""),children:[a.map((function(n){var e=n.name,t=n.firstOption,a=n.labelText,r=n.options;return(0,w.jsxs)(z.Z.Group,{children:[(0,w.jsx)(z.Z.Label,{htmlFor:e,className:"mb-0 fs-6 fw-medium",children:a}),(0,w.jsxs)(z.Z.Select,{id:e,name:e,onChange:i.handleChange,onBlur:i.handleBlur,size:"sm",className:"p-0 px-1 border border-primary text-capitalize ".concat("Zapisz w ustawieniach"===t?"text-danger":""),style:{cursor:"pointer"},children:[(0,w.jsx)("option",{children:t}),null===r||void 0===r?void 0:r.map((function(n){return(0,w.jsx)("option",{value:n,children:n},n)}))]}),(0,w.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:i.touched[e]&&i.errors[e]&&i.errors[e]})]},a)})),(0,w.jsxs)(z.Z.Group,{children:[(0,w.jsx)(z.Z.Label,{htmlFor:"date",className:"mb-0 fs-6 fw-medium",children:"Podaj dzie\u0144"}),(0,w.jsx)(z.Z.Control,{id:"date",type:"date",name:"date",value:i.values.date,onChange:i.handleChange,onBlur:i.handleBlur,min:k.nt,max:k.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,w.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:i.touched.date&&i.errors.date&&i.errors.date})]}),(0,w.jsx)(b.Z,{type:"submit",disabled:o.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:s}),(0,w.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:m-+i.values.hours<0||0===m?"Brak dost\u0119pnych godzin":""})]})},E=t(7858),M=t(6856),P=function(){var n,e,t=(0,d.Z)(),r=t.yearFromURL,i=t.monthFromURL,o=(0,u.v9)((function(n){return n.monthsPanel})).month,s=(0,m.uZ)(),c=(0,a.Z)(s,2),l=c[0],h=c[1],f=null===o||void 0===o||null===(n=o.calc)||void 0===n?void 0:n.submittedHours,v=null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.acceptedHours,x=(0,F.TA)({initialValues:{allHours:0},onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(f+v>+x.values.allHours)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l({year:r,month:i,allHours:+e.allHours});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:x,success:h}},A=function(){var n=P(),e=n.formik,t=n.success,a=(0,L.Z)(t,"Dodaj godziny").btnContent,r=(0,u.v9)((function(n){return n.monthsPanel})).month,i=null===r||void 0===r?void 0:r.calc.submittedHours,o=null===r||void 0===r?void 0:r.calc.acceptedHours,s=e.values.allHours/3.2,c="linear-gradient(to right, rgba(180,120,255) ".concat(s,"%, rgba(180,180,255) ").concat(s,"%)");return(0,w.jsxs)(z.Z,{onSubmit:e.handleSubmit,className:"",children:[(0,w.jsxs)("div",{className:"d-flex",children:[(0,w.jsx)(z.Z.Control,{type:"number",name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:"Liczba",size:"sm",className:"p-0 px-1 mb-2 border border-primary",style:{minHeight:0,cursor:"pointer",width:"fit-content"}}),(0,w.jsx)("span",{children:" \xa0 h"})]}),(0,w.jsx)(z.Z.Group,{className:"mt-2 d-flex align-items-center w-100",children:(0,w.jsx)(z.Z.Range,{name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,className:"form-range custom-range medium",style:{height:10,background:c}})}),(0,w.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,w.jsx)("div",{className:"fw-medium",children:"0 h"}),(0,w.jsx)("div",{className:"text-danger  mt-auto fs-8",children:i+o>+e.values.allHours?"Min. ".concat(i+o," h"):""}),(0,w.jsx)("div",{className:"fw-medium",children:"320 h"})]}),(0,w.jsx)(b.Z,{type:"submit",variant:"info",size:"sm",className:"fw-medium w-100",disabled:t.isLoading,children:a})]})},O=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(b.Z,{variant:"outline-info",onClick:function(){return i(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 ",children:["Godziny",(0,w.jsx)(M.x3N,{className:"fs-5 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,w.jsx)(E.Z,{in:t,children:(0,w.jsx)("div",{className:"bg-white p-0",children:(0,w.jsx)(A,{})})})]})},G={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},W=function(){var n=(0,u.v9)((function(n){return n.infoMonths})).infoMonths;return{validationSchema:U.Ry({monthDate:U.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==n&&void 0!==n&&n.includes(e))}))})}},Y=function(){var n=(0,s.s0)(),e=(0,m.CB)(),t=(0,a.Z)(e,2),i=t[0],o=t[1],c=(0,m.kM)(),l=(0,a.Z)(c,1)[0],d=(0,m.bw)(),h=(0,a.Z)(d,1)[0],f=(0,u.v9)((function(n){return n.infoMonths})).infoMonths,v=W().validationSchema,x=(0,r.useState)(!1),p=(0,a.Z)(x,2),g=p[0],b=p[1],j=(0,F.TA)({initialValues:{monthDate:"".concat(k.j0,"-").concat(k.vs)},validationSchema:v,onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){var t,a,r;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.monthDate.slice(0,4),a=e.monthDate.slice(-2),r=(0,D.Z)((0,D.Z)({},G),{},{id:e.monthDate}),n.next=5,i({year:t,month:a,monthBody:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,r.useEffect)((function(){o.isSuccess?b(!0):b(!1)}),[o.isSuccess]),(0,r.useEffect)((function(){var e=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(){var t,a,r,i,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=9;break}return t=j.values.monthDate.slice(0,4),a=j.values.monthDate.slice(-2),r=f||[],e.next=6,l([].concat((0,H.Z)(r),["".concat(t,"-").concat(a)]));case 6:n("/".concat(j.values.monthDate)),e.next=15;break;case 9:if(!o.isError){e.next=15;break}return i=j.values.monthDate.slice(0,4),s=j.values.monthDate.slice(-2),e.next=14,h({year:i,month:s});case 14:(0,Z.Z)("");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[g,l]),{formik:j,success:o}},$=function(){var n=Y(),e=n.formik,t=n.success,a=(0,L.Z)(t,(0,w.jsx)(o.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(z.Z,{onSubmit:e.handleSubmit,className:"mt-1",children:[(0,w.jsxs)(z.Z.Group,{children:[(0,w.jsx)(z.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-6 fw-medium",children:"Podaj miesi\u0105c"}),(0,w.jsxs)("div",{className:"d-flex",children:[(0,w.jsx)(z.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(k.j0,"-").concat(k.vs),max:"2025-12",value:e.values.monthDate,onChange:e.handleChange,onBlur:e.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,w.jsx)(b.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:a})]})]}),(0,w.jsx)(z.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:e.touched.monthDate&&e.errors.monthDate&&e.errors.monthDate})]})})},_=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(b.Z,{variant:"outline-info",onClick:function(){return i(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 ",children:["Miesi\u0105c",(0,w.jsx)(M.x3N,{className:"fs-4 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,w.jsx)(E.Z,{in:t,children:(0,w.jsx)("div",{className:"bg-white p-0",children:(0,w.jsx)($,{})})})]})},q=function(){p();var n=(0,d.Z)().isMonthInURL,e=(0,s.TH)().pathname,t=(0,r.useState)(!1),u=(0,a.Z)(t,2),m=u[0],h=u[1],f=(0,r.useState)(window.innerWidth),v=(0,a.Z)(f,2),x=v[0],g=v[1];(0,r.useEffect)((function(){var n=function(){g(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),(0,r.useEffect)((function(){x>575&&h(!0)}),[x]);var b="100%";return x>575&&(b="200px"),x>769&&(b="230px"),x>992&&(b="250px"),(0,w.jsx)(w.Fragment,{children:["/"].includes(e)?null:(0,w.jsx)("aside",{children:(0,w.jsxs)(i.Z,{show:m,onHide:function(){return h(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"".concat(x<575&&"backgroundImage"," p-1 border-white"),style:{width:b,backgroundColor:x>575&&"rgba(255, 255, 255, 0.4)"},children:[n&&(0,w.jsxs)(i.Z.Body,{className:"flex-grow-0 p-2 bg-white rounded",children:[(0,w.jsx)(_,{}),(0,w.jsx)(O,{}),x<575?(0,w.jsx)(l.Z,{}):null,(0,w.jsx)(T,{})]}),(0,w.jsxs)(c.rU,{to:"/ustawienia",className:"text-info mt-auto fw-medium text-decoration-none ",children:[(0,w.jsx)(o.QAE,{})," Ustawienia"]}),(0,w.jsx)(N,{})]})})})}},9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return l},st:function(){return u},vs:function(){return c},xk:function(){return d}});var a=new Date,r=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(a)},i=new Date(a.getTime()+12096e5),o=new Date(a.getTime()+5184e6),s=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),l=(String(a.getDate()).padStart(2,"0"),r(a),r(i)),u=r(o),d=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},3200:function(n,e,t){t.d(e,{I8:function(){return s}});var a=t(4702),r=t(1793),i=t(2685),o=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,r.v0)(o);(0,i.N8)(o)},1100:function(n,e,t){var a=t(1830),r=t.n(a),i=t(2791),o=t(4849),s=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;r().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(o.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},3234:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.UO)().monthURL;if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},7923:function(n,e,t){var a=t(5048),r=t(3234),i=t(184);e.Z=function(){var n,e,t,o,s,c=(0,a.v9)((function(n){return n.monthsPanel})).month,l=(0,r.Z)().monthURLStringFormat;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:" d-flex justify-content-center my-2 fw-medium position-relative",children:[(0,i.jsx)("div",{className:"text-capitalize fw-medium d-none d-md-block  position-absolute end-0",children:l}),(0,i.jsx)("div",{className:"col-3 text-end",children:"Wszystkie"}),(0,i.jsxs)("div",{className:"mx-2",children:[null===c||void 0===c||null===(n=c.calc)||void 0===n?void 0:n.allHours," -"," ",(0,i.jsx)("span",{className:"".concat((null===c||void 0===c||null===(e=c.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===c||void 0===c||null===(t=c.calc)||void 0===t?void 0:t.currentHours})]}),(0,i.jsx)("div",{className:"col-3 ".concat((null===c||void 0===c||null===(o=c.calc)||void 0===o?void 0:o.currentHours)<=0?"text-danger":""),children:(null===c||void 0===c||null===(s=c.calc)||void 0===s?void 0:s.currentHours)<0?"Brak":"Dost\u0119pne"})]})})}},2767:function(n,e,t){t.d(e,{Z:function(){return o},p:function(){return i}});var a=t(1830),r=t.n(a),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},o=function(n){r().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},5293:function(){}}]);
//# sourceMappingURL=140.540267a6.chunk.js.map