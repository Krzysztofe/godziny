"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[608],{871:function(n,e,r){r.d(e,{Z:function(){return c}});var t=r(1419),i=r(9439),o=r(2791),d=r(4604),s=function(){var n=(0,o.useState)(61),e=(0,i.Z)(n,2),r=e[0],t=e[1],s=0,u=function(){s=Date.now()+3e5};return(0,o.useEffect)((function(){var n=setInterval((function(){!function(){var n=Math.max(0,Math.floor((s-Date.now())/1e3));t(n),s<Date.now()&&d.I8.signOut()}()}),1e3);return function(){return clearInterval(n)}}),[]),(0,o.useEffect)((function(){u();var n=["mousemove","keypress","click","scroll"];return n.map((function(n){return document.addEventListener(n,u)})),function(){n.map((function(n){return document.addEventListener(n,u)}))}}),[]),{secondsRemaining:r}},u=r(184),a=function(){var n=s().secondsRemaining;return s(),(0,u.jsx)("div",{children:n+1<=60&&(0,u.jsx)("div",{id:"opacityContainer",className:"fixed-top d-flex justify-content-center align-items-center ",style:{height:"100vh",zIndex:"1060",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,u.jsxs)("div",{className:"p-4 bg-white rounded-1 fs-3 fw-medium alertAnimationDown",children:["Wylogowanie nast\u0105pi za",(0,u.jsxs)("div",{className:"d-flex mx-auto w-fit-content",children:[n+1," ",(0,u.jsx)("div",{children:"\xa0s."})]}),(0,u.jsx)("div",{className:"w-fit-content m-auto"})]})})})},c=function(n){var e=(0,t.Z)().windowWidth;return(0,u.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100vh",overflow:"hidden",position:"relative"},children:[(0,u.jsx)("aside",{style:{width:e>=500?"30%":0,maxWidth:"250px",height:"100%"}}),(0,u.jsxs)("div",{className:"d-flex ps-1 flex-fill",style:{width:e>=500?"70%":"100%"},children:[(0,u.jsx)(a,{}),n.children]})]})}},1014:function(n,e,r){r.d(e,{Z:function(){return s}});var t=r(3360),i=r(5048),o=r(7064),d=r(184),s=function(n){var e=(0,i.I0)();return(0,d.jsx)(d.Fragment,{children:n.isPrinted?(0,d.jsx)("div",{id:"opacityContainer",className:"fixed-top d-flex justify-content-center align-items-center ",onClick:function(r){return function(r){var t,i;"opacityContainer"!==(null===(t=r.target)||void 0===t?void 0:t.id)&&"noButton"!==(null===(i=r.target)||void 0===i?void 0:i.id)||(null!==n&&void 0!==n&&n.setIsPrinted&&(null===n||void 0===n||n.setIsPrinted(!1)),e((0,o.VG)("")))}(r)},style:{height:"100vh",zIndex:"1060",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,d.jsxs)("div",{className:"p-4 bg-white rounded-1 fs-3 fw-medium alertAnimationDown",children:[n.header,(0,d.jsx)("div",{className:"w-fit-content m-auto",children:n.header.includes("Usun\u0105\u0107")?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.Z,{id:"noButton",children:"Nie"}),(0,d.jsx)(t.Z,{onClick:n.action,className:"bg-danger ms-4 border ",children:"Tak"})]}):(0,d.jsx)(t.Z,{id:"noButton",onClick:n.action,children:"Ok"})})]})}):(0,d.jsx)(d.Fragment,{})})}},2845:function(n,e,r){r.d(e,{Z:function(){return c}});var t=r(2791),i=r(5048),o=r(3920),d=r(9439),s=r(2685),u=r(4604),a=function(){var n=(0,s.iH)(u.Fs),e=(0,t.useState)(""),r=(0,d.Z)(e,2),i=r[0],o=r[1],a=(0,t.useState)([]),c=(0,d.Z)(a,2),l=c[0],v=c[1];return(0,t.useEffect)((function(){var e=(0,s.jM)(n,(function(n){var e=[],r=[];null===n||void 0===n||n.forEach((function(n){var t=n.key;e.push(t);var i=(0,s.iH)(u.Fs,"".concat(t));(0,s.jM)(i,(function(n){var e=[];null===n||void 0===n||n.forEach((function(n){var r=n.key;e.push(r.slice(6))})),r.push(e)}),(function(n){o("B\u0142\u0105d. Od\u015bwie\u017c stron\u0119")}))}));var t=[].concat(r).map((function(n,r){return n.map((function(n){return e[r]+"-"+n}))})).flat().reverse();v(t)}),(function(n){o("B\u0142\u0105d. Od\u015bwie\u017c stron\u0119")}));return function(){e()}}),[]),{databaseListMonths:l,error:i}},c=function(){var n=(0,i.I0)(),e=a(),r=e.databaseListMonths,d=e.error;(0,t.useEffect)((function(){n((0,o.eT)(r)),n((0,o.V2)(d))}),[r,n])}},1100:function(n,e,r){var t=r(4849),i=r(184);e.Z=function(n,e){var r=e;return n.isLoading&&(r=(0,i.jsx)(t.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:r}}},3234:function(n,e,r){var t=r(7689);e.Z=function(){var n=(0,t.TH)().pathname.slice(9);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,r=n&&new Date(n);return{monthURLStringFormat:r&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(r))}}return{monthURLStringFormat:""}}},9065:function(n,e,r){var t=r(7689);e.Z=function(){var n=(0,t.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),r=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:r,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,r){var t=r(9439),i=r(2791);e.Z=function(){var n=(0,i.useState)(window.innerWidth),e=(0,t.Z)(n,2),r=e[0],o=e[1];return(0,i.useEffect)((function(){var n=function(){o(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:r}}},6608:function(n,e,r){r.r(e),r.d(e,{default:function(){return J}});var t=r(871),i=r(2845),o=r(2791),d=r(6021),s=r(4832),u=r(5048),a=function(){var n=(0,u.I0)(),e=(0,d.xY)(),r=e.data,t=e.error,i=e.isLoading;(0,o.useEffect)((function(){n((0,s.Kx)(r)),n((0,s.qF)(t)),n((0,s.iP)(i))}),[r,t,i,n])},c=r(8755),l=r(7615),v=r(9065),f=function(){var n=(0,u.I0)(),e=(0,v.Z)(),r=e.yearFromURL,t=e.monthFromURL,i=(0,v.Z)().isMonthInURL,d=i?r:"",s=i?t:"",a=(0,l.a6)({year:d,month:s}),f=a.data,m=a.error,h=a.isLoading;(0,o.useEffect)((function(){n((0,c.jw)(f)),n((0,c.MP)(m)),n((0,c.ed)(h))}),[f,m,h,n])},m=r(4849),h=r(3234),x=r(3940),p=r(9439),y=r(7689),g=r(184),j=function(){var n,e,r,t,i=(0,u.v9)((function(n){return n.monthPanel})).month;return(0,g.jsxs)("div",{className:"d-flex mx-auto fw-medium pb-2 w-fit-content",children:[(0,g.jsxs)("div",{children:["Wszystkie ",null===i||void 0===i||null===(n=i.calcHours)||void 0===n?void 0:n.allHours,"\xa0-\xa0"]}),(0,g.jsxs)("div",{className:"".concat(i&&(null===i||void 0===i||null===(e=i.calcHours)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:[i&&(null===i||void 0===i||null===(r=i.calcHours)||void 0===r?void 0:r.currentHours)," ","",i&&(null===i||void 0===i||null===(t=i.calcHours)||void 0===t?void 0:t.currentHours)<0?"Brak":"Dost\u0119pne"]})]})},b=r(1413),Z=r(793),w=r(4165),H=r(5861),I=r(3360),N=r(7425),k=r(1014),L=r(1100),P=r(6856),R=r(1578),E=function(n){var e,r;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var t,i,o=new Date(n.day.date);return r=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(o),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,g.jsx)("div",{children:null===(t=n.day)||void 0===t?void 0:t.userName}),(0,g.jsx)("div",{children:"Poza"===(null===(i=n.day)||void 0===i?void 0:i.place)?(0,g.jsx)(R.ols,{style:{color:"rgb(80,173,150)"}}):(0,g.jsx)(P.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,g.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,g.jsx)("div",{children:r||""})})]})}return(0,g.jsx)("div",{children:"Brak danych"})},F=function(n,e){var r=n.columns.map((function(n){var r,t=null===n||void 0===n||null===(r=n.days)||void 0===r?void 0:r.filter((function(n){return n.id!==e}));return(0,b.Z)((0,b.Z)({},n),{},{days:t})}));return(0,b.Z)((0,b.Z)({},n),{},{columns:r})},C=function(n,e,r){if(!n||!n.calcHours)return{currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0,allHours:0};var t=n.calcHours;return(0,b.Z)((0,b.Z)({},t),{},{currentHours:2!==e&&r?t.currentHours+r:t.currentHours,submittedHours:0===e&&r?t.submittedHours-r:t.submittedHours,acceptedHours:1===e&&r?t.acceptedHours-r:t.acceptedHours,rejectedHours:2===e&&r?t.rejectedHours-r:t.rejectedHours})},S=function(n){var e,r,t=(0,v.Z)(),i=t.yearFromURL,d=t.monthFromURL,s=(0,u.v9)((function(n){return n.monthPanel})).month,a=(0,l.ur)(),c=(0,p.Z)(a,2),f=c[0],m=c[1],h=(0,L.Z)(m,(0,g.jsx)(N.GnT,{className:"text-danger"})).btnContent,x=(0,o.useState)(""),y=(0,p.Z)(x,2),j=y[0],P=y[1],R=(0,o.useState)(""),S=(0,p.Z)(R,2),U=S[0],z=S[1],T=(0,o.useState)(!1),D=(0,p.Z)(T,2),B=D[0],M=D[1],W=(0,b.Z)({},null===s||void 0===s||null===(e=s.columns[n.columnIdx].days)||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.day.id}))),A=function(){var e=(0,H.Z)((0,w.Z)().mark((function e(){var r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===W||void 0===W?void 0:W.id)!==U){e.next=6;break}if(r=null===W||void 0===W?void 0:W.hours,e.t0=s,!e.t0){e.next=6;break}return e.next=6,f({year:i,month:d,colIdx:n.columnIdx,monthBody:(0,b.Z)((0,b.Z)({},s),{},{calcHours:C(s,+j,r),columns:F((0,b.Z)({},s),U).columns})});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)(Z._l,{draggableId:n.day&&(null===n||void 0===n||null===(r=n.day)||void 0===r?void 0:r.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,r){var t,i;return(0,g.jsxs)("div",(0,b.Z)((0,b.Z)((0,b.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(r.isDragging?"border-dark":"border-dark-subtle"," "),children:[(0,g.jsx)(k.Z,{action:A,isPrinted:B,setIsPrinted:M,header:"Usun\u0105\u0107 dzie\u0144?"}),(0,g.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(t=n.day)||void 0===t?void 0:t.userColor),opacity:r.isDragging?.8:1},children:[(0,g.jsx)(E,{day:n.day}),(0,g.jsxs)(I.Z,{onClick:function(){return e=n.columnIdx.toString(),r=n.day.id,P(e),z(r),void M(!0);var e,r},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0 fw-medium text-dark",disabled:m.isLoading,children:[(0,g.jsxs)("div",{children:[null===(i=n.day)||void 0===i?void 0:i.hours," h"]}),(0,g.jsx)("div",{children:h})]})]})]}))}})},U=r(4261),z=function(n){return(0,g.jsx)("div",{style:{width:"33%"},children:(0,g.jsx)(Z.bK,{droppableId:n.column.id,children:function(e,r){return(0,g.jsxs)("div",(0,b.Z)((0,b.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 overflow-hidden border border-1 border border-top-0",style:{backgroundColor:r.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)",height:"100%"},children:[Array.isArray(n.column.days)?n.column.days.map((function(e,r){return(0,g.jsx)(S,{day:e,columnIdx:n.columnIdx,dayIdx:r},(0,U.Z)())})):[],e.placeholder]}))}})})},T=r(3433),D=function(n){var e=(0,u.v9)((function(n){return n.monthPanel})).month,r=(0,o.useState)([n.counter]),t=(0,p.Z)(r,2),i=t[0],d=t[1],s=(0,o.useRef)(!0),a=(0,o.useRef)();return(0,o.useEffect)((function(){a.current=i,a.current&&a.current.length>0&&0===a.current[a.current.length-1]&&(s.current=!0)}),[i]),(0,o.useEffect)((function(){d([n.counter]),s.current=!1}),[null===e||void 0===e?void 0:e.id]),(0,o.useEffect)((function(){s.current?d((function(e){var r;return[].concat((0,T.Z)(e),[null!==(r=null===n||void 0===n?void 0:n.counter)&&void 0!==r?r:0])})):s.current=!0}),[n.counter]),(0,g.jsx)("div",{className:"counter",children:(0,g.jsx)("div",{style:{transform:"translateY(-".concat(20*(i.length-1),"px)"),transition:"transform 0.3s ease"},children:i.map((function(n,e){return(0,g.jsx)("div",{style:{height:"20px",marginLeft:"3px"},children:n},e)}))})})},B=function(n){var e,r,t,i=(0,u.v9)((function(n){return n.monthPanel})).month;return(0,g.jsx)(g.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===i||void 0===i||null===(e=i.calcHours)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===i||void 0===i||null===(r=i.calcHours)||void 0===r?void 0:r.acceptedHours},{headerText:"Odrzucone:",counter:null===i||void 0===i||null===(t=i.calcHours)||void 0===t?void 0:t.rejectedHours}].map((function(e){var r=e.headerText,t=e.counter;return(0,g.jsxs)("div",{className:"text-dark-emphasis fs-responsive bg-white fw-medium p-1 d-flex align-items-center  ".concat(0===n.thumbPosition?"border-bottom border-3 border-white":"border-bottom border-3"),style:{height:"35px",width:"33%"},children:[r,t?(0,g.jsx)(D,{counter:t,text:r}):(0,g.jsx)(D,{counter:0,text:r})]},r)}))})},M=function(){var n=(0,o.useRef)(null),e=(0,o.useState)(0),r=(0,p.Z)(e,2),t=r[0],i=r[1];return{scrollableRef:n,thumbPosition:t,handleScroll:function(){var e=n.current;if(e){var r=e.scrollTop,t=e.scrollHeight,o=e.clientHeight;i(r/(t-o)*100)}}}},W=function(n,e){return null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e.droppableId}))},A=function(n,e){var r=n.splice(e.index,1);return(0,p.Z)(r,1)[0]},O=function(n,e,r){var t=n.source,i=n.destination;i&&(t.draggableId===i.droppableId&&t.index!==i.index||"rejected"!==t.droppableId&&(t.droppableId!==i.droppableId?function(n,e,r,t){var i=W(n,e),o=function(n,e){return null===n||void 0===n?void 0:n.findIndex((function(n){return n.id===e.droppableId}))}(n,r),d=n&&(0,T.Z)(n[i].days),s=e.droppableId!==r.dropableId?(0,T.Z)(n[o].days):d,u=A(d,e);s.splice(r.index,0,u);var a=(0,T.Z)(n);a[i]=(0,b.Z)((0,b.Z)({},n[i]),{},{days:d}),a[o]=(0,b.Z)((0,b.Z)({},n[o]),{},{days:s}),t(a)}(e,t,i,r):function(n,e,r,t){var i=r.index,o=W(n,e),d=(0,T.Z)(n[o].days),s=A(d,e);d.splice(i,0,s);var u=(0,T.Z)(n);u[o]=(0,b.Z)((0,b.Z)({},n[o]),{},{days:d}),t(u)}(e,t,i,r)))},q=r(1419),G=function(n){return null===n||void 0===n?void 0:n.reduce((function(n,e){return n+((null===e||void 0===e?void 0:e.hours)||0)}),0)},K=function(n){var e,r,t;return{submittedHours:G(null===(e=n[0])||void 0===e?void 0:e.days),acceptedHours:G(null===(r=n[1])||void 0===r?void 0:r.days),rejectedHours:G(null===(t=n[2])||void 0===t?void 0:t.days)}},V=function(){var n=(0,v.Z)(),e=n.yearFromURL,r=n.monthFromURL,t=(0,l.CB)(),i=(0,p.Z)(t,1)[0],d=(0,u.v9)((function(n){return n.monthPanel})).month,s=(0,o.useState)([]),a=(0,p.Z)(s,2),c=a[0],f=a[1],m=(0,o.useState)(!1),h=(0,p.Z)(m,2),x=h[0],y=h[1],j=K(c),w=j.submittedHours,H=j.acceptedHours,I=j.rejectedHours,N=M(),k=N.scrollableRef,L=N.thumbPosition,P=N.handleScroll,R=(0,q.Z)().windowWidth,E=d&&function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,b.Z)((0,b.Z)({},n),{},{days:[]})})):[]}(null===d||void 0===d?void 0:d.columns);(0,o.useEffect)((function(){E&&f(E)}),[null===d||void 0===d?void 0:d.columns]),(0,o.useEffect)((function(){var n;c.length>0&&d&&i({year:e,month:r,monthBody:(0,b.Z)((0,b.Z)({},d),{},{columns:c,calcHours:(0,b.Z)((0,b.Z)({},null===d||void 0===d?void 0:d.calcHours),{},{currentHours:(null===d||void 0===d||null===(n=d.calcHours)||void 0===n?void 0:n.allHours)-w-H-I+I,submittedHours:w,acceptedHours:H,rejectedHours:I})})})}),[x]);var F="d-flex justify-content-between";return(0,g.jsxs)("div",{ref:k,onScroll:P,className:"overflow-y-scroll h-100",style:{maxHeight:R>=500?"calc(100% - 32px)":"calc(100% - 32px - 2.5rem)"},children:[(0,g.jsx)("div",{className:"".concat(F," sticky-top"),children:(0,g.jsx)(B,{thumbPosition:L})}),(0,g.jsx)("div",{className:"".concat(F),style:{minHeight:"calc(100% - 35px)"},children:(0,g.jsx)(Z.Z5,{onDragEnd:function(n){d&&O(n,c,f),y((function(n){return!n}))},children:null===c||void 0===c?void 0:c.map((function(n,e){return(0,g.jsx)(z,{column:n,columnIdx:e},n.id)}))})})]})},Y=function(){var n=(0,y.TH)().pathname,e=(0,o.useState)(!1),r=(0,p.Z)(e,2),t=r[0],i=r[1];return(0,o.useEffect)((function(){i(!1);var n=setTimeout((function(){i(!0)}));return function(){clearTimeout(n)}}),[n]),(0,g.jsx)(g.Fragment,{children:t&&(0,g.jsxs)("div",{className:"pe-1 pb-1 opacityAnimation",style:{maxWidth:"1000px",width:"100%"},children:[(0,g.jsx)(j,{}),(0,g.jsx)(V,{})]})})},$=function(){var n=(0,u.v9)((function(n){return n.monthPanel})),e=n.month,r=n.error,t=n.isLoading,i=(0,u.v9)((function(n){return n.listUsers})),o=i.listUsersError,d=i.listUsersIsLoading,s=(0,u.v9)((function(n){return n.listMonths})).listMonthsError,a=(0,h.Z)().monthURLStringFormat;return{requestState:t||d?(0,x.C)((0,g.jsx)(m.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,g.jsx)("span",{className:"visually-hidden",children:"Loading..."})})):r||o||s?(0,x.C)((0,g.jsx)("div",{className:"text-danger text-center fs-4 ",children:"B\u0142\u0105d. Od\u015bwie\u017c stron\u0119"})):e&&""!==(null===e||void 0===e?void 0:e.id)?(0,g.jsx)(Y,{}):(0,x.a)((0,g.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",a,". Zapisz miesi\u0105c w ustawieniach."]}))}},_=r(1793),J=function(){f(),a(),(0,i.Z)();var n=(0,_.v0)();(0,_.Aj)(n,(function(n){if(n)n.uid}));var e=$().requestState;return f(),(0,g.jsxs)(t.Z,{children:[e," "]})}},3940:function(n,e,r){r.d(e,{C:function(){return o},a:function(){return i}});var t=r(184),i=function(n){return(0,t.jsx)("div",{className:"d-flex justify-content-center align-items-center fs-3 text-warning text-center",style:{maxWidth:"1000px",width:"100%",height:"100%"},children:n})},o=function(n){return(0,t.jsx)("div",{className:"fixed-top d-flex justify-content-center align-items-center",style:{width:"100vw",height:"100vh",zIndex:"1060",backgroundColor:"rgba(255,255,255,0.4)"},children:n})}}}]);
//# sourceMappingURL=608.7d87a161.chunk.js.map