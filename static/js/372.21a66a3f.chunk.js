"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[372],{8688:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var a=r(9439),i=r(2791),d=r(7371),l=r(322),t=r(1413),s=r(4165),o=r(5861),u=r(3433),c=r(6355),h=function(e){return null===e||void 0===e?void 0:e.map((function(e){return e.hasOwnProperty("days")?e:(0,t.Z)((0,t.Z)({},e),{},{days:[]})}))},p=r(184),f=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("small",{children:["Imi\u0119:",e.day.userName]}),(0,p.jsx)("small",{children:e.day.date}),(0,p.jsxs)("small",{children:["Godz.: ",e.day.hours]})]})},v=function(e){var n,r=(0,l.X)(),i=(0,a.Z)(r,1)[0],v=(0,l.P2)(void 0),m=v.data,x=(v.error,m&&Object.keys(m).join()),y=m?Object.values(m).flat():[],j=h(y),b=m?(0,u.Z)(j):[],Z=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.map((function(e){return e&&e.days?(0,t.Z)((0,t.Z)({},e),{},{days:e.days.filter((function(e){return e.id!==n}))}):e})),e.next=3,i({id:x,columns:r});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsx)("div",{style:{border:"1px solid black"},children:(0,p.jsx)(d._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id.toString()),index:e.index,children:function(n){return(0,p.jsxs)("div",(0,t.Z)((0,t.Z)((0,t.Z)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[(0,p.jsx)("strong",{children:e.day.content}),(0,p.jsx)(f,{day:e.day}),(0,p.jsx)("button",{onClick:function(){return Z(e.day.id)},children:(0,p.jsx)(c.AMf,{})})]}))}})})},m=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsxs)("h4",{children:[e.column.columnName," "]}),(0,p.jsx)(d.bK,{droppableId:e.column.id,children:function(n,r){var a,i;return(0,p.jsxs)("div",(0,t.Z)((0,t.Z)({},n.droppableProps),{},{ref:n.innerRef,style:{border:"1px solid black",width:"30vw",minHeight:"100vh",height:"fit-content"},children:[e.column.days&&e.column.days.length>0&&(null===(a=e.column)||void 0===a||null===(i=a.days)||void 0===i?void 0:i.map((function(e,n){return(0,p.jsx)(v,{day:e,index:n},crypto.randomUUID())}))),n.placeholder]}))}})]})},x=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:e.name,children:e.label}),(0,p.jsx)("input",{id:e.name,type:e.type,name:e.name,value:e.value,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:e.placeholder,style:{width:50}})]})},y=r(5048),j=r(411),b=function(){var e=(0,y.I0)(),n=(0,y.v9)((function(e){return e.hoursPanel})).numberOfDays,r=(0,l.P2)(void 0),i=r.data,d=(r.error,(0,l.iq)()),t=(0,a.Z)(d,2),u=t[0],c=(t[1],i&&Object.keys(i).join()),h=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(c);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsxs)("header",{children:[(0,p.jsx)(x,{type:"number",name:"numberOfDays",value:n,label:"Godziny w miesi\u0105cu ",placeholder:"Dni",handleChange:function(n){var r=n.target.value;e((0,j.Cp)(r))}}),(0,p.jsx)("button",{onClick:f,children:"Dodaj dni"}),(0,p.jsx)("button",{onClick:h,children:" usu\u0144 wszystko"})]})},Z=function(e){return(0,p.jsxs)("div",{className:e.containerClass,children:[(0,p.jsx)("input",{type:"radio",name:e.name,value:e.value,checked:e.checked,onChange:e.handleChange,className:e.inuptClass,id:e.value}),(0,p.jsx)("label",{htmlFor:e.value,className:e.labelClass,children:(0,p.jsxs)("small",{children:[" ",e.label?e.label:e.value]})})]})},g=r(3728),k=r(5705),z={id:crypto.randomUUID(),date:"",hours:"",userName:"",place:""},w=[{id:"miesiac",columnName:"Miesi\u0105c",days:[]},{id:"oczekuj\u0105ce",columnName:"Oczekuj\u0105ce"},{id:"zatwierdzone",columnName:"Zatwierdzone"}],I=r(6727),C=I.Ry({userName:I.Z_().required("Podaj imi\u0119"),date:I.Z_().required("Podaj dat\u0119"),hours:I.Rx().required("Podaj liczb\u0119 godzin").moreThan(0,"Liczba godzin musi by\u0107 wi\u0119ksza od 0"),place:I.Z_().required("Podaj lokalizacj\u0119")}),P=function(){var e=(0,l.P2)(void 0),n=e.data,r=(e.error,(0,l.l4)()),i=(0,a.Z)(r,2),d=i[0],c=(i[1],(0,l.X)()),p=(0,a.Z)(c,1)[0],f=(0,k.TA)({initialValues:z,validationSchema:C,onSubmit:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(r){var a,i,l,o,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n&&Object.keys(n).join(),l=n?Object.values(n).flat():[],o=h(l),c=n?(0,u.Z)(o):[],f.setFieldValue("id",crypto.randomUUID()),w[0].days=[r],c[0]=n&&(null===l||void 0===l?void 0:l.length)>0&&(0,t.Z)((0,t.Z)({},null===o||void 0===o?void 0:o[0]),{},{days:[].concat((0,u.Z)(null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a.days),[r])}),null!==n){e.next=12;break}return e.next=10,d(w);case 10:e.next=14;break;case 12:return e.next=14,p({id:i,columns:c});case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:f}},O=function(){var e=P().formik;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{onSubmit:e.handleSubmit,style:{marginTop:20},children:[[{type:"text",value:"userName",label:"Imi\u0119"},{type:"date",value:"date",label:"Dzie\u0144"},{type:"number",value:"hours",label:"Godz."}].map((function(n){var r=n.type,a=n.value,i=n.label;return(0,p.jsxs)("div",{children:[(0,p.jsx)(x,{type:r,name:a,value:e.values[a],label:i,placeholder:i,handleChange:e.handleChange,handleBlur:e.handleBlur}),(0,p.jsx)("div",{style:{color:"red"},children:e.touched[a]&&e.errors[a]&&(0,p.jsx)("small",{children:e.errors[a]})})]},a)})),["Wewn\u0105trz","Poza"].map((function(n){return(0,p.jsx)(Z,{value:n,name:"place",handleChange:e.handleChange,checked:e.values.place===n},n)})),(0,p.jsx)("div",{style:{color:"red"},children:e.touched.place&&e.errors.place&&(0,p.jsx)("small",{children:e.errors.place})}),(0,p.jsx)("button",{type:"submit",children:(0,p.jsx)(g.pl2,{})})]})})},N=function(){var e=(0,l.P2)(void 0),n=e.data,r=(e.error,(0,l.iq)()),s=(0,a.Z)(r,2),o=(s[0],s[1],(0,l.X)()),c=(0,a.Z)(o,2),f=c[0],v=(c[1],(0,y.v9)((function(e){return e.hoursPanel})).numberOfDays),x=n&&Object.values(n).flat(),j=h(x),Z=(0,i.useState)([]),g=(0,a.Z)(Z,2),k=g[0],z=g[1],w={id:n&&Object.keys(n).join(),columns:k};return(0,i.useEffect)((function(){z(j)}),[n]),(0,i.useEffect)((function(){f(w)}),[k]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(b,{}),(0,p.jsx)(O,{}),(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsxs)("p",{children:["wszystkie godziny: ",v]}),(0,p.jsx)(d.Z5,{onDragEnd:function(e){return function(e,n,r){var i=e.source,d=e.destination;if(d&&(i.draggableId!==d.droppableId||i.index===d.index))if(i.droppableId!==d.droppableId){var l=n.findIndex((function(e){return e.id===i.droppableId})),s=n.findIndex((function(e){return e.id===d.droppableId})),o=(0,u.Z)(n[l].days),c=i.droppableId!==d.dropableId?(0,u.Z)(n[s].days):o,h=o.splice(i.index,1),p=(0,a.Z)(h,1)[0];c.splice(d.index,0,p);var f=(0,u.Z)(n);f[l]=(0,t.Z)((0,t.Z)({},n[l]),{},{days:o}),f[s]=(0,t.Z)((0,t.Z)({},n[s]),{},{days:c}),r(f)}else{var v=d.index,m=n.findIndex((function(e){return e.id===i.droppableId})),x=(0,u.Z)(n[m].days),y=x.splice(i.index,1),j=(0,a.Z)(y,1)[0];x.splice(v,0,j);var b=(0,u.Z)(n);b[m]=(0,t.Z)((0,t.Z)({},n[m]),{},{days:x}),r(b)}}(e,k,z)},children:k&&k.length>0&&k.map((function(e,n){return(0,p.jsx)(m,{column:e},e.id)}))})]})]})}}}]);
//# sourceMappingURL=372.21a66a3f.chunk.js.map