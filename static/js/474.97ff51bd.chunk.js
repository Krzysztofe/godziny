"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[474],{5474:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var a=r(9439),o=r(7689),t=r(4165),s=r(1413),i=r(3433),d=r(5861),l=r(5705),u=r(6712),c={id:crypto.randomUUID(),date:"",hours:"",userName:"",place:""},m=r(8007),h=m.Ry({userName:m.Z_().required("Podaj imi\u0119"),date:m.Z_().required("Podaj dat\u0119"),hours:m.Rx().required("Podaj liczb\u0119 z\u0142o\u017conych godzin").max(10,"Nie wi\u0119cej ni\u017c 10"),place:m.Z_().required("Podaj lokalizacj\u0119")}),p=r(322),v=function(){var e=(0,p.X)(),n=(0,a.Z)(e,2),r=n[0],m=n[1],v=(0,o.TH)().pathname.split("/"),f=v[v.length-1],x=((0,o.UO)().monthURL,(0,u.Z)(f)),Z=x.databaseColumns,j=x.databaseMonth,y=x.data,b=x.dataCurrentHours,g=(0,l.TA)({initialValues:c,validationSchema:h,onSubmit:function(){var e=(0,d.Z)((0,t.Z)().mark((function e(n){var a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.setFieldValue("id",crypto.randomUUID()),!(b-+g.values.hours<0)){e.next=3;break}return e.abrupt("return");case 3:return(o=y&&j&&(null===Z||void 0===Z?void 0:Z.length)>0?(0,i.Z)(Z):[])[0]=y&&j&&(null===Z||void 0===Z?void 0:Z.length)>0&&(0,s.Z)((0,s.Z)({},null===Z||void 0===Z?void 0:Z[0]),{},{days:[].concat((0,i.Z)(null===Z||void 0===Z||null===(a=Z[0])||void 0===a?void 0:a.days),[(0,s.Z)((0,s.Z)({},n),{},{hours:+n.hours})])}),e.next=7,r({id:y&&j.id,columns:(0,s.Z)((0,s.Z)({},j),{},{columns:o})});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:g,success:m}},f=r(4849),x=r(3360),Z=r(3027),j=r(184),y=function(){(0,o.UO)().monthURL;var e=v(),n=e.formik,r=e.success,a=(0,o.TH)().pathname.split("/"),t=a[a.length-1],s=(0,u.Z)(t),i=s.dataCurrentHours,d=s.databaseAllHours,l=(0,j.jsx)("span",{children:"Zatwierd\u017a dzie\u0144"});return r.isLoading&&(l=(0,j.jsx)(f.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(l=(0,j.jsx)("span",{children:' "B\u0142\u0105d" '})),0===d&&(l=(0,j.jsx)("span",{style:{color:"red"},children:" Podaj godziny"})),i-+n.values.hours<0&&(l=(0,j.jsx)("span",{style:{color:"red"},children:"Brak godzin "})),(0,j.jsxs)(Z.Z,{onSubmit:n.handleSubmit,className:"mt-4",children:[(0,j.jsxs)(Z.Z.Select,{name:"userName",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"rounded-0",children:[(0,j.jsx)("option",{children:"Imi\u0119"}),["Jan","Maria","Mariola"].map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))]}),(0,j.jsx)(Z.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0",style:{fontSize:"0.7rem",height:"1rem"},children:n.touched.userName&&n.errors.userName&&n.errors.userName}),(0,j.jsxs)(Z.Z.Group,{className:"",children:[(0,j.jsx)(Z.Z.Control,{id:"date",type:"date",name:"date",value:n.values.date,onChange:n.handleChange,onBlur:n.handleBlur,min:1,placeholder:"Liczba",size:"sm",className:"rounded-0"}),(0,j.jsx)(Z.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0",style:{fontSize:"0.7rem",height:"1rem"},children:n.touched.date&&n.errors.date&&n.errors.date})]}),(0,j.jsxs)(Z.Z.Select,{name:"hours",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"rounded-0",children:[(0,j.jsx)("option",{children:"Liczba godzin "}),[1,2,3,4,5,6,7,8,9,10].map((function(e){return(0,j.jsx)("option",{value:+e,children:e},e)}))]}),(0,j.jsx)(Z.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0",style:{fontSize:"0.7rem",height:"1rem"},children:n.touched.hours&&n.errors.hours&&n.errors.hours}),(0,j.jsxs)(Z.Z.Select,{name:"place",onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"rounded-0",children:[(0,j.jsx)("option",{children:"Lokalizacja"}),(0,j.jsx)("option",{value:"Wewn\u0105trz",children:"Wewn\u0105trz"}),(0,j.jsx)("option",{value:"Poza",children:"Poza"})]}),(0,j.jsx)(Z.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0",style:{fontSize:"0.7rem",height:"1rem"},children:n.touched.place&&n.errors.place&&n.errors.place}),(0,j.jsx)("div",{className:"d-grid",children:(0,j.jsx)(x.Z,{variant:"secondary",type:"submit",className:"rounded-0 fw-medium",children:l})})]})},b=r(2791),g=r(3728),z=(crypto.randomUUID(),{id:"",month:"",allHours:0,currentHours:0,submitedHours:0,acceptedHours:0,rejectedHours:0,columns:[{id:"miesiac",columnName:"Miesi\u0105c",days:[]},{id:"oczekuj\u0105ce",columnName:"Oczekuj\u0105ce",days:[null]},{id:"zatwierdzone",columnName:"Zatwierdzone",days:[null]}]}),N=function(){var e=(0,p.Su)(),n=(0,a.Z)(e,2),r=n[0],o=n[1],i=new Date,u=new Intl.DateTimeFormat("pl",{year:"numeric"}).format(i),c=new Intl.DateTimeFormat("pl",{month:"2-digit"}).format(i),m=(0,l.TA)({initialValues:{monthYear:"".concat(u,"-").concat(c)},onSubmit:function(){var e=(0,d.Z)((0,t.Z)().mark((function e(n){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,s.Z)((0,s.Z)({},z),{},{month:n.monthYear}),e.next=3,r(a);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:m,success:o}},k=function(){var e=N(),n=e.formik,r=e.success,a=(0,j.jsx)(g.pl2,{});return r.isLoading&&(a=(0,j.jsx)(f.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(a=(0,j.jsx)("span",{children:' "B\u0142\u0105d" '})),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Z.Z,{onSubmit:n.handleSubmit,className:"",children:(0,j.jsxs)(Z.Z.Group,{className:"d-flex",children:[(0,j.jsx)(Z.Z.Control,{type:"month",name:"monthYear",min:"2023-06",max:"2025-12",value:n.values.monthYear,onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"rounded-0"}),(0,j.jsx)(x.Z,{type:"submit",variant:"secondary",className:"rounded-0",size:"sm",children:a})]})})})},H=r(3200),I=r(3787),w=r(8014),C=r(23),S=r(1087),B=function(){var e=(0,p.P2)(void 0).data,n=(0,o.UO)().monthURL,r=(0,u.Z)(n).databaseMonthsCollection,a=e&&r?r.map((function(e){return e.month})).sort((function(e,n){return e<n?-1:e>n?1:0})):[],t=e&&(null===a||void 0===a?void 0:a.map((function(n){var r=e&&a&&new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)})));return(0,j.jsx)("div",{className:"monthListContainer",children:void 0===e||null===e?(0,j.jsx)("p",{className:"py-1 px-2",children:"Brak danych"}):t.map((function(e,n){return(0,j.jsx)(C.Z,{children:(0,j.jsx)(C.Z.Item,{className:"border-0 p-0 px-1 ",children:(0,j.jsx)(S.rU,{to:"/miesiac/".concat(a[n]),style:{textDecoration:"none",color:"black"},children:e},e)})},e)}))})},T=function(){var e=(0,o.s0)(),n=(0,o.TH)().pathname,r=(0,b.useState)(!1),t=(0,a.Z)(r,2),s=t[0],i=t[1];return(0,j.jsx)(j.Fragment,{children:["/"].includes(n)?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x.Z,{variant:"primary",onClick:function(){return i((function(e){return!e}))},className:"me-2",style:{position:"absolute",right:0},children:(0,j.jsx)(w.vHB,{})}),(0,j.jsxs)(I.Z,{show:s,onHide:function(){return i(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"w-20",style:{width:200},children:[(0,j.jsx)(I.Z.Header,{className:"pb-0",children:(0,j.jsx)(I.Z.Title,{children:(0,j.jsx)("div",{onClick:function(){H.I.signOut(),e("/")},className:"fs-6 ",style:{cursor:"pointer"},children:"Wyloguj"})})}),(0,j.jsxs)(I.Z.Body,{children:[(0,j.jsx)(k,{}),(0,j.jsx)(B,{}),(0,j.jsx)(y,{})]})]})]})})}},3200:function(e,n,r){r.d(n,{I:function(){return s}});var a=r(4702),o=r(1793),t=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,o.v0)(t)},6712:function(e,n,r){var a=r(1413),o=r(322),t=r(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,o.P2)(void 0).data,r=n&&Object.keys(n),s=r&&Object.values(n).flat().map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{id:r[n]})})),i=(0,t.nr)(s),d=n&&i.length>0?null===i||void 0===i?void 0:i.find((function(n){return n.month===e})):void 0,l=n&&(null===d||void 0===d?void 0:d.columns),u=n?null===d||void 0===d?void 0:d.allHours:"",c=n?null===d||void 0===d?void 0:d.currentHours:"",m=n?null===d||void 0===d?void 0:d.submitedHours:"",h=n?null===d||void 0===d?void 0:d.acceptedHours:"",p=n?null===d||void 0===d?void 0:d.rejectedHours:"",v=n&&i.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[0].days.reduce((function(e,n){return e+n.hours}),0):0,f=n&&i.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[1].days.reduce((function(e,n){return e+n.hours}),0):0,x=n&&i.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[2].days.reduce((function(e,n){return e+n.hours}),0):0,Z=n&&i?i.map((function(e){return e.month})):[];return{string:Z.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),data:n,databaseMonthsId:r,databaseMonthsCollection:i,databaseMonth:d,databaseColumns:l,databaseAllHours:u,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:p,dataBaseSubmitedHours:m,acceptedHoursSum:f,rejectedHoursSum:x,submitedHoursSum:v,databaseMonthsDates:Z}}},3572:function(e,n,r){r.d(n,{nr:function(){return s},qs:function(){return i}});var a=r(9439),o=r(3433),t=r(1413),s=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,r;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,t.Z)((0,t.Z)({},e),{},{columns:null===e||void 0===e||null===(r=e.columns)||void 0===r?void 0:r.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{days:e.days||[]})}))})})):[]},i=function(e,n,r){var s=e.source,i=e.destination;if(i&&(s.draggableId!==i.droppableId||s.index===i.index))if(s.droppableId!==i.droppableId){var d=n.findIndex((function(e){return e.id===s.droppableId})),l=n.findIndex((function(e){return e.id===i.droppableId})),u=(0,o.Z)(n[d].days),c=s.droppableId!==i.dropableId?(0,o.Z)(n[l].days):u,m=u.splice(s.index,1),h=(0,a.Z)(m,1)[0];c.splice(i.index,0,h);var p=(0,o.Z)(n);p[d]=(0,t.Z)((0,t.Z)({},n[d]),{},{days:u}),p[l]=(0,t.Z)((0,t.Z)({},n[l]),{},{days:c}),r(p)}else{var v=i.index,f=n.findIndex((function(e){return e.id===s.droppableId})),x=(0,o.Z)(n[f].days),Z=x.splice(s.index,1),j=(0,a.Z)(Z,1)[0];x.splice(v,0,j);var y=(0,o.Z)(n);y[f]=(0,t.Z)((0,t.Z)({},n[f]),{},{days:x}),r(y)}}}}]);
//# sourceMappingURL=474.97ff51bd.chunk.js.map