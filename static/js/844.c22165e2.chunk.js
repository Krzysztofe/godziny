"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[844],{1844:function(n,e,t){t.r(e),t.d(e,{default:function(){return q}});var a=t(9439),r=(t(2685),t(2791)),o=t(3360),i=t(7732),s=t(8820),c=t(8014),l=t(7689),u=t(1087),d=t(4849),m=t(3200),h=t(2767),f=t(184),v=function(){var n=(0,l.s0)(),e=(0,r.useState)(!1),t=(0,a.Z)(e,2),i=t[0],s=t[1];console.log("ooo");var c=(0,f.jsx)("div",{className:"text-start w-100",children:"Wyloguj"});return i&&(c=(0,f.jsx)(d.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),(0,f.jsx)(o.Z,{onClick:function(){s(!0),m.I8.signOut().then((function(){n("/")})).catch((function(n){return(0,h.Z)(n)})).finally((function(){s(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:i,children:c})},x=t(3855),p=t(5048),g=t(9662),b=t(1100),j=t(6021),Z=function(){var n=(0,j.xY)().data,e=n||[],t=null===e||void 0===e?void 0:e.map((function(n){return n.userName}));return{dataSelects:[{name:"userName",firstOption:"".concat(0===t.length?"Zapisz w ustawieniach":"Imi\u0119"),labelText:"Podaj imi\u0119",options:t},{name:"hours",firstOption:"Liczba godzin",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}]}},y=t(4165),w=t(3433),N=t(1413),z=t(5861),k=t(5705),L=t(9065),S=t(7615),C=t(8007),H=C.Ry({userName:C.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(n){return"Imi\u0119"!==n})).required("Imi\u0119 wymagane"),hours:C.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(n){return"Liczba godzin"!==n})).required("Liczba godzin wymagana"),place:C.Z_().test("is-place-valid","Lokalizacja wymagana",(function(n){return"Lokalizacja"!==n})).required("Lokalizacja wymagana")}),D=function(){var n,e=(0,L.Z)(),t=e.yearFromURL,r=e.monthFromURL,o=(0,p.v9)((function(n){return n.monthsPanel})).month,i=(0,p.v9)((function(n){return n.users})).users,s=(0,S.Og)(),c=(0,a.Z)(s,2),l=c[0],u=c[1],d=o&&(null===o||void 0===o||null===(n=o.columns)||void 0===n?void 0:n[0]),m=(0,k.TA)({initialValues:{id:"",date:g.nt,hours:"",userName:"Imi\u0119",place:"",userColor:""},validationSchema:H,onSubmit:function(){var n=(0,z.Z)((0,y.Z)().mark((function n(e){var a,s,c,u,m;return(0,y.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===o||void 0===o||null===(a=o.calc)||void 0===a?void 0:a.currentHours)-+e.hours<0||0===(null===o||void 0===o||null===(s=o.calc)||void 0===s?void 0:s.currentHours))){n.next=2;break}return n.abrupt("return");case 2:return u=null===i||void 0===i||null===(c=i.find((function(n){return n.userName===e.userName})))||void 0===c?void 0:c.userColor,m=(0,N.Z)((0,N.Z)({},e),{},{id:crypto.randomUUID(),hours:+e.hours,userColor:u||""}),n.next=6,l({year:t,month:r,firstColumnBody:(0,N.Z)((0,N.Z)({},d),{},{days:null!==d&&void 0!==d&&d.days?[].concat((0,w.Z)(d.days),[m]):[m]})});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:m,success:u}},B=function(){var n,e,t=(0,p.v9)((function(n){return n.monthsPanel})).month,a=Z().dataSelects,r=D(),i=r.formik,s=r.success,c=(0,b.Z)(s,"Dodaj dzie\u0144").btnContent,l=(0,L.Z)().isMonthInURL,u=null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.allHours,d=null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.currentHours;return(0,f.jsxs)(x.Z,{onSubmit:i.handleSubmit,className:"mt-2 ".concat(t&&l?"":"d-none"," ").concat(0===u?"formContainer":""),children:[a.map((function(n){var e=n.name,t=n.firstOption,a=n.labelText,r=n.options;return(0,f.jsxs)(x.Z.Group,{children:[(0,f.jsx)(x.Z.Label,{htmlFor:e,className:"mb-0 fs-7",children:a}),(0,f.jsxs)(x.Z.Select,{id:e,name:e,onChange:i.handleChange,onBlur:i.handleBlur,size:"sm",className:"p-0 px-1 border border-primary ".concat("Zapisz w ustawieniach"===t?"text-danger":""),style:{cursor:"pointer"},children:[(0,f.jsx)("option",{children:t}),null===r||void 0===r?void 0:r.map((function(n){return(0,f.jsx)("option",{value:n,children:n},n)}))]}),(0,f.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:i.touched[e]&&i.errors[e]&&i.errors[e]})]},a)})),(0,f.jsxs)(x.Z.Group,{children:[(0,f.jsx)(x.Z.Label,{htmlFor:"date",className:"mb-0 fs-7",children:"Podaj dzie\u0144"}),(0,f.jsx)(x.Z.Control,{id:"date",type:"date",name:"date",value:i.values.date,onChange:i.handleChange,onBlur:i.handleBlur,min:g.nt,max:g.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,f.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:i.touched.date&&i.errors.date&&i.errors.date})]}),(0,f.jsx)(o.Z,{type:"submit",disabled:s.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:c}),(0,f.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:d-+i.values.hours<0||0===d?"Brak dost\u0119pnych godzin":""})]})},F=t(9288),U=t(1362),R=t(8841),T=function(){var n=(0,p.I0)(),e=(0,L.Z)(),t=e.yearFromURL,a=e.monthFromURL,o=(0,S.a6)({year:t,month:a}),i=o.data,s=o.error,c=o.isLoading,l=(0,j.xY)(),u=l.data,d=l.error,m=l.isLoading,h=(0,S.yv)(),f=h.data,v=h.error,x=h.isLoading;return(0,r.useEffect)((function(){n((0,F.jw)(i)),n((0,F.MP)(s)),n((0,F.ed)(c))}),[i,s,c,n]),(0,r.useEffect)((function(){n((0,U.Rf)(u)),n((0,U.E7)(d)),n((0,U.$$)(m))}),[u,d,m,n]),(0,r.useEffect)((function(){n((0,R.rn)(f)),n((0,R.K9)(v)),n((0,R.MT)(x))}),[f,v,x,n]),{}},I=t(7923),E=(t(5293),t(7858)),P=t(6856),M=function(){var n,e,t=(0,L.Z)(),r=t.yearFromURL,o=t.monthFromURL,i=(0,p.v9)((function(n){return n.monthsPanel})).month,s=(0,S.uZ)(),c=(0,a.Z)(s,2),l=c[0],u=c[1],d=null===i||void 0===i||null===(n=i.calc)||void 0===n?void 0:n.submittedHours,m=null===i||void 0===i||null===(e=i.calc)||void 0===e?void 0:e.acceptedHours,h=(0,k.TA)({initialValues:{allHours:0},onSubmit:function(){var n=(0,z.Z)((0,y.Z)().mark((function n(e){return(0,y.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(d+m>+h.values.allHours)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l({year:r,month:o,allHours:+e.allHours});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:h,success:u}},A=function(){var n=M(),e=n.formik,t=n.success,a=(0,b.Z)(t,"Dodaj godziny").btnContent,r=(0,p.v9)((function(n){return n.monthsPanel})).month,i=null===r||void 0===r?void 0:r.calc.submittedHours,s=null===r||void 0===r?void 0:r.calc.acceptedHours,c=e.values.allHours/3.2,l="linear-gradient(to right, rgba(180,120,255) ".concat(c,"%, rgba(180,180,255) ").concat(c,"%)");return(0,f.jsxs)(x.Z,{onSubmit:e.handleSubmit,className:"",children:[(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(x.Z.Control,{type:"number",name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:"Liczba",size:"sm",className:"p-0 px-1 mb-2 border border-primary",style:{minHeight:0,cursor:"pointer",width:"fit-content"}}),(0,f.jsx)("span",{children:" \xa0 h"})]}),(0,f.jsx)(x.Z.Group,{className:"mt-2 d-flex align-items-center w-100",children:(0,f.jsx)(x.Z.Range,{name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,className:"form-range custom-range medium",style:{height:10,background:l}})}),(0,f.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,f.jsx)("div",{className:"fw-medium",children:"0 h"}),(0,f.jsx)("div",{className:"text-danger  mt-auto fs-8",children:i+s>+e.values.allHours?"Min. ".concat(i+s," h"):""}),(0,f.jsx)("div",{className:"fw-medium",children:"320 h"})]}),(0,f.jsx)(o.Z,{type:"submit",variant:"info",size:"sm",className:"fw-medium w-100",disabled:t.isLoading,children:a})]})},O=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(o.Z,{onClick:function(){return i(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 bg-info text-white",children:["Dodaj godziny",(0,f.jsx)(P.x3N,{className:"fs-5 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,f.jsx)(E.Z,{in:t,children:(0,f.jsx)("div",{className:"bg-white p-0",children:(0,f.jsx)(A,{})})})]})},W={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},G=function(){var n=(0,p.v9)((function(n){return n.infoMonths})).infoMonths;return{validationSchema:C.Ry({monthDate:C.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==n&&void 0!==n&&n.includes(e))}))})}},Y=function(){var n=(0,l.s0)(),e=(0,S.CB)(),t=(0,a.Z)(e,2),o=t[0],i=t[1],s=(0,S.kM)(),c=(0,a.Z)(s,1)[0],u=(0,S.bw)(),d=(0,a.Z)(u,1)[0],m=(0,p.v9)((function(n){return n.infoMonths})).infoMonths,f=G().validationSchema,v=(0,r.useState)(!1),x=(0,a.Z)(v,2),b=x[0],j=x[1],Z=(0,k.TA)({initialValues:{monthDate:"".concat(g.j0,"-").concat(g.vs)},validationSchema:f,onSubmit:function(){var n=(0,z.Z)((0,y.Z)().mark((function n(e){var t,a,r;return(0,y.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.monthDate.slice(0,4),a=e.monthDate.slice(-2),r=(0,N.Z)((0,N.Z)({},W),{},{id:e.monthDate}),n.next=5,o({year:t,month:a,monthBody:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,r.useEffect)((function(){i.isSuccess?j(!0):j(!1)}),[i.isSuccess]),(0,r.useEffect)((function(){var e=function(){var e=(0,z.Z)((0,y.Z)().mark((function e(){var t,a,r,o,s;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=9;break}return t=Z.values.monthDate.slice(0,4),a=Z.values.monthDate.slice(-2),r=m||[],e.next=6,c([].concat((0,w.Z)(r),["".concat(t,"-").concat(a)]));case 6:n("/".concat(Z.values.monthDate)),e.next=15;break;case 9:if(!i.isError){e.next=15;break}return o=Z.values.monthDate.slice(0,4),s=Z.values.monthDate.slice(-2),e.next=14,d({year:o,month:s});case 14:(0,h.Z)("");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[b,c]),{formik:Z,success:i}},$=function(){var n=Y(),e=n.formik,t=n.success,a=(0,b.Z)(t,(0,f.jsx)(s.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(x.Z,{onSubmit:e.handleSubmit,className:"mt-1",children:[(0,f.jsxs)(x.Z.Group,{children:[(0,f.jsx)(x.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-7",children:"Podaj miesi\u0105c"}),(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(x.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(g.j0,"-").concat(g.vs),max:"2025-12",value:e.values.monthDate,onChange:e.handleChange,onBlur:e.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,f.jsx)(o.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:a})]})]}),(0,f.jsx)(x.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:e.touched.monthDate&&e.errors.monthDate&&e.errors.monthDate})]})})},_=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(o.Z,{onClick:function(){return i(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 bg-info text-white",children:["Dodaj miesi\u0105c",(0,f.jsx)(P.x3N,{className:"fs-4 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,f.jsx)(E.Z,{in:t,children:(0,f.jsx)("div",{className:"bg-white p-0",children:(0,f.jsx)($,{})})})]})},q=function(){T();var n=(0,l.TH)().pathname,e=(0,r.useState)(!1),t=(0,a.Z)(e,2),d=t[0],m=t[1],h=(0,r.useState)(window.innerWidth),x=(0,a.Z)(h,2),p=x[0],g=x[1];(0,r.useEffect)((function(){var n=function(){g(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),(0,r.useEffect)((function(){p>575&&m(!0)}),[p]);var b="100%";return p>575&&(b="35%"),p>766&&(b="25%"),(0,f.jsx)(f.Fragment,{children:["/"].includes(n)?null:(0,f.jsxs)("aside",{children:[(0,f.jsx)(o.Z,{variant:"info",onClick:function(){return m((function(n){return!n}))},className:"me-2 p-2 mt-1  ".concat(p>575?"d-none":"d-block"),style:{position:"absolute",right:0,borderRadius:"50%"},children:(0,f.jsx)(c.vHB,{className:"fs-1"})}),(0,f.jsxs)(i.Z,{show:d,onHide:function(){return m(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"".concat(p<575&&"backgroundImage"),style:{width:b,backgroundColor:p>575&&"rgba(255, 255, 255, 0.4)"},children:[(0,f.jsx)(i.Z.Header,{closeButton:p<575,className:"pb-0",children:(0,f.jsx)(v,{})}),(0,f.jsxs)(i.Z.Body,{className:"flex-grow-0 m-1 bg-white rounded",children:[(0,f.jsx)(_,{}),(0,f.jsx)(O,{}),p<575?(0,f.jsx)(I.Z,{}):null,(0,f.jsx)(B,{})]}),(0,f.jsxs)(u.rU,{to:"/ustawienia",className:"text-info mt-auto fw-medium text-decoration-none ",children:[(0,f.jsx)(s.QAE,{})," Ustawienia"]})]})]})})}},9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return l},st:function(){return u},vs:function(){return c},xk:function(){return d}});var a=new Date,r=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(a)},o=new Date(a.getTime()+12096e5),i=new Date(a.getTime()+5184e6),s=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),l=(String(a.getDate()).padStart(2,"0"),r(a),r(o)),u=r(i),d=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},3200:function(n,e,t){t.d(e,{I8:function(){return s}});var a=t(4702),r=t(1793),o=t(2685),i=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,r.v0)(i);(0,o.N8)(i)},1100:function(n,e,t){var a=t(1830),r=t.n(a),o=t(2791),i=t(4849),s=t(184);e.Z=function(n,e){(0,o.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;r().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(i.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},3234:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.UO)().monthURL;if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},7923:function(n,e,t){var a=t(5048),r=t(3234),o=t(184);e.Z=function(){var n,e,t,i,s,c=(0,a.v9)((function(n){return n.monthsPanel})).month,l=(0,r.Z)().monthURLStringFormat;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:" d-flex justify-content-center my-2 fw-medium position-relative",children:[(0,o.jsx)("div",{className:"text-capitalize fw-medium d-none d-md-block  position-absolute end-0",children:l}),(0,o.jsx)("div",{className:"col-3 text-end",children:"Wszystkie"}),(0,o.jsxs)("div",{className:"mx-2",children:[null===c||void 0===c||null===(n=c.calc)||void 0===n?void 0:n.allHours," -"," ",(0,o.jsx)("span",{className:"".concat((null===c||void 0===c||null===(e=c.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===c||void 0===c||null===(t=c.calc)||void 0===t?void 0:t.currentHours})]}),(0,o.jsx)("div",{className:"col-3 ".concat((null===c||void 0===c||null===(i=c.calc)||void 0===i?void 0:i.currentHours)<=0?"text-danger":""),children:(null===c||void 0===c||null===(s=c.calc)||void 0===s?void 0:s.currentHours)<0?"Brak":"Dost\u0119pne"})]})})}},2767:function(n,e,t){t.d(e,{Z:function(){return i},p:function(){return o}});var a=t(1830),r=t.n(a),o=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},i=function(n){r().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},5293:function(){}}]);
//# sourceMappingURL=844.c22165e2.chunk.js.map