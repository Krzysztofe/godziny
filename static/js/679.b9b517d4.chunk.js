"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[679],{9662:function(n,e,t){t.d(e,{j0:function(){return l},nt:function(){return d},st:function(){return s},vs:function(){return c},xk:function(){return u}});var r=new Date,o=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(r)},i=new Date(r.getTime()+12096e5),a=new Date(r.getTime()+5184e6),l=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),d=(String(r.getDate()).padStart(2,"0"),o(r),o(i)),s=o(a),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},1100:function(n,e,t){var r=t(1830),o=t.n(r),i=t(2791),a=t(4849),l=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;o().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,l.jsx)(a.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(3433),o=t(5048);e.Z=function(){var n,e=(0,o.v9)((function(n){return n.infoMonths})).infoMonths,t=e&&(null===(n=(0,r.Z)(e))||void 0===n?void 0:n.sort((function(n,e){return new Date(n).getTime()-new Date(e).getTime()}))),i=null===t||void 0===t?void 0:t.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)}));return{sortedInfoMonths:t,databaseMonthsDatesToString:i}}},3234:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.slice(1);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,t){var r=t(9439),o=t(2791);e.Z=function(){var n=(0,o.useState)(window.innerWidth),e=(0,r.Z)(n,2),t=e[0],i=e[1];return(0,o.useEffect)((function(){var n=function(){i(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:t}}},4679:function(n,e,t){t.r(e),t.d(e,{default:function(){return _}});var r=t(7022),o=(t(2740),t(4849)),i=t(9743),a=t(5048),l=t(9662),c=t(1419),d=t(3360),s=t(7858),u=t(23),m=t(1087),v=t(2218),f=t(9065),h=t(184),x=function(){var n=(0,v.Z)(),e=n.sortedInfoMonths,t=n.databaseMonthsDatesToString,r=(0,a.v9)((function(n){return n.infoMonths})).infoMonths,o=(0,f.Z)(),i=o.monthURL,l=o.isMonthInURL?new Date(i):null,c=l&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(l);return(0,h.jsx)(u.Z,{className:"monthListContainer text-center fw-medium border border-white text-capitalize",children:r&&0!==r.length?null===t||void 0===t?void 0:t.map((function(n,t){return(0,h.jsx)(u.Z.Item,{className:"border-0 p-0 px-1",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:(0,h.jsx)(m.rU,{to:"/".concat(null===e||void 0===e?void 0:e[t]),className:"".concat(c===n&&c?"text-white":"text-dark"," text-decoration-none"),children:n})},n)})):(0,h.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},p=t(6856),g=t(3234),y=t(8673),b=function(){var n=(0,a.I0)(),e=(0,a.v9)((function(n){return n.monthsListCollapse})).isOpenCollapseMonths,t=(0,g.Z)().monthURLStringFormat;return(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)(d.Z,{onClick:function(){return n((0,y.nP)())},"aria-controls":"example-collapse-text","aria-expanded":e,size:"sm",className:"mx-auto text-capitalize bg-transparent text-start fw-medium d-flex justify-content-between align-items-center border-0",children:[t,(0,h.jsx)(p.x3N,{className:"fs-3",style:{transform:"".concat(e?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,h.jsx)(s.Z,{in:e,children:(0,h.jsx)("div",{children:(0,h.jsx)(x,{})})})]})},Z=t(1413),j=t(9439),w=t(2791),N=t(793),I=t(7762),k=t(3433),L=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,Z.Z)((0,Z.Z)({},n),{},{days:[]})})):[]},C=function(){var n,e=(0,a.v9)((function(n){return n.monthsPanel})).month,t=0,r=0,o=0,i=L(null===e||void 0===e?void 0:e.columns),l=(0,I.Z)(i);try{for(l.s();!(n=l.n()).done;){var c=n.value,d=(c.days||[]).reduce((function(n,e){var t;return n+(null!==(t=null===e||void 0===e?void 0:e.hours)&&void 0!==t?t:0)}),0);switch(c.id){case"submitted":t=d;break;case"accepted":r=d;break;case"rejected":o=d}}}catch(s){l.e(s)}finally{l.f()}return{submittedHoursSum:t,acceptedHoursSum:r,rejectedHoursSum:o}},D=t(7615),S=t(2677),T=t(4165),H=t(5861),z=t(7425),P=t(1830),F=t.n(P),U=t(1100),R=t(2767),B=t(1578),M=function(n){var e,t;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var r,o,i=new Date(n.day.date);return t=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(i),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,h.jsx)("div",{children:null===(r=n.day)||void 0===r?void 0:r.userName}),(0,h.jsx)("div",{children:"Poza"===(null===(o=n.day)||void 0===o?void 0:o.place)?(0,h.jsx)(B.ols,{style:{color:"rgb(80,173,150)"}}):(0,h.jsx)(p.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,h.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,h.jsx)("div",{children:t||""})})]})}return(0,h.jsx)("div",{children:"Brak danych"})},E=function(n){var e,t=(0,f.Z)(),r=t.yearFromURL,o=t.monthFromURL,i=(0,a.v9)((function(n){return n.monthsPanel})).month,l=(0,D.ur)(),c=(0,j.Z)(l,2),s=c[0],u=c[1],m=(0,U.Z)(u,(0,h.jsx)(z.GnT,{className:"text-danger"})).btnContent,v=function(){var e=(0,H.Z)((0,T.Z)().mark((function e(t,a){return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F().fire((0,R.p)("Usun\u0105\u0107 dzie\u0144")).then(function(){var e=(0,H.Z)((0,T.Z)().mark((function e(l){var c,d,u;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.isConfirmed){e.next=4;break}return u=null===i||void 0===i||null===(c=i.columns[t])||void 0===c||null===(d=c.days)||void 0===d?void 0:d.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==a})),e.next=4,s({year:r,month:o,colIdx:n.columnIdx,daysBody:u||[]});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,h.jsx)(N._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,t){var r,o;return(0,h.jsx)("div",(0,Z.Z)((0,Z.Z)((0,Z.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(t.isDragging?"border-dark":"border-dark-subtle"," "),children:(0,h.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(r=n.day)||void 0===r?void 0:r.userColor),opacity:t.isDragging?.8:1},children:[(0,h.jsx)(M,{day:n.day}),(0,h.jsxs)(d.Z,{onClick:function(){return v(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:u.isLoading,children:[(0,h.jsxs)("div",{children:[null===(o=n.day)||void 0===o?void 0:o.hours," h"]}),(0,h.jsx)("div",{className:"",children:m})]})]})}))}})},W=t(4261),O=function(n){return(0,h.jsx)(S.Z,{children:(0,h.jsx)(N.bK,{droppableId:n.column.id,children:function(e,t){return(0,h.jsxs)("div",(0,Z.Z)((0,Z.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 overflow-hidden border border-1",style:{backgroundColor:t.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)"},children:[Array.isArray(n.column.days)?n.column.days.map((function(e,t){return(0,h.jsx)(E,{day:e,columnIdx:n.columnIdx,dayIdx:t},(0,W.Z)())})):[],e.placeholder]}))}})})},A=function(n){var e,t,r,o=(0,a.v9)((function(n){return n.monthsPanel})).month;return(0,h.jsx)(h.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===o||void 0===o||null===(t=o.calc)||void 0===t?void 0:t.acceptedHours},{headerText:"Odrzucone:",counter:null===o||void 0===o||null===(r=o.calc)||void 0===r?void 0:r.rejectedHours}].map((function(e){var t=e.headerText,r=e.counter;return(0,h.jsxs)(S.Z,{className:"text-dark-emphasis bg-white fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-white":"border-bottom border-2 border-dark-subtle"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[t," ","",r]},t)}))})},Y=function(){var n=(0,w.useRef)(null),e=(0,w.useState)(0),t=(0,j.Z)(e,2),r=t[0],o=t[1];return{scrollableRef:n,thumbPosition:r,handleScroll:function(){var e=n.current;if(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;o(t/(r-i)*100)}}}},$=function(){var n=(0,f.Z)(),e=n.yearFromURL,t=n.monthFromURL,r=(0,D.CB)(),o=(0,j.Z)(r,1)[0],i=C(),l=i.submittedHoursSum,c=i.acceptedHoursSum,d=i.rejectedHoursSum,s=Y(),u=s.scrollableRef,m=s.thumbPosition,v=s.handleScroll,x=(0,a.v9)((function(n){return n.monthsPanel})).month,p=L(null===x||void 0===x?void 0:x.columns),g=(0,w.useState)([]),y=(0,j.Z)(g,2),b=y[0],I=y[1];(0,w.useEffect)((function(){I(p)}),[x]),(0,w.useEffect)((function(){var n,r;b.length>0&&o({year:e,month:t,monthBody:(0,Z.Z)((0,Z.Z)({},x),{},{columns:b,calc:(0,Z.Z)((0,Z.Z)({},null===x||void 0===x?void 0:x.calc),{},{currentHours:(null!==(n=null===x||void 0===x||null===(r=x.calc)||void 0===r?void 0:r.allHours)&&void 0!==n?n:0)-l-c-d+d,submittedHours:l,acceptedHours:c,rejectedHours:d})})})}),[b]);var S="d-flex column-gap-1";return(0,h.jsxs)("div",{ref:u,onScroll:v,className:"p-0 overflow-y-scroll",style:{height:"fit-content",maxHeight:"100%"},children:[(0,h.jsx)("div",{className:"".concat(S," sticky-top"),children:(0,h.jsx)(A,{thumbPosition:m})}),(0,h.jsx)("div",{className:"".concat(S),children:(0,h.jsx)(N.Z5,{onDragEnd:function(n){!function(n,e,t){var r=n.source,o=n.destination;if(o&&(r.draggableId!==o.droppableId||r.index===o.index))if(r.droppableId!==o.droppableId){var i=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===r.droppableId})),a=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===o.droppableId})),l=e&&(0,k.Z)(e[i].days),c=r.droppableId!==o.dropableId?(0,k.Z)(e[a].days):l,d=l.splice(r.index,1),s=(0,j.Z)(d,1)[0];c.splice(o.index,0,s);var u=(0,k.Z)(e);u[i]=(0,Z.Z)((0,Z.Z)({},e[i]),{},{days:l}),u[a]=(0,Z.Z)((0,Z.Z)({},e[a]),{},{days:c}),t(u)}else{var m=o.index,v=e.findIndex((function(n){return n.id===r.droppableId})),f=(0,k.Z)(e[v].days),h=f.splice(r.index,1),x=(0,j.Z)(h,1)[0];f.splice(m,0,x);var p=(0,k.Z)(e);p[v]=(0,Z.Z)((0,Z.Z)({},e[v]),{},{days:f}),t(p)}}(n,b,I)},children:null===b||void 0===b?void 0:b.map((function(n,e){return(0,h.jsx)(O,{column:n,columnIdx:e},n.id)}))})})]})},G=t(7923),K=function(){var n,e=(0,a.v9)((function(n){return n.infoMonths})).infoMonths,t=(0,a.v9)((function(n){return n.monthsPanel})),r=t.month,d=t.error,s=t.isLoading,u=(0,a.v9)((function(n){return n.monthsListCollapse})).isOpenCollapseMonths,m=(0,c.Z)().windowWidth,v=function(n){return(0,h.jsx)("div",{className:"h-100 d-flex justify-content-center align-items-center",children:(0,h.jsx)("div",{className:"fs-3 text-white text-center ",children:n})})};if(s)n=v((0,h.jsx)(o.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(d){if("status"in d){var f="status"in d&&d.status;n=v((0,h.jsx)("div",{className:"text-danger text-center ",children:(0,h.jsxs)(h.Fragment,{children:[" B\u0142\u0105d: ",f," "]})}))}}else if(e&&0!==(null===e||void 0===e?void 0:e.length))if(r&&""!==(null===r||void 0===r?void 0:r.id)){var x="col-12 col-xxl-9 me-xxl-auto px-2 px-xxl-4";n=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.Z,{className:"".concat(x," mt-1"),children:(0,h.jsx)(b,{})}),(0,h.jsx)(i.Z,{className:"".concat(x," d-flex justify-content-center my-2 pe-4 fw-medium"),children:(0,h.jsx)(G.Z,{})}),(0,h.jsx)(i.Z,{className:"".concat(x," flex-grow-1"),style:{maxHeight:u?m>576?"calc(100% - 170px)":"calc(100% - 170px - 35px)":m>576?"calc(100% - 90px)":"calc(100% - 90px - 35px)",transitionDuration:"350ms"},children:(0,h.jsx)($,{})})]})}else n=v((0,h.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",l.xk,". Zapisz miesi\u0105c za pomoc\u0105 formularza"]}));else n=v((0,h.jsx)("div",{children:"Brak miesi\u0119cy zapisanych w bazie danych. Zapisz miesi\u0105c za pomoc\u0105 formularza"}));return{panelContent:n}},_=function(){var n=K().panelContent;return(0,h.jsx)("main",{children:(0,h.jsx)(r.Z,{className:" d-flex align-items-center flex-column backgroundImage",style:{height:"100vh"},children:n})})}},7923:function(n,e,t){var r=t(5048),o=t(3234),i=t(1419),a=t(2677),l=t(184);e.Z=function(){var n,e,t,c,d,s=(0,r.v9)((function(n){return n.monthsPanel})).month,u=((0,o.Z)().monthURLStringFormat,(0,i.Z)().windowWidth,"col-4 col-xxl-3 p-0");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{className:"".concat(u," text-end"),children:"Wszystkie"}),(0,l.jsxs)(a.Z,{className:"col-4 col-md-2 col-xxl-1 p-0 text-center",children:[null===s||void 0===s||null===(n=s.calc)||void 0===n?void 0:n.allHours," -"," ",(0,l.jsx)("span",{className:"".concat((null===s||void 0===s||null===(e=s.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===s||void 0===s||null===(t=s.calc)||void 0===t?void 0:t.currentHours})]}),(0,l.jsx)(a.Z,{className:"".concat(u," ").concat((null===s||void 0===s||null===(c=s.calc)||void 0===c?void 0:c.currentHours)<=0?"text-danger":""),children:(null===s||void 0===s||null===(d=s.calc)||void 0===d?void 0:d.currentHours)<0?"Brak":"Dost\u0119pne"})]})}},2767:function(n,e,t){t.d(e,{Z:function(){return a},p:function(){return i}});var r=t(1830),o=t.n(r),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},a=function(n){o().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},2740:function(){}}]);
//# sourceMappingURL=679.b9b517d4.chunk.js.map