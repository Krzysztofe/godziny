"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[68,777],{3786:function(e,n,r){var d=r(7160),i=r(1419),t=r(184);n.Z=function(e){var n=(0,i.Z)().windowWidth;return(0,t.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100dvh",overflow:"hidden"},children:[(0,t.jsx)(d.default,{}),(0,t.jsx)("div",{className:"d-flex ps-1 flex-fill",style:{width:n>=500?"70%":"100%"},children:e.children})]})}},67:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var d=r(4849),i=r(5048),t=r(3234),o=r(3940),l=r(184),a=function(){var e,n,r,d,t,o=(0,i.v9)((function(e){return e.monthsPanel})).month;return(0,l.jsxs)("div",{className:"d-flex gap-2 mx-auto fw-medium pb-2",style:{width:"fit-content"},children:[(0,l.jsx)("div",{children:"Wszystkie"}),(0,l.jsxs)("div",{children:[null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.allHours," -"," ",(0,l.jsx)("span",{className:"".concat((null===o||void 0===o||null===(n=o.calc)||void 0===n?void 0:n.currentHours)<=0?"text-danger":""),children:null===o||void 0===o||null===(r=o.calc)||void 0===r?void 0:r.currentHours})]}),(0,l.jsx)("div",{className:" ".concat((null===o||void 0===o||null===(d=o.calc)||void 0===d?void 0:d.currentHours)<=0?"text-danger":""),children:(null===o||void 0===o||null===(t=o.calc)||void 0===t?void 0:t.currentHours)<0?"Brak":"Dost\u0119pne"})]})},s=r(1413),c=r(9439),u=r(2791),v=r(793),m=r(7762),h=r(3433),f=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){return null!==e&&void 0!==e&&e.hasOwnProperty("days")?e:(0,s.Z)((0,s.Z)({},e),{},{days:[]})})):[]},x=function(){var e,n=(0,i.v9)((function(e){return e.monthsPanel})).month,r=0,d=0,t=0,o=f(null===n||void 0===n?void 0:n.columns),l=(0,m.Z)(o);try{for(l.s();!(e=l.n()).done;){var a=e.value,s=(a.days||[]).reduce((function(e,n){var r;return e+(null!==(r=null===n||void 0===n?void 0:n.hours)&&void 0!==r?r:0)}),0);switch(a.id){case"submitted":r=s;break;case"accepted":d=s;break;case"rejected":t=s}}}catch(c){l.e(c)}finally{l.f()}return{submittedHoursSum:r,acceptedHoursSum:d,rejectedHoursSum:t}},p=r(9065),y=r(7615),b=r(2677),j=r(4165),g=r(5861),Z=r(3360),w=r(7425),I=r(1830),H=r.n(I),N=r(1100),k=r(2767),P=r(6856),S=r(1578),z=function(e){var n,r;if(null!==e&&void 0!==e&&null!==(n=e.day)&&void 0!==n&&n.date){var d,i,t=new Date(e.day.date);return r=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(t),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,l.jsx)("div",{children:null===(d=e.day)||void 0===d?void 0:d.userName}),(0,l.jsx)("div",{children:"Poza"===(null===(i=e.day)||void 0===i?void 0:i.place)?(0,l.jsx)(S.ols,{style:{color:"rgb(80,173,150)"}}):(0,l.jsx)(P.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,l.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,l.jsx)("div",{children:r||""})})]})}return(0,l.jsx)("div",{children:"Brak danych"})},F=function(e){var n,r=(0,p.Z)(),d=r.yearFromURL,t=r.monthFromURL,o=(0,i.v9)((function(e){return e.monthsPanel})).month,a=(0,y.ur)(),u=(0,c.Z)(a,2),m=u[0],h=u[1],f=(0,N.Z)(h,(0,l.jsx)(w.GnT,{className:"text-danger"})).btnContent,x=function(){var n=(0,g.Z)((0,j.Z)().mark((function n(r,i){return(0,j.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:H().fire((0,k.p)("Usun\u0105\u0107 dzie\u0144")).then(function(){var n=(0,g.Z)((0,j.Z)().mark((function n(l){var a,s,c;return(0,j.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l.isConfirmed){n.next=4;break}return c=null===o||void 0===o||null===(a=o.columns[r])||void 0===a||null===(s=a.days)||void 0===s?void 0:s.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==i})),n.next=4,m({year:d,month:t,colIdx:e.columnIdx,daysBody:c||[]});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}();return(0,l.jsx)(v._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id),index:e.dayIdx,isDragDisabled:!1,children:function(n,r){var d,i;return(0,l.jsx)("div",(0,s.Z)((0,s.Z)((0,s.Z)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,className:"mb-2 bg-white rounded border ".concat(r.isDragging?"border-dark":"border-dark-subtle"," "),children:(0,l.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(d=e.day)||void 0===d?void 0:d.userColor),opacity:r.isDragging?.8:1},children:[(0,l.jsx)(z,{day:e.day}),(0,l.jsxs)(Z.Z,{onClick:function(){return x(e.columnIdx,e.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:h.isLoading,children:[(0,l.jsxs)("div",{children:[null===(i=e.day)||void 0===i?void 0:i.hours," h"]}),(0,l.jsx)("div",{className:"",children:f})]})]})}))}})},R=r(4261),D=function(e){return(0,l.jsx)(b.Z,{children:(0,l.jsx)(v.bK,{droppableId:e.column.id,children:function(n,r){return(0,l.jsxs)("div",(0,s.Z)((0,s.Z)({},n.droppableProps),{},{ref:n.innerRef,className:"p-1 h-100 overflow-hidden border border-1 border border-top-0",style:{backgroundColor:r.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)"},children:[Array.isArray(e.column.days)?e.column.days.map((function(n,r){return(0,l.jsx)(F,{day:n,columnIdx:e.columnIdx,dayIdx:r},(0,R.Z)())})):[],n.placeholder]}))}})})},L=function(e){var n,r,d,t=(0,i.v9)((function(e){return e.monthsPanel})).month;return(0,l.jsx)(l.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.submittedHours},{headerText:"Przyznane:",counter:null===t||void 0===t||null===(r=t.calc)||void 0===r?void 0:r.acceptedHours},{headerText:"Odrzucone:",counter:null===t||void 0===t||null===(d=t.calc)||void 0===d?void 0:d.rejectedHours}].map((function(n){var r=n.headerText,d=n.counter;return(0,l.jsxs)(b.Z,{className:"text-dark-emphasis bg-white fw-medium p-1 ".concat(0===e.thumbPosition?"border-bottom border-2 border-white":"border-bottom border-2 border-dark-subtle"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[r," ","",d]},r)}))})},C=function(){var e=(0,u.useRef)(null),n=(0,u.useState)(0),r=(0,c.Z)(n,2),d=r[0],i=r[1];return{scrollableRef:e,thumbPosition:d,handleScroll:function(){var n=e.current;if(n){var r=n.scrollTop,d=n.scrollHeight,t=n.clientHeight;i(r/(d-t)*100)}}}},T=r(1419),B=function(){var e=(0,T.Z)().windowWidth,n=(0,p.Z)(),r=n.yearFromURL,d=n.monthFromURL,t=(0,y.CB)(),o=(0,c.Z)(t,1)[0],a=x(),m=a.submittedHoursSum,b=a.acceptedHoursSum,j=a.rejectedHoursSum,g=C(),Z=g.scrollableRef,w=g.thumbPosition,I=g.handleScroll,H=(0,i.v9)((function(e){return e.monthsPanel})).month,N=f(null===H||void 0===H?void 0:H.columns),k=(0,u.useState)([]),P=(0,c.Z)(k,2),S=P[0],z=P[1];(0,u.useEffect)((function(){z(N)}),[H]),(0,u.useEffect)((function(){var e,n;S.length>0&&o({year:r,month:d,monthBody:(0,s.Z)((0,s.Z)({},H),{},{columns:S,calc:(0,s.Z)((0,s.Z)({},null===H||void 0===H?void 0:H.calc),{},{currentHours:(null!==(e=null===H||void 0===H||null===(n=H.calc)||void 0===n?void 0:n.allHours)&&void 0!==e?e:0)-m-b-j+j,submittedHours:m,acceptedHours:b,rejectedHours:j})})})}),[S]);var F="d-flex column-gap-1";return(0,l.jsxs)("div",{ref:Z,onScroll:I,className:"p-0 overflow-y-scroll",style:{height:"fit-content",maxHeight:e>500?"calc(100% - 32px)":"calc(100% - 32px - 2.5rem)"},children:[(0,l.jsx)("div",{className:"".concat(F," sticky-top"),children:(0,l.jsx)(L,{thumbPosition:w})}),(0,l.jsx)("div",{className:"".concat(F),children:(0,l.jsx)(v.Z5,{onDragEnd:function(e){!function(e,n,r){var d=e.source,i=e.destination;if(i&&(d.draggableId!==i.droppableId||d.index===i.index))if(d.droppableId!==i.droppableId){var t=null===n||void 0===n?void 0:n.findIndex((function(e){return e.id===d.droppableId})),o=null===n||void 0===n?void 0:n.findIndex((function(e){return e.id===i.droppableId})),l=n&&(0,h.Z)(n[t].days),a=d.droppableId!==i.dropableId?(0,h.Z)(n[o].days):l,u=l.splice(d.index,1),v=(0,c.Z)(u,1)[0];a.splice(i.index,0,v);var m=(0,h.Z)(n);m[t]=(0,s.Z)((0,s.Z)({},n[t]),{},{days:l}),m[o]=(0,s.Z)((0,s.Z)({},n[o]),{},{days:a}),r(m)}else{var f=i.index,x=n.findIndex((function(e){return e.id===d.droppableId})),p=(0,h.Z)(n[x].days),y=p.splice(d.index,1),b=(0,c.Z)(y,1)[0];p.splice(f,0,b);var j=(0,h.Z)(n);j[x]=(0,s.Z)((0,s.Z)({},n[x]),{},{days:p}),r(j)}}(e,S,z)},children:null===S||void 0===S?void 0:S.map((function(e,n){return(0,l.jsx)(D,{column:e,columnIdx:n},e.id)}))})})]})},U=function(){return(0,l.jsxs)("div",{className:"py-2",style:{maxWidth:"1000px",width:"100%"},children:[(0,l.jsx)(a,{}),(0,l.jsx)(B,{})]})},W=function(){var e,n=(0,i.v9)((function(e){return e.monthsPanel})),r=n.month,a=n.error,s=n.isLoading,c=(0,t.Z)().monthURLStringFormat;if(s)e=(0,o.a)((0,l.jsx)(d.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(a){if("status"in a){var u="status"in a&&a.status;e=(0,o.a)((0,l.jsx)("div",{className:"text-danger text-center ",children:(0,l.jsxs)(l.Fragment,{children:[" B\u0142\u0105d: ",u," "]})}))}}else e=r&&""!==(null===r||void 0===r?void 0:r.id)?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(U,{})}):(0,o.a)((0,l.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",c,". Zapisz miesi\u0105c w ustawieniach."]}));return{requestState:e}},A=r(3786),E=function(){var e=W().requestState;return(0,l.jsx)(A.Z,{children:e})}},3940:function(e,n,r){r.d(n,{a:function(){return i}});var d=r(184),i=function(e){return(0,d.jsx)("div",{className:" d-flex justify-content-center align-items-center fs-3 text-warning text-center",style:{maxWidth:"1000px",width:"100%",height:"100%"},children:e})}}}]);
//# sourceMappingURL=68.026abe43.chunk.js.map