"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[125],{3125:function(n,e,r){r.r(e),r.d(e,{default:function(){return B}});var d=r(1413),t=r(9439),i=r(2791),o=r(793),a=r(7689),u=r(322),s=r(4165),l=r(3433),c=r(5861),v=r(6355),h=r(1830),m=r.n(h),f=r(184),p=function(n){return(0,f.jsxs)("div",{children:[(0,f.jsxs)("small",{children:["Imi\u0119:",n.day.userName]}),(0,f.jsx)("small",{children:n.day.date}),(0,f.jsxs)("small",{children:["Godz.: ",n.day.hours]})]})},y=r(3572),x=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,u.P2)(void 0).data,r=e&&Object.keys(e),t=r&&Object.values(e).flat().map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{id:r[e]})})),i=(0,y.nr)(t),o=e&&i.length>0?null===i||void 0===i?void 0:i.find((function(e){return e.month===n})):void 0,a=e&&(null===o||void 0===o?void 0:o.columns),s=e?null===o||void 0===o?void 0:o.allHours:"",l=e?null===o||void 0===o?void 0:o.currentHours:"",c=e?null===o||void 0===o?void 0:o.submitedHours:"",v=e?null===o||void 0===o?void 0:o.acceptedHours:"",h=e?null===o||void 0===o?void 0:o.rejectedHours:"",m=e&&i.length>0&&null!==a&&void 0!==a&&a[0].days?null===a||void 0===a?void 0:a[0].days.reduce((function(n,e){return n+e.hours}),0):0,f=e&&i.length>0&&null!==a&&void 0!==a&&a[0].days?null===a||void 0===a?void 0:a[1].days.reduce((function(n,e){return n+e.hours}),0):0,p=e&&i.length>0&&null!==a&&void 0!==a&&a[0].days?null===a||void 0===a?void 0:a[2].days.reduce((function(n,e){return n+e.hours}),0):0;return{data:e,databaseMonthsId:r,databaseMonthsCollection:i,databaseMonth:o,databaseColumns:a,databaseAllHours:s,dataCurrentHours:l,databaseAcceptedHours:v,databaseRejectedHours:h,dataBaseSubmitedHours:c,acceptedHoursSum:f,rejectedHoursSum:p,submitedHoursSum:m}},b=function(n){var e,r=(0,u.P2)(void 0),i=r.data,h=(r.error,(0,u.X)()),y=(0,t.Z)(h,2),b=y[0],j=y[1],Z=(0,a.UO)().monthURL,g=x(Z),H=g.databaseColumns,w=(g.databaseAllHours,g.databaseMonth),C=(g.acceptedHoursSum,g.rejectedHoursSum,g.submitedHoursSum,function(){var n=(0,c.Z)((0,s.Z)().mark((function n(e){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:m().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var n=(0,c.Z)((0,s.Z)().mark((function n(r){var t;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.isConfirmed){n.next=4;break}return t=(0,l.Z)(H).map((function(n){return n&&n.days?(0,d.Z)((0,d.Z)({},n),{},{days:n.days.filter((function(n){return n.id!==e}))}):n})),n.next=4,b({id:i&&(null===w||void 0===w?void 0:w.id),columns:(0,d.Z)((0,d.Z)({},w),{},{columns:t})});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),I=(0,f.jsx)("div",{style:{border:"1px solid black"},children:(0,f.jsx)(o._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id.toString()),index:n.index,children:function(e){return(0,f.jsxs)("div",(0,d.Z)((0,d.Z)((0,d.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[(0,f.jsx)(p,{day:n.day}),(0,f.jsx)("button",{onClick:function(){return C(n.day.id)},children:(0,f.jsx)(v.AMf,{})})]}))}})});return j.isLoading&&(I=(0,f.jsx)("div",{children:' "Loading" '})),j.isError&&(I=(0,f.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,f.jsx)(f.Fragment,{children:I})},j=function(n){return(0,f.jsx)("div",{children:(0,f.jsx)(o.bK,{droppableId:n.column.id,children:function(e,r){var t,i;return(0,f.jsxs)("div",(0,d.Z)((0,d.Z)({},e.droppableProps),{},{ref:e.innerRef,style:{border:"1px solid black",width:"20vw",minHeight:"100vh",height:"fit-content"},children:[n.column.days&&n.column.days.length>0&&(null===(t=n.column)||void 0===t||null===(i=t.days)||void 0===i?void 0:i.map((function(n,e){return(0,f.jsx)(b,{day:n,index:e},crypto.randomUUID())}))),e.placeholder]}))}})})},Z=r(5048),g=function(n){return(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:n.name,children:n.label}),(0,f.jsx)("input",{id:n.name,type:n.type,name:n.name,value:n.value,onChange:n.handleChange,onBlur:n.handleBlur,placeholder:n.placeholder,style:{width:50}})]})},H=r(411),w=r(6712),C=r(3728),I=r(4849),S=function(){var n=(0,a.UO)().monthURL,e=(0,Z.I0)(),r=(0,Z.v9)((function(n){return n.hoursPanel})).numberOfDays,i=(0,w.Z)(n),o=i.databaseMonth,l=i.data,v=(0,u.X)(),h=(0,t.Z)(v,2),m=h[0],p=h[1],y=function(){var n=(0,c.Z)((0,s.Z)().mark((function n(e){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,m({id:l&&(null===o||void 0===o?void 0:o.id),columns:(0,d.Z)((0,d.Z)({},o),{},{allHours:+r})});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=(0,f.jsx)(C.pl2,{});return p.isLoading&&(x=(0,f.jsx)(I.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),p.isError&&(x=(0,f.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,f.jsxs)("form",{onSubmit:y,style:{display:"flex"},children:[(0,f.jsx)(g,{type:"number",name:"numberOfDays",value:r,label:"Podaj godziny w miesi\u0105cu ",placeholder:"Liczba",handleChange:function(n){var r=n.target.value;e((0,H.Cp)(r))}}),(0,f.jsx)("button",{type:"submit",children:x})]})},k=function(){var n=(0,a.UO)().monthURL,e=x(n),r=e.databaseAllHours,d=e.dataCurrentHours,t=n&&new Date(n),i=t&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(t);return(0,f.jsxs)("header",{children:[(0,f.jsxs)("div",{style:{display:"flex"},children:[(0,f.jsx)(S,{}),(0,f.jsx)("div",{style:{marginLeft:30},children:i})]}),(0,f.jsxs)("div",{style:{display:"flex"},children:[(0,f.jsxs)("div",{style:{marginRight:20},children:["W miesi\u0105cu: ",r]}),(0,f.jsxs)("div",{children:["Do wykorzystania: ",d]})]})]})},B=function(){var n=(0,u.P2)(void 0),e=n.data,r=n.error,s=(0,u.X)(),l=(0,t.Z)(s,2),c=l[0],v=l[1],h=(0,a.UO)().monthURL,m=x(h),p=m.databaseAllHours,b=m.databaseColumns,Z=m.databaseAcceptedHours,g=m.databaseRejectedHours,H=m.dataBaseSubmitedHours,w=m.databaseMonth,C=m.submitedHoursSum,I=m.acceptedHoursSum,S=m.rejectedHoursSum,B=(0,i.useState)([]),L=(0,t.Z)(B,2),A=L[0],O=L[1];(0,i.useEffect)((function(){e&&w&&O(b)}),[e,h]),console.log("columns",A),(0,i.useEffect)((function(){e&&(null===A||void 0===A?void 0:A.length)>1&&(null===w||void 0===w?void 0:w.month)&&c({id:e&&(null===w||void 0===w?void 0:w.id),columns:(0,d.Z)((0,d.Z)({},w),{},{columns:A,currentHours:p-C-I-S+S,submitedHours:C,acceptedHours:I,rejectedHours:S})})}),[A]);var P=v.isError?(0,f.jsx)("div",{children:"B\u0142\u0105d"}):(0,f.jsx)("div",{children:(0,f.jsx)("div",{children:(0,f.jsxs)(o.Z5,{onDragEnd:function(n){return(0,y.qs)(n,A,O)},children:[(0,f.jsx)("div",{style:{display:"flex"},children:[{header:"Z\u0142o\u017cone:",counter:H},{header:"Zakceptowane:",counter:Z},{header:"Odrzucone:",counter:g}].map((function(n){var e=n.header,r=n.counter;return(0,f.jsxs)("h6",{style:{marginLeft:20,width:"20vw"},children:[e," ","",r]},e)}))}),(0,f.jsx)("div",{style:{display:"flex"},children:A&&A.length>0&&A.map((function(n,e){return(0,f.jsx)(j,{column:n},n.id)}))})]})})});return r&&"error"in r&&(P=(0,f.jsxs)("div",{style:{textAlign:"center"},children:[" ",r.error," "]})),(0,f.jsx)(f.Fragment,{children:void 0===w||null===w?(0,f.jsx)("div",{style:{textAlign:"center"},children:"Brak danych, wWybierz miesi\u0105c"}):(0,f.jsx)("div",{style:{display:"flex",marginLeft:"30vw"},children:(0,f.jsxs)("div",{children:[(0,f.jsx)(k,{}),P]})})})}},6712:function(n,e,r){var d=r(1413),t=r(322),i=r(3572);e.Z=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,t.P2)(void 0).data,r=e&&Object.keys(e),o=r&&Object.values(e).flat().map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{id:r[e]})})),a=(0,i.nr)(o),u=e&&a.length>0?null===a||void 0===a?void 0:a.find((function(e){return e.month===n})):void 0,s=e&&(null===u||void 0===u?void 0:u.columns),l=e?null===u||void 0===u?void 0:u.allHours:"",c=e?null===u||void 0===u?void 0:u.currentHours:"",v=e?null===u||void 0===u?void 0:u.submitedHours:"",h=e?null===u||void 0===u?void 0:u.acceptedHours:"",m=e?null===u||void 0===u?void 0:u.rejectedHours:"",f=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[0].days.reduce((function(n,e){return n+e.hours}),0):0,p=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[1].days.reduce((function(n,e){return n+e.hours}),0):0,y=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[2].days.reduce((function(n,e){return n+e.hours}),0):0,x=e&&a?a.map((function(n){return n.month})):[];return{string:x.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)})),data:e,databaseMonthsId:r,databaseMonthsCollection:a,databaseMonth:u,databaseColumns:s,databaseAllHours:l,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:m,dataBaseSubmitedHours:v,acceptedHoursSum:p,rejectedHoursSum:y,submitedHoursSum:f,databaseMonthsDates:x}}},3572:function(n,e,r){r.d(e,{nr:function(){return o},qs:function(){return a}});var d=r(9439),t=r(3433),i=r(1413),o=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){var e,r;return(null===n||void 0===n||null===(e=n.columns)||void 0===e?void 0:e.every((function(n){return n.hasOwnProperty("days")})))?n:(0,i.Z)((0,i.Z)({},n),{},{columns:null===n||void 0===n||null===(r=n.columns)||void 0===r?void 0:r.map((function(n){return(0,i.Z)((0,i.Z)({},n),{},{days:n.days||[]})}))})})):[]},a=function(n,e,r){var o=n.source,a=n.destination;if(a&&(o.draggableId!==a.droppableId||o.index===a.index))if(o.droppableId!==a.droppableId){var u=e.findIndex((function(n){return n.id===o.droppableId})),s=e.findIndex((function(n){return n.id===a.droppableId})),l=(0,t.Z)(e[u].days),c=o.droppableId!==a.dropableId?(0,t.Z)(e[s].days):l,v=l.splice(o.index,1),h=(0,d.Z)(v,1)[0];c.splice(a.index,0,h);var m=(0,t.Z)(e);m[u]=(0,i.Z)((0,i.Z)({},e[u]),{},{days:l}),m[s]=(0,i.Z)((0,i.Z)({},e[s]),{},{days:c}),r(m)}else{var f=a.index,p=e.findIndex((function(n){return n.id===o.droppableId})),y=(0,t.Z)(e[p].days),x=y.splice(o.index,1),b=(0,d.Z)(x,1)[0];y.splice(f,0,b);var j=(0,t.Z)(e);j[p]=(0,i.Z)((0,i.Z)({},e[p]),{},{days:y}),r(j)}}}}]);
//# sourceMappingURL=125.88c6f132.chunk.js.map