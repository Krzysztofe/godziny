"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[868],{5868:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var t=r(7689),a=r(1413),s=r(9439),d=r(793),i=r(3572),o=r(6712),u=r(2791),l=r(322),c=r(4165),m=r(3433),h=r(5861),v=r(1830),f=r.n(v),x=r(6856),p=r(1578),y=r(3853),j=r(184),Z=function(e){var n=(0,t.UO)().monthURL,r=n&&new Date(n),a=r&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r).slice(0,-5),s=e.day.date.slice(5);"0"===s[0]&&s.slice(1);return console.log("",a),(0,j.jsxs)("div",{className:"px-1 py-2",children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between",style:{fontSize:"clamp(0.8rem, 3.4vw, 1.2rem)"},children:[(0,j.jsx)("div",{children:e.day.userName}),(0,j.jsxs)("div",{children:[e.day.hours," ",(0,j.jsx)(y.TCC,{className:"text-secondary"})]})]}),(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("div",{children:s}),(0,j.jsx)("div",{children:"Poza"===e.day.place?(0,j.jsx)(p.ols,{className:"text-success"}):(0,j.jsx)(x.P8U,{className:"text-danger"})})]})]})},b=r(3360),g=function(e){var n,r=(0,l.S$)(void 0),i=r.data,u=(r.error,(0,l.CB)()),v=(0,s.Z)(u,2),x=v[0],p=v[1],y=(0,t.UO)().monthURL,g=(0,o.Z)(y),H=g.databaseColumns,w=(g.databaseAllHours,g.databaseMonth),C=(g.acceptedHoursSum,g.rejectedHoursSum,g.submitedHoursSum,function(){var e=(0,h.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(r){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=4;break}return t=(0,m.Z)(H).map((function(e){return e&&e.days?(0,a.Z)((0,a.Z)({},e),{},{days:e.days.filter((function(e){return e.id!==n}))}):e})),e.next=4,x({id:i&&(null===w||void 0===w?void 0:w.id),columns:(0,a.Z)((0,a.Z)({},w),{},{columns:t})});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),N=(0,j.jsx)(d._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id.toString()),index:e.index,children:function(n){return(0,j.jsxs)("div",(0,a.Z)((0,a.Z)((0,a.Z)({className:"bg-white mb-2"},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[(0,j.jsx)(Z,{day:e.day}),(0,j.jsx)(b.Z,{variant:"secondary",size:"sm",className:"rounded-0 w-100 fw-medium",onClick:function(){return C(e.day.id)},children:"Usu\u0144"})]}))}});return p.isLoading&&(N=(0,j.jsx)("div",{children:' "Loading" '})),p.isError&&(N=(0,j.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,j.jsx)(j.Fragment,{children:N})},H=function(e){return(0,j.jsx)("div",{style:{width:"100%"},children:(0,j.jsx)(d.bK,{droppableId:e.column.id,children:function(n,r){var t,s;return(0,j.jsxs)("div",(0,a.Z)((0,a.Z)({},n.droppableProps),{},{ref:n.innerRef,className:"p-1 bg-secondary-subtle",style:{height:"100%"},children:[e.column.days&&e.column.days.length>0&&(null===(t=e.column)||void 0===t||null===(s=t.days)||void 0===s?void 0:s.map((function(e,n){return(0,j.jsx)(g,{day:e,index:n},crypto.randomUUID())}))),n.placeholder]}))}})})},w=r(9126),C=r(6355),N=function(){var e=(0,t.UO)().monthURL,n=(0,o.Z)(e),r=n.databaseAcceptedHours,a=n.databaseRejectedHours,d=n.dataBaseSubmitedHours,i=(0,u.useState)(window.innerWidth),l=(0,s.Z)(i,2),c=l[0],m=l[1];(0,u.useEffect)((function(){var e=function(){m(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]);var h=c>576;return(0,j.jsx)("div",{className:"d-flex grid gap-0 column-gap-2",children:[{headerText:"Z\u0142o\u017cone:",headerIcon:(0,j.jsx)(w.nkP,{}),counter:d},{headerText:"Przyj\u0119te:",headerIcon:(0,j.jsx)(C.spm,{}),counter:r},{headerText:"Odrzucone:",headerIcon:(0,j.jsx)(C.bGJ,{className:"secondary"}),counter:a}].map((function(e){var n=e.headerText,r=e.counter,t=e.headerIcon;return(0,j.jsx)("div",{className:" mb-0 p-1 bg-secondary-subtle text-dark-emphasis fw-medium fs-6",style:{width:"100%"},children:h?(0,j.jsxs)(j.Fragment,{children:[n," ",r]}):(0,j.jsxs)(j.Fragment,{children:[t," ",r," "]})},n)}))})},I=function(){var e=(0,t.UO)().monthURL,n=(0,o.Z)(e),r=n.data,c=(n.error,n.databaseAllHours),m=n.databaseColumns,h=(n.databaseAcceptedHours,n.databaseRejectedHours,n.dataBaseSubmitedHours,n.databaseMonth),v=n.submitedHoursSum,f=n.acceptedHoursSum,x=n.rejectedHoursSum,p=(0,l.CB)(),y=(0,s.Z)(p,2),Z=y[0],b=(y[1],(0,u.useState)([])),g=(0,s.Z)(b,2),w=g[0],C=g[1];return(0,u.useEffect)((function(){r&&h&&C(m)}),[r,e]),(0,u.useEffect)((function(){r&&(null===w||void 0===w?void 0:w.length)>1&&(null===h||void 0===h?void 0:h.month)&&Z({id:r&&(null===h||void 0===h?void 0:h.id),columns:(0,a.Z)((0,a.Z)({},h),{},{columns:w,currentHours:c-v-f-x+x,submitedHours:v,acceptedHours:f,rejectedHours:x})})}),[w]),(0,j.jsx)(d.Z5,{onDragEnd:function(e){return(0,i.qs)(e,w,C)},children:(0,j.jsxs)("section",{className:"monthColumns",children:[(0,j.jsx)(N,{}),(0,j.jsx)("div",{className:"d-flex grid gap-0 column-gap-2",style:{height:"fit-content"},children:w&&w.length>0&&w.map((function(e,n){return(0,j.jsx)(H,{column:e},e.id)}))})]})})},S=r(3855),U=r(4849),k=r(8820),z=r(5705),L=r(8007),R=L.Ry({allHours:L.Rx().max(320,"Max. 320").required("Podaj liczb\u0119 godzin")}),T=function(){var e=(0,t.UO)().monthURL,n=(0,l.CB)(),r=(0,s.Z)(n,2),d=r[0],i=r[1],u=(0,o.Z)(e),m=u.databaseMonth,v=u.data,f=(0,z.TA)({initialValues:{allHours:0},validationSchema:R,onSubmit:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(n,r){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.resetForm,e.next=3,d({id:v&&(null===m||void 0===m?void 0:m.id),columns:(0,a.Z)((0,a.Z)({},m),{},{allHours:n.allHours})});case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()});return{formik:f,success:i}},B=function(){var e=T(),n=e.formik,r=e.success,t=(0,u.useState)(0),a=(0,s.Z)(t,2),d=a[0],i=a[1],o=(0,j.jsx)(k.dEn,{style:{fontSize:"2rem"}});return r.isLoading&&(o=(0,j.jsx)(U.Z,{animation:"border",variant:"secondary",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(o=(0,j.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(S.Z,{onSubmit:n.handleSubmit,className:"",children:(0,j.jsxs)(S.Z.Group,{className:"d-flex align-items-end my-3",style:{height:"2rem"},children:[(0,j.jsx)(b.Z,{type:"submit",variant:"secondary",className:"rounded-0 d-flex align-items-center justify-content-center px-0  bg-transparent  text-dark border-0",style:{width:"10%",height:"100%"},children:o}),(0,j.jsx)(S.Z.Range,{min:0,max:300,value:d,onChange:function(e){var n=parseInt(e.target.value);i(n)},className:"form-range",style:{height:"2px",backgroundColor:"red"}})]})})})},P=r(7022),A=r(9743),O=r(2677),D=function(){var e=(0,t.UO)().monthURL,n=(0,o.Z)(e),r=n.databaseAllHours,a=n.dataCurrentHours,s=e&&new Date(e);s&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(s);return(0,j.jsx)("header",{children:(0,j.jsx)(P.Z,{children:(0,j.jsxs)(A.Z,{children:[(0,j.jsx)(O.Z,{sm:7,className:"order-1 order-sm-2 px-0",children:(0,j.jsx)(B,{})}),(0,j.jsx)(O.Z,{sm:5,className:"order-2 order-sm-1 px-0",children:(0,j.jsxs)("div",{className:"d-flex my-3",children:[(0,j.jsxs)("div",{children:["Wszystkie: ",r]}),(0,j.jsxs)("div",{className:"ms-4",children:["Wolne: ",a]})]})})]})})})},E=function(){var e=(0,t.UO)().monthURL,n=(0,o.Z)(e).databaseMonth;return(0,j.jsx)(j.Fragment,{children:n&&null!==n?(0,j.jsxs)("main",{children:[(0,j.jsx)(D,{}),(0,j.jsx)(I,{})]}):(0,j.jsx)("main",{style:{textAlign:"center"},children:"Brak danych, wybierz miesi\u0105c"})})}},6712:function(e,n,r){var t=r(1413),a=r(322),s=r(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,a.S$)(void 0),r=n.data,d=n.error,i=r&&Object.keys(r),o=i&&Object.values(r).flat().map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{id:i[n]})})),u=(0,s.nr)(o),l=r&&u.length>0?null===u||void 0===u?void 0:u.find((function(n){return n.month===e})):void 0,c=r&&(null===l||void 0===l?void 0:l.columns),m=r?null===l||void 0===l?void 0:l.allHours:"",h=r?null===l||void 0===l?void 0:l.currentHours:"",v=r?null===l||void 0===l?void 0:l.submitedHours:"",f=r?null===l||void 0===l?void 0:l.acceptedHours:"",x=r?null===l||void 0===l?void 0:l.rejectedHours:"",p=r&&u.length>0&&null!==c&&void 0!==c&&c[0].days?null===c||void 0===c?void 0:c[0].days.reduce((function(e,n){return e+n.hours}),0):0,y=r&&u.length>0&&null!==c&&void 0!==c&&c[0].days?null===c||void 0===c?void 0:c[1].days.reduce((function(e,n){return e+n.hours}),0):0,j=r&&u.length>0&&null!==c&&void 0!==c&&c[0].days?null===c||void 0===c?void 0:c[2].days.reduce((function(e,n){return e+n.hours}),0):0,Z=r&&u?u.map((function(e){return e.month})):[];return{string:Z.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),data:r,error:d,databaseMonthsId:i,databaseMonthsCollection:u,databaseMonth:l,databaseColumns:c,databaseAllHours:m,dataCurrentHours:h,databaseAcceptedHours:f,databaseRejectedHours:x,dataBaseSubmitedHours:v,acceptedHoursSum:y,rejectedHoursSum:j,submitedHoursSum:p,databaseMonthsDates:Z}}},3572:function(e,n,r){r.d(n,{nr:function(){return d},qs:function(){return i}});var t=r(9439),a=r(3433),s=r(1413),d=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,r;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,s.Z)((0,s.Z)({},e),{},{columns:null===e||void 0===e||null===(r=e.columns)||void 0===r?void 0:r.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{days:e.days||[]})}))})})):[]},i=function(e,n,r){var d=e.source,i=e.destination;if(i&&(d.draggableId!==i.droppableId||d.index===i.index))if(d.droppableId!==i.droppableId){var o=n.findIndex((function(e){return e.id===d.droppableId})),u=n.findIndex((function(e){return e.id===i.droppableId})),l=(0,a.Z)(n[o].days),c=d.droppableId!==i.dropableId?(0,a.Z)(n[u].days):l,m=l.splice(d.index,1),h=(0,t.Z)(m,1)[0];c.splice(i.index,0,h);var v=(0,a.Z)(n);v[o]=(0,s.Z)((0,s.Z)({},n[o]),{},{days:l}),v[u]=(0,s.Z)((0,s.Z)({},n[u]),{},{days:c}),r(v)}else{var f=i.index,x=n.findIndex((function(e){return e.id===d.droppableId})),p=(0,a.Z)(n[x].days),y=p.splice(d.index,1),j=(0,t.Z)(y,1)[0];p.splice(f,0,j);var Z=(0,a.Z)(n);Z[x]=(0,s.Z)((0,s.Z)({},n[x]),{},{days:p}),r(Z)}}}}]);
//# sourceMappingURL=868.104151f9.chunk.js.map