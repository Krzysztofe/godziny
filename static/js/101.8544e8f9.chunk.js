"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[101],{9662:function(e,n,t){t.d(n,{TB:function(){return s},hR:function(){return r},xk:function(){return i}});var a=new Date,r=new Intl.DateTimeFormat("pl",{year:"numeric"}).format(a),s=new Intl.DateTimeFormat("pl",{month:"2-digit"}).format(a),i=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},3234:function(e,n,t){var a=t(1413),r=t(322),s=t(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,r.S$)(void 0),t=n.data,i=n.error,d=n.isLoading,o=t&&Object.keys(t),l=o&&Object.values(t).flat().map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{id:o[n]})})),u=(0,s.nr)(l),c=t&&u.length>0?null===u||void 0===u?void 0:u.find((function(n){return n.monthDate===e})):void 0,m=t&&(null===c||void 0===c?void 0:c.columns),h=t?null===c||void 0===c?void 0:c.allHours:"",x=t?null===c||void 0===c?void 0:c.currentHours:"",f=t?null===c||void 0===c?void 0:c.submitedHours:"",v=t?null===c||void 0===c?void 0:c.acceptedHours:"",p=t?null===c||void 0===c?void 0:c.rejectedHours:"",y=t&&u.length>0&&null!==m&&void 0!==m&&m[0].days?null===m||void 0===m?void 0:m[0].days.reduce((function(e,n){return e+n.hours}),0):0,j=t&&u.length>0&&null!==m&&void 0!==m&&m[0].days?null===m||void 0===m?void 0:m[1].days.reduce((function(e,n){return e+n.hours}),0):0,g=t&&u.length>0&&null!==m&&void 0!==m&&m[0].days?null===m||void 0===m?void 0:m[2].days.reduce((function(e,n){return e+n.hours}),0):0,Z=t&&u?u.map((function(e){return e.monthDate})):[],b=t?Z.sort((function(e,n){return e<n?-1:e>n?1:0})):[],w=b.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)}));return{data:t,error:i,isLoading:d,databaseMonthsId:o,databaseMonthsCollection:u,databaseMonth:c,databaseColumns:m,databaseAllHours:h,dataCurrentHours:x,databaseAcceptedHours:v,databaseRejectedHours:p,dataBaseSubmitedHours:f,acceptedHoursSum:j,rejectedHoursSum:g,submitedHoursSum:y,databaseMonthsDates:Z,databaseMonthsDatesSorted:b,databaseMonthsDatesToString:w}}},5101:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var a=t(4849),r=t(7689),s=t(1413),i=t(9439),d=t(793),o=t(3572),l=t(3234),u=t(2791),c=t(322),m=t(4165),h=t(3433),x=t(5861),f=t(1830),v=t.n(f),p=t(6856),y=t(1578),j=t(3853),g=t(184),Z=function(e){var n=(0,r.UO)().monthURL,t=n&&new Date(n),a=(t&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(t).slice(0,-5),e.day.date.slice(5));"0"===a[0]&&a.slice(1);return(0,g.jsxs)("div",{className:"px-1 py-2 py-sm-1",children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between",style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[(0,g.jsx)("div",{children:e.day.userName}),(0,g.jsxs)("div",{children:[e.day.hours," ",(0,g.jsx)(j.TCC,{className:"text-primary"})]})]}),(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsx)("div",{children:a}),(0,g.jsx)("div",{children:"Poza"===e.day.place?(0,g.jsx)(y.ols,{className:"text-success"}):(0,g.jsx)(p.P8U,{className:"text-danger"})})]})]})},b=t(3360),w=function(e){var n,t=(0,c.S$)(void 0),a=t.data,o=(t.error,(0,c.CB)()),u=(0,i.Z)(o,2),f=u[0],p=u[1],y=(0,r.UO)().monthURL,j=(0,l.Z)(y),w=j.databaseColumns,H=(j.databaseAllHours,j.databaseMonth),N=(j.acceptedHoursSum,j.rejectedHoursSum,j.submitedHoursSum,function(){var e=(0,x.Z)((0,m.Z)().mark((function e(n){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=4;break}return r=(0,h.Z)(w).map((function(e){return e&&e.days?(0,s.Z)((0,s.Z)({},e),{},{days:e.days.filter((function(e){return e.id!==n}))}):e})),e.next=4,f({id:a&&(null===H||void 0===H?void 0:H.id),columns:(0,s.Z)((0,s.Z)({},H),{},{columns:r})});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),C=(0,g.jsx)(d._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id.toString()),index:e.index,children:function(n){return(0,g.jsxs)("div",(0,s.Z)((0,s.Z)((0,s.Z)({className:"bg-white card mb-2"},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[(0,g.jsx)(Z,{day:e.day}),(0,g.jsx)(b.Z,{variant:"info",size:"sm",className:"rounded-top-0 w-100 fw-medium ",onClick:function(){return N(e.day.id)},children:"Usu\u0144"})]}))}});return p.isLoading&&(C=(0,g.jsx)("div",{children:' "Loading" '})),p.isError&&(C=(0,g.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,g.jsx)(g.Fragment,{children:C})},H=function(e){return(0,g.jsx)("div",{className:"w-100",children:(0,g.jsx)(d.bK,{droppableId:e.column.id,children:function(n,t){var a,r;return(0,g.jsxs)("div",(0,s.Z)((0,s.Z)({},n.droppableProps),{},{ref:n.innerRef,className:"p-1 bg-primary-subtle",style:{height:"100%"},children:[e.column.days&&e.column.days.length>0&&(null===(a=e.column)||void 0===a||null===(r=a.days)||void 0===r?void 0:r.map((function(e,n){return(0,g.jsx)(w,{day:e,index:n},crypto.randomUUID())}))),n.placeholder]}))}})})},N=function(){var e=(0,r.UO)().monthURL,n=(0,l.Z)(e),t=n.databaseAcceptedHours,a=n.databaseRejectedHours,s=n.dataBaseSubmitedHours;return(0,g.jsx)(g.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:s},{headerText:"Przyznane:",counter:t},{headerText:"Odrzucone:",counter:a}].map((function(e){var n=e.headerText,t=e.counter;return(0,g.jsxs)("div",{className:"p-1 bg-primary-subtle text-dark-emphasis fw-medium w-100 ",style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[n," ","",t]},n)}))})},C=t(7022),U=function(){var e=(0,r.UO)().monthURL,n=(0,l.Z)(e),t=n.data,a=n.databaseAllHours,m=n.databaseColumns,h=n.dataCurrentHours,x=n.databaseMonth,f=n.submitedHoursSum,v=n.acceptedHoursSum,p=n.rejectedHoursSum,y=(0,c.CB)(),j=(0,i.Z)(y,2),Z=j[0],b=(j[1],(0,u.useState)([])),w=(0,i.Z)(b,2),U=w[0],z=w[1];return(0,u.useEffect)((function(){t&&x&&z(m)}),[t,e]),(0,u.useEffect)((function(){t&&(null===U||void 0===U?void 0:U.length)>1&&(null===x||void 0===x?void 0:x.monthDate)&&Z({id:t&&(null===x||void 0===x?void 0:x.id),columns:(0,s.Z)((0,s.Z)({},x),{},{columns:U,currentHours:a-f-v-p+p,submitedHours:f,acceptedHours:v,rejectedHours:p})})}),[U,a,h]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("main",{className:"mb-2 overflow-y-scroll ",children:[(0,g.jsx)(C.Z,{className:"mx-0 ms-sm-auto sticky-top d-flex column-gap-2",children:(0,g.jsx)(N,{})}),(0,g.jsx)(C.Z,{className:"mx-0 ms-sm-auto mb-5 d-flex column-gap-2",style:{height:"fit-content"},children:(0,g.jsx)(d.Z5,{onDragEnd:function(e){return(0,o.qs)(e,U,z)},children:U&&U.length>0&&U.map((function(e){return(0,g.jsx)(H,{column:e},e.id)}))})})]})})},z=t(3027),S=t(5705),I=t(8007),L=I.Ry({allHours:I.Rx().max(320,"Max. 320").required("Podaj liczb\u0119 godzin")}),k=function(){var e=(0,r.UO)().monthURL,n=(0,c.CB)(),t=(0,i.Z)(n,2),a=t[0],d=t[1],o=(0,l.Z)(e),u=o.databaseMonth,h=o.data,f=(0,S.TA)({initialValues:{allHours:0},validationSchema:L,onSubmit:function(){var e=(0,x.Z)((0,m.Z)().mark((function e(n){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({id:h&&(null===u||void 0===u?void 0:u.id),columns:(0,s.Z)((0,s.Z)({},u),{},{allHours:n.allHours})});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:f,success:d}},T=function(){var e=k(),n=e.formik,t=e.success,r=(0,g.jsx)("div",{className:0===n.values.allHours?"text-danger":"",children:"Zapisz liczb\u0119 godzin"});return t.isLoading&&(r=(0,g.jsx)(a.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,g.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),t.isError&&(r=(0,g.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(z.Z,{onSubmit:n.handleSubmit,className:"",children:(0,g.jsxs)(z.Z.Group,{className:"my-1",children:[(0,g.jsx)("div",{className:"text-center fw-medium",children:n.values.allHours}),(0,g.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,g.jsx)("div",{className:"fw-medium",children:"0"}),(0,g.jsx)(z.Z.Range,{name:"allHours",min:0,max:320,value:n.values.allHours,onChange:n.handleChange,onBlur:n.handleBlur,className:"form-range custom-range mx-2 medium",style:{height:10,background:"linear-gradient(to right, olive 0%, red ".concat(n.values.allHours,"%, transparent ").concat(n.values.allHours,"%, transparent 100%)")}}),(0,g.jsx)("div",{className:"fw-medium",children:"320"})]}),(0,g.jsx)("div",{className:"text-center",children:(0,g.jsx)(b.Z,{type:"submit",variant:"info",size:"sm",className:"fw-medium mx-auto",children:r})})]})})})},B=function(){var e=(0,r.UO)().monthURL,n=e&&new Date(e),t=n&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n);return console.log("x",n),{monthURLStringFormat:t}},D=function(){var e=(0,r.UO)().monthURL,n=(0,l.Z)(e),t=n.databaseAllHours,a=n.dataCurrentHours,s=B().monthURLStringFormat;return(0,g.jsx)("header",{className:"me-3",children:(0,g.jsxs)(C.Z,{className:"mx-0 ms-sm-auto",children:[(0,g.jsx)(T,{}),(0,g.jsxs)("div",{className:"d-flex justify-content-center mb-1 fw-medium",children:[(0,g.jsx)("div",{className:"text-end",style:{width:"25%"},children:"Wszystkie"}),(0,g.jsxs)("div",{className:"text-center mx-2",style:{},children:[t," - ",a]}),(0,g.jsx)("div",{style:{width:"25%"},children:"Wolne"}),(0,g.jsx)("small",{className:"text-capitalize",children:s})]})]})})},R=t(9662),F=function(){var e,n=(0,r.UO)().monthURL,t=(0,l.Z)(n),s=t.databaseMonth,i=t.data,d=t.error;if(t.isLoading)e=(0,g.jsx)("main",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,g.jsx)(a.Z,{animation:"border",variant:"secondary",children:(0,g.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});else if(d){if("status"in d){var o="status"in d&&d.status;return(0,g.jsx)("main",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,g.jsx)("h3",{className:"text-danger",children:(0,g.jsxs)(g.Fragment,{children:[" B\u0142\u0105d: ",o," "]})})})}}else e=i?s?(0,g.jsxs)("main",{className:"d-flex flex-column",style:{height:"100vh"},children:[(0,g.jsx)(D,{}),(0,g.jsx)(U,{})]}):(0,g.jsx)("main",{className:"d-flex justify-content-center align-items-center text-center",style:{height:"100vh"},children:(0,g.jsxs)("h3",{className:"text-warning text-center",children:["Brak danych z miesi\u0105ca ",R.xk]})}):(0,g.jsx)("main",{className:"d-flex justify-content-center align-items-center text-center",style:{height:"100vh"},children:(0,g.jsx)("h3",{className:"text-warning text-center",children:"Brak miesi\u0119cy zapisanych w bazie danych. Zapisz miesi\u0105c w formularzu"})});return(0,g.jsx)(g.Fragment,{children:e})}},3572:function(e,n,t){t.d(n,{nr:function(){return i},qs:function(){return d}});var a=t(9439),r=t(3433),s=t(1413),i=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,t;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,s.Z)((0,s.Z)({},e),{},{columns:null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{days:e.days||[]})}))})})):[]},d=function(e,n,t){var i=e.source,d=e.destination;if(d&&(i.draggableId!==d.droppableId||i.index===d.index))if(i.droppableId!==d.droppableId){var o=n.findIndex((function(e){return e.id===i.droppableId})),l=n.findIndex((function(e){return e.id===d.droppableId})),u=(0,r.Z)(n[o].days),c=i.droppableId!==d.dropableId?(0,r.Z)(n[l].days):u,m=u.splice(i.index,1),h=(0,a.Z)(m,1)[0];c.splice(d.index,0,h);var x=(0,r.Z)(n);x[o]=(0,s.Z)((0,s.Z)({},n[o]),{},{days:u}),x[l]=(0,s.Z)((0,s.Z)({},n[l]),{},{days:c}),t(x)}else{var f=d.index,v=n.findIndex((function(e){return e.id===i.droppableId})),p=(0,r.Z)(n[v].days),y=p.splice(i.index,1),j=(0,a.Z)(y,1)[0];p.splice(f,0,j);var g=(0,r.Z)(n);g[v]=(0,s.Z)((0,s.Z)({},n[v]),{},{days:p}),t(g)}}}}]);
//# sourceMappingURL=101.8544e8f9.chunk.js.map