"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[389],{3786:function(n,r,e){var o=e(1419),t=e(184);r.Z=function(n){var r=(0,o.Z)().windowWidth;return(0,t.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100dvh",overflow:"hidden"},children:[(0,t.jsx)("aside",{style:{width:r>=500?"30%":0,maxWidth:"250px",height:"100%"}}),(0,t.jsx)("div",{className:"d-flex ps-1 flex-fill",style:{width:r>=500?"70%":"100%"},children:n.children})]})}},7129:function(n,r,e){var o=e(2791),t=e(5048),i=e(3920),d=e(7615);r.Z=function(){var n=(0,t.I0)(),r=(0,d.Jw)(),e=r.data,a=r.error,s=r.isLoading;(0,o.useEffect)((function(){n((0,i.eT)(e)),n((0,i.V2)(a)),n((0,i.jJ)(s))}),[e,a,s,n])}},1100:function(n,r,e){var o=e(1830),t=e.n(o),i=e(2791),d=e(4849),a=e(184);r.Z=function(n,r){(0,i.useEffect)((function(){if(n.isError){var r=n.error,e=r&&"status"in r&&r.status&&r.status;t().fire({text:"B\u0142\u0105d: ".concat(e||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var e=r;return n.isLoading&&(e=(0,a.jsx)(d.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:e}}},3234:function(n,r,e){var o=e(7689);r.Z=function(){var n=(0,o.TH)().pathname.slice(1);if(n&&/^\d{4}-\d{2}$/.test(n)){var r,e=n&&new Date(n);return{monthURLStringFormat:e&&(null===(r=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===r?void 0:r.format(e))}}return{monthURLStringFormat:""}}},9065:function(n,r,e){var o=e(7689);r.Z=function(){var n=(0,o.TH)().pathname.split("/").slice(-1)[0],r=null===n||void 0===n?void 0:n.slice(0,4),e=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:r,monthFromURL:e,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,r,e){var o=e(9439),t=e(2791);r.Z=function(){var n=(0,t.useState)(window.innerWidth),r=(0,o.Z)(n,2),e=r[0],i=r[1];return(0,t.useEffect)((function(){var n=function(){i(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:e}}},4389:function(n,r,e){e.r(r),e.d(r,{default:function(){return q}});var o=e(4849),t=e(5048),i=e(3234),d=e(3940),a=e(184),s=function(){var n,r,e,o,i,d=(0,t.v9)((function(n){return n.monthsPanel})).month;return(0,a.jsxs)("div",{className:"d-flex gap-2 mx-auto fw-medium pb-2 w-fit-content",children:[(0,a.jsx)("div",{children:"Wszystkie"}),(0,a.jsxs)("div",{children:[null===d||void 0===d||null===(n=d.calcHours)||void 0===n?void 0:n.allHours," -"," ",(0,a.jsx)("span",{className:"".concat((null===d||void 0===d||null===(r=d.calcHours)||void 0===r?void 0:r.currentHours)<=0?"text-danger":""),children:null===d||void 0===d||null===(e=d.calcHours)||void 0===e?void 0:e.currentHours})]}),(0,a.jsx)("div",{className:" ".concat((null===d||void 0===d||null===(o=d.calcHours)||void 0===o?void 0:o.currentHours)<=0?"text-danger":""),children:(null===d||void 0===d||null===(i=d.calcHours)||void 0===i?void 0:i.currentHours)<0?"Brak":"Dost\u0119pne"})]})},u=e(1413),c=e(9439),l=e(2791),v=e(793),m=e(9065),f=e(7615),h=e(2677),x=e(4165),p=e(5861),y=e(3360),b=e(7425),Z=e(1830),g=e.n(Z),j=e(1100),H=e(2767),w=e(6856),I=e(1578),N=function(n){var r,e;if(null!==n&&void 0!==n&&null!==(r=n.day)&&void 0!==r&&r.date){var o,t,i=new Date(n.day.date);return e=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(i),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,a.jsx)("div",{children:null===(o=n.day)||void 0===o?void 0:o.userName}),(0,a.jsx)("div",{children:"Poza"===(null===(t=n.day)||void 0===t?void 0:t.place)?(0,a.jsx)(I.ols,{style:{color:"rgb(80,173,150)"}}):(0,a.jsx)(w.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,a.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,a.jsx)("div",{children:e||""})})]})}return(0,a.jsx)("div",{children:"Brak danych"})},L=function(n){var r,e=(0,m.Z)(),o=e.yearFromURL,i=e.monthFromURL,d=(0,t.v9)((function(n){return n.monthsPanel})).month,s=(0,f.ur)(),l=(0,c.Z)(s,2),h=l[0],Z=l[1],w=(0,j.Z)(Z,(0,a.jsx)(b.GnT,{className:"text-danger"})).btnContent,I=function(){var r=(0,p.Z)((0,x.Z)().mark((function r(e,t){return(0,x.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:g().fire((0,H.p)("Usun\u0105\u0107 dzie\u0144")).then(function(){var r=(0,p.Z)((0,x.Z)().mark((function r(e){var a,s,c;return(0,x.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.isConfirmed){r.next=5;break}return s=function(n,r){var e,o=null===n||void 0===n||null===(e=n.columns)||void 0===e?void 0:e.map((function(n){var e,o=null===n||void 0===n||null===(e=n.days)||void 0===e?void 0:e.filter((function(n){return n.id!==r}));return(0,u.Z)((0,u.Z)({},n),{},{days:o})}));return(0,u.Z)((0,u.Z)({},n),{},{columns:o})},c=null===(a=(0,u.Z)({},null===d||void 0===d?void 0:d.columns[n.columnIdx].days.find((function(r){return(null===r||void 0===r?void 0:r.id)===n.day.id}))))||void 0===a?void 0:a.hours,r.next=5,h({year:o,month:i,colIdx:n.columnIdx,monthBody:(0,u.Z)((0,u.Z)({},d),{},{calcHours:(0,u.Z)((0,u.Z)({},d.calcHours),{},{currentHours:2!==n.columnIdx&&c?d.calcHours.currentHours+c:d.calcHours.currentHours,submittedHours:0===n.columnIdx&&c?d.calcHours.submittedHours-c:d.calcHours.submittedHours,acceptedHours:1===n.columnIdx&&c?d.calcHours.acceptedHours-c:d.calcHours.acceptedHours,rejectedHours:2===n.columnIdx&&c?d.calcHours.rejectedHours-c:d.calcHours.rejectedHours}),columns:s((0,u.Z)({},d),t).columns})});case 5:case"end":return r.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})));return function(n,e){return r.apply(this,arguments)}}();return(0,a.jsx)(v._l,{draggableId:n.day&&(null===n||void 0===n||null===(r=n.day)||void 0===r?void 0:r.id),index:n.dayIdx,isDragDisabled:!1,children:function(r,e){var o,t;return(0,a.jsx)("div",(0,u.Z)((0,u.Z)((0,u.Z)({},r.draggableProps),r.dragHandleProps),{},{ref:r.innerRef,className:"mb-2 bg-white rounded border ".concat(e.isDragging?"border-dark":"border-dark-subtle"," "),children:(0,a.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(o=n.day)||void 0===o?void 0:o.userColor),opacity:e.isDragging?.8:1},children:[(0,a.jsx)(N,{day:n.day}),(0,a.jsxs)(y.Z,{onClick:function(){return I(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:Z.isLoading,children:[(0,a.jsxs)("div",{children:[null===(t=n.day)||void 0===t?void 0:t.hours," h"]}),(0,a.jsx)("div",{className:"",children:w})]})]})}))}})},k=e(4261),P=function(n){return(0,a.jsx)(h.Z,{children:(0,a.jsx)(v.bK,{droppableId:n.column.id,children:function(r,e){return(0,a.jsxs)("div",(0,u.Z)((0,u.Z)({},r.droppableProps),{},{ref:r.innerRef,className:"p-1 h-100 overflow-hidden border border-1 border border-top-0",style:{backgroundColor:e.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)",height:"100%"},children:[Array.isArray(n.column.days)?n.column.days.map((function(r,e){return(0,a.jsx)(L,{day:r,columnIdx:n.columnIdx,dayIdx:e},(0,k.Z)())})):[],r.placeholder]}))}})})},F=function(n){var r,e,o,i=(0,t.v9)((function(n){return n.monthsPanel})).month;return(0,a.jsx)(a.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===i||void 0===i||null===(r=i.calcHours)||void 0===r?void 0:r.submittedHours},{headerText:"Przyznane:",counter:null===i||void 0===i||null===(e=i.calcHours)||void 0===e?void 0:e.acceptedHours},{headerText:"Odrzucone:",counter:null===i||void 0===i||null===(o=i.calcHours)||void 0===o?void 0:o.rejectedHours}].map((function(r){var e=r.headerText,o=r.counter;return(0,a.jsxs)(h.Z,{className:"text-dark-emphasis bg-white fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-white":"border-bottom border-2 border-dark-subtle"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[e," ","",o]},e)}))})},R=function(){var n=(0,l.useRef)(null),r=(0,l.useState)(0),e=(0,c.Z)(r,2),o=e[0],t=e[1];return{scrollableRef:n,thumbPosition:o,handleScroll:function(){var r=n.current;if(r){var e=r.scrollTop,o=r.scrollHeight,i=r.clientHeight;t(e/(o-i)*100)}}}},B=e(3433),T=e(1419),U=function(n){return null===n||void 0===n?void 0:n.reduce((function(n,r){return n+((null===r||void 0===r?void 0:r.hours)||0)}),0)},C=function(n){var r,e,o;return{submittedHours:U(null===(r=n[0])||void 0===r?void 0:r.days),acceptedHours:U(null===(e=n[1])||void 0===e?void 0:e.days),rejectedHours:U(null===(o=n[2])||void 0===o?void 0:o.days)}},z=function(){var n=(0,T.Z)().windowWidth,r=(0,m.Z)(),e=r.yearFromURL,o=r.monthFromURL,i=(0,f.CB)(),d=(0,c.Z)(i,1)[0],s=R(),h=s.scrollableRef,x=s.thumbPosition,p=s.handleScroll,y=(0,t.v9)((function(n){return n.monthsPanel})).month,b=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,u.Z)((0,u.Z)({},n),{},{days:[]})})):[]}(null===y||void 0===y?void 0:y.columns),Z=(0,l.useState)([]),g=(0,c.Z)(Z,2),j=g[0],H=g[1],w=(0,l.useState)(!1),I=(0,c.Z)(w,2),N=I[0],L=I[1],k=C(j),U=k.submittedHours,z=k.acceptedHours,S=k.rejectedHours;(0,l.useEffect)((function(){H(b)}),[y.columns]),(0,l.useEffect)((function(){var n;j.length>0&&d({year:e,month:o,monthBody:(0,u.Z)((0,u.Z)({},y),{},{columns:j,calcHours:(0,u.Z)((0,u.Z)({},null===y||void 0===y?void 0:y.calcHours),{},{currentHours:(null===y||void 0===y||null===(n=y.calcHours)||void 0===n?void 0:n.allHours)-U-z-S+S,submittedHours:U,acceptedHours:z,rejectedHours:S})})})}),[N]);var D="d-flex column-gap-1";return(0,a.jsxs)("div",{ref:h,onScroll:p,className:"p-0 overflow-y-scroll",style:{height:"fit-content",maxHeight:n>=500?"calc(100% - 32px)":"calc(100% - 32px - 2.5rem)"},children:[(0,a.jsx)("div",{className:"".concat(D," sticky-top"),children:(0,a.jsx)(F,{thumbPosition:x})}),(0,a.jsx)("div",{className:"".concat(D),children:(0,a.jsx)(v.Z5,{onDragEnd:function(n){!function(n,r,e){var o=n.source,t=n.destination;if(t&&(o.draggableId!==t.droppableId||o.index===t.index))if(o.droppableId!==t.droppableId){var i=null===r||void 0===r?void 0:r.findIndex((function(n){return n.id===o.droppableId})),d=null===r||void 0===r?void 0:r.findIndex((function(n){return n.id===t.droppableId})),a=r&&(0,B.Z)(r[i].days),s=o.droppableId!==t.dropableId?(0,B.Z)(r[d].days):a,l=a.splice(o.index,1),v=(0,c.Z)(l,1)[0];s.splice(t.index,0,v);var m=(0,B.Z)(r);m[i]=(0,u.Z)((0,u.Z)({},r[i]),{},{days:a}),m[d]=(0,u.Z)((0,u.Z)({},r[d]),{},{days:s}),e(m)}else{var f=t.index,h=r.findIndex((function(n){return n.id===o.droppableId})),x=(0,B.Z)(r[h].days),p=x.splice(o.index,1),y=(0,c.Z)(p,1)[0];x.splice(f,0,y);var b=(0,B.Z)(r);b[h]=(0,u.Z)((0,u.Z)({},r[h]),{},{days:x}),e(b)}}(n,j,H),L((function(n){return!n}))},children:null===j||void 0===j?void 0:j.map((function(n,r){return(0,a.jsx)(P,{column:n,columnIdx:r},n.id)}))})})]})},S=function(){return(0,a.jsxs)("div",{className:"py-1",style:{maxWidth:"1000px",width:"100%"},children:[(0,a.jsx)(s,{}),(0,a.jsx)(z,{})]})},D=function(){var n,r=(0,t.v9)((function(n){return n.monthsPanel})),e=r.month,s=r.error,u=r.isLoading,c=(0,i.Z)().monthURLStringFormat;if(u)n=(0,d.a)((0,a.jsx)(o.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(s){if("status"in s){var l="status"in s&&s.status;n=(0,d.a)((0,a.jsxs)("div",{className:"text-danger text-center ",children:[(0,a.jsxs)(a.Fragment,{children:[" B\u0142\u0105d: ",l," "]})," ",(0,a.jsx)("br",{}),(0,a.jsx)(a.Fragment,{children:"Od\u015bwie\u017c stron\u0119"})]}))}}else n=e&&""!==(null===e||void 0===e?void 0:e.id)?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(S,{})}):(0,d.a)((0,a.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",c,". Zapisz miesi\u0105c w ustawieniach."]}));return{requestState:n}},E=e(3786),W=e(9288),A=function(){var n=(0,t.I0)(),r=(0,m.Z)(),e=r.yearFromURL,o=r.monthFromURL,i=(0,f.a6)({year:e,month:o}),d=i.data,a=i.error,s=i.isLoading;return(0,l.useEffect)((function(){n((0,W.jw)(d)),n((0,W.MP)(a)),n((0,W.ed)(s))}),[d,a,s,n]),{}},O=e(7129),q=function(){A(),(0,O.Z)();var n=D().requestState;return(0,a.jsx)(E.Z,{children:n})}},2767:function(n,r,e){e.d(r,{Z:function(){return d},p:function(){return i}});var o=e(1830),t=e.n(o),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},d=function(n){t().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},3940:function(n,r,e){e.d(r,{a:function(){return t}});var o=e(184),t=function(n){return(0,o.jsx)("div",{className:" d-flex justify-content-center align-items-center fs-3 text-warning text-center",style:{maxWidth:"1000px",width:"100%",height:"100%"},children:n})}}}]);
//# sourceMappingURL=389.8f834ad2.chunk.js.map