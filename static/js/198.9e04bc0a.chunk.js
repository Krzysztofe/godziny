"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[198],{3786:function(n,e,r){var i=r(1419),t=r(184);e.Z=function(n){var e=(0,i.Z)().windowWidth;return(0,t.jsxs)("main",{className:"d-flex backgroundImage m-0",style:{height:"100vh",overflow:"hidden",position:"relative"},children:[(0,t.jsx)("aside",{style:{width:e>=500?"30%":0,maxWidth:"250px",height:"100%"}}),(0,t.jsx)("div",{className:"d-flex ps-1 flex-fill",style:{width:e>=500?"70%":"100%"},children:n.children})]})}},1014:function(n,e,r){r.d(e,{Z:function(){return a}});var i=r(3360),t=r(5048),o=r(7064),d=r(184),a=function(n){var e=(0,t.I0)();return(0,d.jsx)(d.Fragment,{children:n.isPrinted?(0,d.jsx)("div",{id:"opacityContainer",className:"fixed-top d-flex justify-content-center align-items-center ",onClick:function(r){return function(r){var i,t;"opacityContainer"!==(null===(i=r.target)||void 0===i?void 0:i.id)&&"noButton"!==(null===(t=r.target)||void 0===t?void 0:t.id)||(null!==n&&void 0!==n&&n.setIsPrinted&&(null===n||void 0===n||n.setIsPrinted(!1)),e((0,o.VG)("")))}(r)},style:{height:"100vh",zIndex:"1060",backgroundColor:"rgba(0,0,0,0.4)"},children:(0,d.jsxs)("div",{className:"p-4 bg-white rounded-1 fs-3 fw-medium alertAnimationDown",children:[n.header,(0,d.jsx)("div",{className:"w-fit-content m-auto",children:n.header.includes("Usun\u0105\u0107")?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.Z,{id:"noButton",children:"Nie"}),(0,d.jsx)(i.Z,{onClick:n.action,className:"bg-danger ms-4 border ",children:"Tak"})]}):(0,d.jsx)(i.Z,{id:"noButton",onClick:n.action,children:"Ok"})})]})}):(0,d.jsx)(d.Fragment,{})})}},1100:function(n,e,r){var i=r(4849),t=r(184);e.Z=function(n,e){var r=e;return n.isLoading&&(r=(0,t.jsx)(i.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:r}}},3234:function(n,e,r){var i=r(7689);e.Z=function(){var n=(0,i.TH)().pathname.slice(9);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,r=n&&new Date(n);return{monthURLStringFormat:r&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(r))}}return{monthURLStringFormat:""}}},9065:function(n,e,r){var i=r(7689);e.Z=function(){var n=(0,i.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),r=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:r,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,r){var i=r(9439),t=r(2791);e.Z=function(){var n=(0,t.useState)(window.innerWidth),e=(0,i.Z)(n,2),r=e[0],o=e[1];return(0,t.useEffect)((function(){var n=function(){o(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:r}}},3198:function(n,e,r){r.r(e),r.d(e,{default:function(){return M}});var i=r(3786),t=r(2791),o=r(5048),d=r(8755),a=r(7615),s=r(9065),l=function(){var n=(0,o.I0)(),e=(0,s.Z)(),r=e.yearFromURL,i=e.monthFromURL,l=(0,s.Z)().isMonthInURL,u=l?r:"",c=l?i:"",v=(0,a.a6)({year:u,month:c}),m=v.data,h=v.error,f=v.isLoading;(0,t.useEffect)((function(){n((0,d.jw)(m)),n((0,d.MP)(h)),n((0,d.ed)(f))}),[m,h,f,n])},u=r(4849),c=r(3234),v=r(3940),m=r(9439),h=r(7689),f=r(184),x=function(){var n,e,r,i,t=(0,o.v9)((function(n){return n.monthPanel})).month;return(0,f.jsxs)("div",{className:"d-flex gap-2 mx-auto fw-medium pb-2 w-fit-content",children:[(0,f.jsxs)("div",{children:["Wszystkie ",null===t||void 0===t||null===(n=t.calcHours)||void 0===n?void 0:n.allHours," - "]}),(0,f.jsxs)("div",{className:"".concat(t&&(null===t||void 0===t||null===(e=t.calcHours)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:[t&&(null===t||void 0===t||null===(r=t.calcHours)||void 0===r?void 0:r.currentHours)," ","",t&&(null===t||void 0===t||null===(i=t.calcHours)||void 0===i?void 0:i.currentHours)<0?"Brak":"Dost\u0119pne"]})]})},p=r(1413),y=r(793),g=r(2677),j=r(4165),b=r(5861),Z=r(3360),H=r(7425),w=r(1100),I=r(6856),N=r(1578),k=function(n){var e,r;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var i,t,o=new Date(n.day.date);return r=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(o),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between fs-7 ",children:[(0,f.jsx)("div",{children:null===(i=n.day)||void 0===i?void 0:i.userName}),(0,f.jsx)("div",{children:"Poza"===(null===(t=n.day)||void 0===t?void 0:t.place)?(0,f.jsx)(N.ols,{style:{color:"rgb(80,173,150)"}}):(0,f.jsx)(I.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,f.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,f.jsx)("div",{children:r||""})})]})}return(0,f.jsx)("div",{children:"Brak danych"})},L=function(n,e){var r=n.columns.map((function(n){var r,i=null===n||void 0===n||null===(r=n.days)||void 0===r?void 0:r.filter((function(n){return n.id!==e}));return(0,p.Z)((0,p.Z)({},n),{},{days:i})}));return(0,p.Z)((0,p.Z)({},n),{},{columns:r})},P=function(n,e,r){if(!n||!n.calcHours)return{currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0,allHours:0};var i=n.calcHours;return(0,p.Z)((0,p.Z)({},i),{},{currentHours:2!==e&&r?i.currentHours+r:i.currentHours,submittedHours:0===e&&r?i.submittedHours-r:i.submittedHours,acceptedHours:1===e&&r?i.acceptedHours-r:i.acceptedHours,rejectedHours:2===e&&r?i.rejectedHours-r:i.rejectedHours})},F=r(1014),R=function(n){(0,o.I0)();var e,r,i=(0,s.Z)(),d=i.yearFromURL,l=i.monthFromURL,u=(0,o.v9)((function(n){return n.monthPanel})).month,c=(0,a.ur)(),v=(0,m.Z)(c,2),h=v[0],x=v[1],g=(0,w.Z)(x,(0,f.jsx)(H.GnT,{className:"text-danger"})).btnContent,I=((0,o.v9)((function(n){return n.alert})).agree,(0,t.useState)("")),N=(0,m.Z)(I,2),R=N[0],U=N[1],S=(0,t.useState)(""),T=(0,m.Z)(S,2),C=T[0],z=T[1],D=(0,t.useState)(!1),B=(0,m.Z)(D,2),W=B[0],E=B[1],A=(0,p.Z)({},null===u||void 0===u||null===(e=u.columns[n.columnIdx].days)||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.day.id}))),O=function(){var e=(0,b.Z)((0,j.Z)().mark((function e(){var r;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===A||void 0===A?void 0:A.id)!==C){e.next=6;break}if(r=null===A||void 0===A?void 0:A.hours,e.t0=u,!e.t0){e.next=6;break}return e.next=6,h({year:d,month:l,colIdx:n.columnIdx,monthBody:(0,p.Z)((0,p.Z)({},u),{},{calcHours:P(u,+R,r),columns:L((0,p.Z)({},u),C).columns})});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.jsx)(y._l,{draggableId:n.day&&(null===n||void 0===n||null===(r=n.day)||void 0===r?void 0:r.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,r){var i,t;return(0,f.jsxs)("div",(0,p.Z)((0,p.Z)((0,p.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(r.isDragging?"border-dark":"border-dark-subtle"," "),children:[(0,f.jsx)(F.Z,{action:O,isPrinted:W,setIsPrinted:E,header:"Usun\u0105\u0107 dzie\u0144?"}),(0,f.jsxs)("div",{className:"px-1 py-2 py-sm-1 rounded",style:{borderTop:"8px solid ".concat(null===(i=n.day)||void 0===i?void 0:i.userColor),opacity:r.isDragging?.8:1},children:[(0,f.jsx)(k,{day:n.day}),(0,f.jsxs)(Z.Z,{onClick:function(){return e=n.columnIdx.toString(),r=n.day.id,U(e),z(r),void E(!0);var e,r},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0 fw-medium text-dark",disabled:x.isLoading,children:[(0,f.jsxs)("div",{children:[null===(t=n.day)||void 0===t?void 0:t.hours," h"]}),(0,f.jsx)("div",{children:g})]})]})]}))}})},U=r(4261),S=function(n){return(0,f.jsx)(g.Z,{children:(0,f.jsx)(y.bK,{droppableId:n.column.id,children:function(e,r){return(0,f.jsxs)("div",(0,p.Z)((0,p.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 overflow-hidden border border-1 border border-top-0",style:{backgroundColor:r.isDraggingOver?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.2)",height:"100%"},children:[Array.isArray(n.column.days)?n.column.days.map((function(e,r){return(0,f.jsx)(R,{day:e,columnIdx:n.columnIdx,dayIdx:r},(0,U.Z)())})):[],e.placeholder]}))}})})},T=function(n){var e,r,i,t=(0,o.v9)((function(n){return n.monthPanel})).month;return(0,f.jsx)(f.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===t||void 0===t||null===(e=t.calcHours)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===t||void 0===t||null===(r=t.calcHours)||void 0===r?void 0:r.acceptedHours},{headerText:"Odrzucone:",counter:null===t||void 0===t||null===(i=t.calcHours)||void 0===i?void 0:i.rejectedHours}].map((function(e){var r=e.headerText,i=e.counter;return(0,f.jsxs)(g.Z,{className:"text-dark-emphasis fs-responsive bg-white fw-medium p-1 d-flex align-items-center ".concat(0===n.thumbPosition?"border-bottom border-3 border-white":"border-bottom border-3"),style:{height:"35px"},children:[r," ","",i]},r)}))})},C=function(){var n=(0,t.useRef)(null),e=(0,t.useState)(0),r=(0,m.Z)(e,2),i=r[0],o=r[1];return{scrollableRef:n,thumbPosition:i,handleScroll:function(){var e=n.current;if(e){var r=e.scrollTop,i=e.scrollHeight,t=e.clientHeight;o(r/(i-t)*100)}}}},z=r(3433),D=r(1419),B=function(n){return null===n||void 0===n?void 0:n.reduce((function(n,e){return n+((null===e||void 0===e?void 0:e.hours)||0)}),0)},W=function(n){var e,r,i;return{submittedHours:B(null===(e=n[0])||void 0===e?void 0:e.days),acceptedHours:B(null===(r=n[1])||void 0===r?void 0:r.days),rejectedHours:B(null===(i=n[2])||void 0===i?void 0:i.days)}},E=function(){var n=(0,s.Z)(),e=n.yearFromURL,r=n.monthFromURL,i=(0,a.CB)(),d=(0,m.Z)(i,1)[0],l=(0,o.v9)((function(n){return n.monthPanel})).month,u=l&&function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,p.Z)((0,p.Z)({},n),{},{days:[]})})):[]}(null===l||void 0===l?void 0:l.columns),c=(0,t.useState)([]),v=(0,m.Z)(c,2),h=v[0],x=v[1],g=(0,t.useState)(!1),j=(0,m.Z)(g,2),b=j[0],Z=j[1],H=W(h),w=H.submittedHours,I=H.acceptedHours,N=H.rejectedHours,k=C(),L=k.scrollableRef,P=k.thumbPosition,F=k.handleScroll,R=(0,D.Z)().windowWidth;(0,t.useEffect)((function(){u&&x(u)}),[null===l||void 0===l?void 0:l.columns]),(0,t.useEffect)((function(){var n;h.length>0&&l&&d({year:e,month:r,monthBody:(0,p.Z)((0,p.Z)({},l),{},{columns:h,calcHours:(0,p.Z)((0,p.Z)({},null===l||void 0===l?void 0:l.calcHours),{},{currentHours:(null===l||void 0===l||null===(n=l.calcHours)||void 0===n?void 0:n.allHours)-w-I-N+N,submittedHours:w,acceptedHours:I,rejectedHours:N})})})}),[b]);var U="d-flex column-gap-1";return(0,f.jsxs)("div",{ref:L,onScroll:F,className:"overflow-y-scroll h-100",style:{maxHeight:R>=500?"calc(100% - 32px)":"calc(100% - 32px - 2.5rem)"},children:[(0,f.jsx)("div",{className:"".concat(U," sticky-top"),children:(0,f.jsx)(T,{thumbPosition:P})}),(0,f.jsx)("div",{className:"".concat(U),style:{minHeight:"calc(100% - 35px)"},children:(0,f.jsx)(y.Z5,{onDragEnd:function(n){l&&function(n,e,r,i){var t,o,d=n.source,a=n.destination;if(a&&(d.draggableId!==a.droppableId||d.index===a.index)){var s=null===(t=r[2])||void 0===t||null===(o=t.days[d.index])||void 0===o?void 0:o.hours;if(!("rejected"===d.droppableId&&e<s))if(d.droppableId!==a.droppableId){var l=null===r||void 0===r?void 0:r.findIndex((function(n){return n.id===d.droppableId})),u=null===r||void 0===r?void 0:r.findIndex((function(n){return n.id===a.droppableId})),c=r&&(0,z.Z)(r[l].days),v=d.droppableId!==a.dropableId?(0,z.Z)(r[u].days):c,h=c.splice(d.index,1),f=(0,m.Z)(h,1)[0];v.splice(a.index,0,f);var x=(0,z.Z)(r);x[l]=(0,p.Z)((0,p.Z)({},r[l]),{},{days:c}),x[u]=(0,p.Z)((0,p.Z)({},r[u]),{},{days:v}),i(x)}else{var y=a.index,g=r.findIndex((function(n){return n.id===d.droppableId})),j=(0,z.Z)(r[g].days),b=j.splice(d.index,1),Z=(0,m.Z)(b,1)[0];j.splice(y,0,Z);var H=(0,z.Z)(r);H[g]=(0,p.Z)((0,p.Z)({},r[g]),{},{days:j}),i(H)}}}(n,null===l||void 0===l?void 0:l.calcHours.currentHours,h,x),Z((function(n){return!n}))},children:null===h||void 0===h?void 0:h.map((function(n,e){return(0,f.jsx)(S,{column:n,columnIdx:e},n.id)}))})})]})},A=function(){var n=(0,h.TH)().pathname,e=(0,t.useState)(!1),r=(0,m.Z)(e,2),i=r[0],o=r[1];return(0,t.useEffect)((function(){o(!1);var n=setTimeout((function(){o(!0)}));return function(){clearTimeout(n)}}),[n]),(0,f.jsx)(f.Fragment,{children:i&&(0,f.jsxs)("div",{className:"py-1 opacityAnimation",style:{maxWidth:"1000px",width:"100%"},children:[(0,f.jsx)(x,{}),(0,f.jsx)(E,{})]})})},O=function(){var n,e=(0,o.v9)((function(n){return n.monthPanel})),r=e.month,i=e.error,t=e.isLoading,d=(0,c.Z)().monthURLStringFormat;if(t)n=(0,v.a)((0,f.jsx)(u.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(i){if("status"in i){var a="status"in i&&i.status;n=(0,v.a)((0,f.jsxs)("div",{className:"text-danger text-center ",children:[(0,f.jsxs)(f.Fragment,{children:[" B\u0142\u0105d: ",a," "]})," ",(0,f.jsx)("br",{}),(0,f.jsx)(f.Fragment,{children:"Od\u015bwie\u017c stron\u0119"})]}))}}else n=r&&""!==(null===r||void 0===r?void 0:r.id)?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(A,{})}):(0,v.a)((0,f.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",d,". Zapisz miesi\u0105c w ustawieniach."]}));return{requestState:n}},M=function(){l();var n=O().requestState;return(0,f.jsxs)(i.Z,{children:[n," "]})}},3940:function(n,e,r){r.d(e,{a:function(){return t}});var i=r(184),t=function(n){return(0,i.jsx)("div",{className:" d-flex justify-content-center align-items-center fs-3 text-warning text-center",style:{maxWidth:"1000px",width:"100%",height:"100%"},children:n})}}}]);
//# sourceMappingURL=198.9e04bc0a.chunk.js.map