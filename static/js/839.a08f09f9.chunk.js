"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[839],{5991:function(n,e,r){var d=r(184);e.Z=function(n){return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:n.name,children:n.label}),(0,d.jsx)("input",{id:n.name,type:n.type,name:n.name,value:n.value,onChange:n.handleChange,onBlur:n.handleBlur,placeholder:n.placeholder,style:{width:50}})]})}},1839:function(n,e,r){r.r(e),r.d(e,{default:function(){return k}});var d=r(1413),t=r(9439),o=r(2791),i=r(7371),a=r(7689),u=r(322),l=r(4165),s=r(3433),c=r(5861),v=r(6355),h=r(1830),f=r.n(h),m=r(184),p=function(n){return(0,m.jsxs)("div",{children:[(0,m.jsxs)("small",{children:["Imi\u0119:",n.day.userName]}),(0,m.jsx)("small",{children:n.day.date}),(0,m.jsxs)("small",{children:["Godz.: ",n.day.hours]})]})},y=r(9404),x=function(n){var e,r=(0,u.P2)(void 0),o=r.data,h=(r.error,(0,u.X)()),x=(0,t.Z)(h,2),b=x[0],Z=x[1],j=(0,a.UO)().monthURL,H=(0,y.Z)(j),g=H.databaseColumns,w=(H.databaseAllHours,H.databaseMonth),C=(H.acceptedHoursSum,H.rejectedHoursSum,H.submitedHoursSum,function(){var n=(0,c.Z)((0,l.Z)().mark((function n(e){return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var n=(0,c.Z)((0,l.Z)().mark((function n(r){var t;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.isConfirmed){n.next=4;break}return t=(0,s.Z)(g).map((function(n){return n&&n.days?(0,d.Z)((0,d.Z)({},n),{},{days:n.days.filter((function(n){return n.id!==e}))}):n})),n.next=4,b({id:o&&(null===w||void 0===w?void 0:w.id),columns:(0,d.Z)((0,d.Z)({},w),{},{columns:t})});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),I=(0,m.jsx)("div",{style:{border:"1px solid black"},children:(0,m.jsx)(i._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id.toString()),index:n.index,children:function(e){return(0,m.jsxs)("div",(0,d.Z)((0,d.Z)((0,d.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[(0,m.jsx)(p,{day:n.day}),(0,m.jsx)("button",{onClick:function(){return C(n.day.id)},children:(0,m.jsx)(v.AMf,{})})]}))}})});return Z.isLoading&&(I=(0,m.jsx)("div",{children:' "Loading" '})),Z.isError&&(I=(0,m.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,m.jsx)(m.Fragment,{children:I})},b=function(n){return(0,m.jsx)("div",{children:(0,m.jsx)(i.bK,{droppableId:n.column.id,children:function(e,r){var t,o;return(0,m.jsxs)("div",(0,d.Z)((0,d.Z)({},e.droppableProps),{},{ref:e.innerRef,style:{border:"1px solid black",width:"20vw",minHeight:"100vh",height:"fit-content"},children:[n.column.days&&n.column.days.length>0&&(null===(t=n.column)||void 0===t||null===(o=t.days)||void 0===o?void 0:o.map((function(n,e){return(0,m.jsx)(x,{day:n,index:e},crypto.randomUUID())}))),e.placeholder]}))}})})},Z=r(5048),j=r(5991),H=r(411),g=r(6712),w=r(3728),C=function(){var n=(0,a.UO)().monthURL,e=(0,Z.I0)(),r=(0,Z.v9)((function(n){return n.hoursPanel})).numberOfDays,o=(0,g.Z)(n),i=o.databaseMonth,s=o.data,v=(0,u.X)(),h=(0,t.Z)(v,2),f=h[0],p=h[1],y=function(){var n=(0,c.Z)((0,l.Z)().mark((function n(e){return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,f({id:s&&(null===i||void 0===i?void 0:i.id),columns:(0,d.Z)((0,d.Z)({},i),{},{allHours:+r})});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=(0,m.jsx)(w.pl2,{});return p.isLoading&&(x=(0,m.jsx)("div",{children:' "Loading" '})),p.isError&&(x=(0,m.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,m.jsxs)("form",{onSubmit:y,style:{display:"flex"},children:[(0,m.jsx)(j.Z,{type:"number",name:"numberOfDays",value:r,label:"Godziny w miesi\u0105cu ",placeholder:"Liczba",handleChange:function(n){var r=n.target.value;e((0,H.Cp)(r))}}),(0,m.jsx)("button",{type:"submit",children:x})]})},I=function(){var n=(0,a.UO)().monthURL,e=(0,y.Z)(n),r=e.databaseAllHours,d=e.dataCurrentHours,t=n&&new Date(n),o=t&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(t);return(0,m.jsxs)("header",{children:[(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsx)(C,{}),(0,m.jsx)("div",{style:{marginLeft:30},children:o})]}),(0,m.jsxs)("div",{children:["Wszystkie \xa0\xa0 ",r," - ",d," ","\xa0\xa0 Do wykorzystania"]})]})},S=r(3572),k=function(){var n=(0,u.P2)(void 0),e=n.data,r=n.error,l=(0,u.X)(),s=(0,t.Z)(l,2),c=s[0],v=s[1],h=(0,a.UO)().monthURL,f=(0,y.Z)(h),p=f.databaseAllHours,x=(f.databaseColumns,f.databaseAcceptedHours),Z=f.databaseRejectedHours,j=f.dataBaseSubmitedHours,H=f.databaseMonth,g=f.submitedHoursSum,w=f.acceptedHoursSum,C=f.rejectedHoursSum,k=(0,o.useState)([]),L=(0,t.Z)(k,2),A=L[0],B=L[1];(0,o.useEffect)((function(){e&&B(null===H||void 0===H?void 0:H.columns)}),[e,h]),console.log("columns",A),(0,o.useEffect)((function(){e&&(null===H||void 0===H?void 0:H.month)&&c({id:e&&(null===H||void 0===H?void 0:H.id),columns:(0,d.Z)((0,d.Z)({},H),{},{columns:A,currentHours:p-g-w-C+C,submitedHours:g,acceptedHours:w,rejectedHours:C})})}),[A,p,g,w,C]);var O=v.isError?(0,m.jsx)("div",{children:"B\u0142\u0105d"}):(0,m.jsx)("div",{children:(0,m.jsx)("div",{children:(0,m.jsxs)(i.Z5,{onDragEnd:function(n){return(0,S.qs)(n,A,B)},children:[(0,m.jsx)("div",{style:{display:"flex"},children:[{header:"Z\u0142o\u017cone:",counter:j},{header:"Zakceptowane:",counter:x},{header:"Odrzucone:",counter:Z}].map((function(n){var e=n.header,r=n.counter;return(0,m.jsxs)("h4",{style:{marginLeft:20,width:"20vw"},children:[e," ","",r]},e)}))}),(0,m.jsx)("div",{style:{display:"flex"},children:A&&A.length>0&&A.map((function(n,e){return(0,m.jsx)(b,{column:n},n.id)}))})]})})});return r&&"error"in r&&(O=(0,m.jsxs)("div",{style:{textAlign:"center"},children:[" ",r.error," "]})),(0,m.jsx)(m.Fragment,{children:void 0===H||null===H?(0,m.jsx)("div",{style:{textAlign:"center"},children:"Wybierz miesi\u0105c"}):(0,m.jsx)("div",{style:{display:"flex",marginLeft:"30vw"},children:(0,m.jsxs)("div",{children:[(0,m.jsx)(I,{}),O]})})})}},9404:function(n,e,r){var d=r(1413),t=r(322),o=r(3572);e.Z=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,t.P2)(void 0).data,r=e&&Object.keys(e),i=r&&Object.values(e).flat().map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{id:r[e]})})),a=(0,o.nr)(i),u=e&&a.length>0?null===a||void 0===a?void 0:a.find((function(e){return e.month===n})):void 0,l=e&&(null===u||void 0===u?void 0:u.columns),s=e?null===u||void 0===u?void 0:u.allHours:"",c=e?null===u||void 0===u?void 0:u.currentHours:"",v=e?null===u||void 0===u?void 0:u.submitedHours:"",h=e?null===u||void 0===u?void 0:u.acceptedHours:"",f=e?null===u||void 0===u?void 0:u.rejectedHours:"",m=e&&a.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[0].days.reduce((function(n,e){return n+e.hours}),0):0,p=e&&a.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[1].days.reduce((function(n,e){return n+e.hours}),0):0,y=e&&a.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[2].days.reduce((function(n,e){return n+e.hours}),0):0;return{data:e,databaseMonthsId:r,databaseMonthsCollection:a,databaseMonth:u,databaseColumns:l,databaseAllHours:s,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:f,dataBaseSubmitedHours:v,acceptedHoursSum:p,rejectedHoursSum:y,submitedHoursSum:m}}},6712:function(n,e,r){var d=r(1413),t=r(322),o=r(3572);e.Z=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,t.P2)(void 0).data,r=e&&Object.keys(e),i=r&&Object.values(e).flat().map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{id:r[e]})})),a=(0,o.nr)(i),u=e&&a.length>0?null===a||void 0===a?void 0:a.find((function(e){return e.month===n})):void 0,l=e&&(null===u||void 0===u?void 0:u.columns),s=e?null===u||void 0===u?void 0:u.allHours:"",c=e?null===u||void 0===u?void 0:u.currentHours:"",v=e?null===u||void 0===u?void 0:u.submitedHours:"",h=e?null===u||void 0===u?void 0:u.acceptedHours:"",f=e?null===u||void 0===u?void 0:u.rejectedHours:"",m=e&&a.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[0].days.reduce((function(n,e){return n+e.hours}),0):0,p=e&&a.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[1].days.reduce((function(n,e){return n+e.hours}),0):0,y=e&&a.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[2].days.reduce((function(n,e){return n+e.hours}),0):0,x=e&&a?a.map((function(n){return n.month})):[];return{string:x.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)})),data:e,databaseMonthsId:r,databaseMonthsCollection:a,databaseMonth:u,databaseColumns:l,databaseAllHours:s,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:f,dataBaseSubmitedHours:v,acceptedHoursSum:p,rejectedHoursSum:y,submitedHoursSum:m,databaseMonthsDates:x}}},3572:function(n,e,r){r.d(e,{nr:function(){return i},qs:function(){return a}});var d=r(9439),t=r(3433),o=r(1413),i=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){var e,r;return(null===n||void 0===n||null===(e=n.columns)||void 0===e?void 0:e.every((function(n){return n.hasOwnProperty("days")})))?n:(0,o.Z)((0,o.Z)({},n),{},{columns:null===n||void 0===n||null===(r=n.columns)||void 0===r?void 0:r.map((function(n){return(0,o.Z)((0,o.Z)({},n),{},{days:n.days||[]})}))})})):[]},a=function(n,e,r){var i=n.source,a=n.destination;if(a&&(i.draggableId!==a.droppableId||i.index===a.index))if(i.droppableId!==a.droppableId){var u=e.findIndex((function(n){return n.id===i.droppableId})),l=e.findIndex((function(n){return n.id===a.droppableId})),s=(0,t.Z)(e[u].days),c=i.droppableId!==a.dropableId?(0,t.Z)(e[l].days):s,v=s.splice(i.index,1),h=(0,d.Z)(v,1)[0];c.splice(a.index,0,h);var f=(0,t.Z)(e);f[u]=(0,o.Z)((0,o.Z)({},e[u]),{},{days:s}),f[l]=(0,o.Z)((0,o.Z)({},e[l]),{},{days:c}),r(f)}else{var m=a.index,p=e.findIndex((function(n){return n.id===i.droppableId})),y=(0,t.Z)(e[p].days),x=y.splice(i.index,1),b=(0,d.Z)(x,1)[0];y.splice(m,0,b);var Z=(0,t.Z)(e);Z[p]=(0,o.Z)((0,o.Z)({},e[p]),{},{days:y}),r(Z)}}}}]);
//# sourceMappingURL=839.a08f09f9.chunk.js.map