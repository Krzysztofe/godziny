"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[937],{9662:function(n,e,t){t.d(e,{j0:function(){return l},nt:function(){return d},st:function(){return c},vs:function(){return s},xk:function(){return u}});var r=new Date,o=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(r)},i=new Date(r.getTime()+12096e5),a=new Date(r.getTime()+5184e6),l=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),d=(String(r.getDate()).padStart(2,"0"),o(r),o(i)),c=o(a),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},1100:function(n,e,t){var r=t(1830),o=t.n(r),i=t(2791),a=t(4849),l=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;o().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,l.jsx)(a.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(3433),o=t(5048);e.Z=function(){var n,e=(0,o.v9)((function(n){return n.infoMonths})).infoMonths,t=e&&(null===(n=(0,r.Z)(e))||void 0===n?void 0:n.sort((function(n,e){return new Date(n).getTime()-new Date(e).getTime()}))),i=null===t||void 0===t?void 0:t.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)}));return{sortedInfoMonths:t,databaseMonthsDatesToString:i}}},3234:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.UO)().monthURL;if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},6937:function(n,e,t){t.r(e),t.d(e,{default:function(){return K}});var r=t(5048),o=t(9662),i=t(1413),a=t(9439),l=t(2791),s=t(793),d=t(7022),c=t(9743),u=t(7762),m=t(3433),v=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,i.Z)((0,i.Z)({},n),{},{days:[]})})):[]},f=function(){var n,e=(0,r.v9)((function(n){return n.monthsPanel})).month,t=0,o=0,i=0,a=v(null===e||void 0===e?void 0:e.columns),l=(0,u.Z)(a);try{for(l.s();!(n=l.n()).done;){var s=n.value,d=(s.days||[]).reduce((function(n,e){var t;return n+(null!==(t=null===e||void 0===e?void 0:e.hours)&&void 0!==t?t:0)}),0);switch(s.id){case"submitted":t=d;break;case"accepted":o=d;break;case"rejected":i=d}}}catch(c){l.e(c)}finally{l.f()}return{submittedHoursSum:t,acceptedHoursSum:o,rejectedHoursSum:i}},h=t(9065),x=t(7615),p=t(2677),g=t(4165),y=t(5861),b=t(3360),j=t(7425),Z=t(1830),w=t.n(Z),N=t(1100),I=t(2767),D=t(6856),L=t(1578),S=t(184),T=function(n){var e,t;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var r,o,i=new Date(n.day.date);return t=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(i),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"d-flex justify-content-between fs-7",children:[(0,S.jsx)("div",{children:null===(r=n.day)||void 0===r?void 0:r.userName}),(0,S.jsx)("div",{children:"Poza"===(null===(o=n.day)||void 0===o?void 0:o.place)?(0,S.jsx)(L.ols,{style:{color:"rgb(80,173,150)"}}):(0,S.jsx)(D.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,S.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,S.jsx)("div",{children:t||""})})]})}return(0,S.jsx)("div",{children:"Brak danych"})},k=function(n){var e,t,o=(0,h.Z)(),l=o.yearFromURL,d=o.monthFromURL,c=(0,r.v9)((function(n){return n.monthsPanel})).month,u=(0,x.ur)(),m=(0,a.Z)(u,2),v=m[0],f=m[1],p=(0,N.Z)(f,(0,S.jsx)(j.GnT,{className:"text-danger"})).btnContent,Z=function(){var e=(0,y.Z)((0,g.Z)().mark((function e(t,r){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w().fire((0,I.p)("Chcesz usuni\u0105\u0107 dzie\u0144")).then(function(){var e=(0,y.Z)((0,g.Z)().mark((function e(o){var i,a,s;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isConfirmed){e.next=4;break}return s=null===c||void 0===c||null===(i=c.columns[t])||void 0===i||null===(a=i.days)||void 0===a?void 0:a.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==r})),e.next=4,v({year:l,month:d,colIdx:n.columnIdx,daysBody:s||[]});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return console.log("",null===(e=n.day)||void 0===e?void 0:e.userColor),(0,S.jsx)(s._l,{draggableId:n.day&&(null===n||void 0===n||null===(t=n.day)||void 0===t?void 0:t.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,t){var r,o;return(0,S.jsx)("div",(0,i.Z)((0,i.Z)((0,i.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(t.isDragging?"border-secondary-subtle":"border-transparent"," "),children:(0,S.jsxs)("div",{className:"mb-2 px-1 py-2 py-sm-1",style:{borderTop:"8px solid ".concat(null===(r=n.day)||void 0===r?void 0:r.userColor),opacity:t.isDragging?.8:1},children:[(0,S.jsx)(T,{day:n.day}),(0,S.jsxs)(b.Z,{onClick:function(){return Z(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:f.isLoading,children:[(0,S.jsxs)("div",{className:"d-flex align-items-center fs-7",children:[null===(o=n.day)||void 0===o?void 0:o.hours," h"]}),(0,S.jsx)("div",{className:"d-flex align-items-center",children:p})]})]})}))}})},U=function(n){return(0,S.jsx)(p.Z,{className:"p-0",children:(0,S.jsx)(s.bK,{droppableId:n.column.id,children:function(e,t){return(0,S.jsxs)("div",(0,i.Z)((0,i.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 ".concat(t.isDraggingOver?"bg-dark-subtle":"bg-primary"),children:[Array.isArray(n.column.days)?n.column.days.map((function(e,t){return(0,S.jsx)(k,{day:e,columnIdx:n.columnIdx,dayIdx:t},crypto.randomUUID())})):[],e.placeholder]}))}})})},z=function(n){var e,t,o,i=(0,r.v9)((function(n){return n.monthsPanel})).month;return(0,S.jsx)(S.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===i||void 0===i||null===(e=i.calc)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===i||void 0===i||null===(t=i.calc)||void 0===t?void 0:t.acceptedHours},{headerText:"Odrzucone:",counter:null===i||void 0===i||null===(o=i.calc)||void 0===o?void 0:o.rejectedHours}].map((function(e){var t=e.headerText,r=e.counter;return(0,S.jsxs)(p.Z,{className:"bg-primary text-dark-emphasis fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-primary":" border-bottom border-2 border-white"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[t," ","",r]},t)}))})},C=function(){var n=(0,l.useRef)(null),e=(0,l.useState)(0),t=(0,a.Z)(e,2),r=t[0],o=t[1];return{scrollableRef:n,thumbPosition:r,handleScroll:function(){var e=n.current;if(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;o(t/(r-i)*100)}}}},F=function(){var n=(0,h.Z)(),e=n.yearFromURL,t=n.monthFromURL,o=(0,x.CB)(),u=(0,a.Z)(o,1)[0],p=f(),g=p.submittedHoursSum,y=p.acceptedHoursSum,b=p.rejectedHoursSum,j=C(),Z=j.scrollableRef,w=j.thumbPosition,N=j.handleScroll,I=(0,r.v9)((function(n){return n.monthsPanel})).month,D=v(null===I||void 0===I?void 0:I.columns),L=(0,l.useState)([]),T=(0,a.Z)(L,2),k=T[0],F=T[1];(0,l.useEffect)((function(){F(D)}),[I]),(0,l.useEffect)((function(){var n,r;k.length>0&&u({year:e,month:t,monthBody:(0,i.Z)((0,i.Z)({},I),{},{columns:k,calc:(0,i.Z)((0,i.Z)({},null===I||void 0===I?void 0:I.calc),{},{currentHours:(null!==(n=null===I||void 0===I||null===(r=I.calc)||void 0===r?void 0:r.allHours)&&void 0!==n?n:0)-g-y-b+b,submittedHours:g,acceptedHours:y,rejectedHours:b})})})}),[k]);var H="col-sm-8 col-md-9 col-xl-8 d-flex column-gap-1 ms-sm-auto mx-xl-auto  px-1";return(0,S.jsx)(d.Z,{fluid:!0,ref:Z,onScroll:N,className:" mb-1 overflow-y-scroll",children:(0,S.jsxs)("div",{children:[(0,S.jsx)(c.Z,{className:"".concat(H," sticky-top  "),children:(0,S.jsx)(z,{thumbPosition:w})}),(0,S.jsx)(c.Z,{className:H,style:{height:"fit-content"},children:(0,S.jsx)(s.Z5,{onDragEnd:function(n){!function(n,e,t){var r=n.source,o=n.destination;if(o&&(r.draggableId!==o.droppableId||r.index===o.index))if(r.droppableId!==o.droppableId){var l=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===r.droppableId})),s=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===o.droppableId})),d=e&&(0,m.Z)(e[l].days),c=r.droppableId!==o.dropableId?(0,m.Z)(e[s].days):d,u=d.splice(r.index,1),v=(0,a.Z)(u,1)[0];c.splice(o.index,0,v);var f=(0,m.Z)(e);f[l]=(0,i.Z)((0,i.Z)({},e[l]),{},{days:d}),f[s]=(0,i.Z)((0,i.Z)({},e[s]),{},{days:c}),t(f)}else{var h=o.index,x=e.findIndex((function(n){return n.id===r.droppableId})),p=(0,m.Z)(e[x].days),g=p.splice(r.index,1),y=(0,a.Z)(g,1)[0];p.splice(h,0,y);var b=(0,m.Z)(e);b[x]=(0,i.Z)((0,i.Z)({},e[x]),{},{days:p}),t(b)}}(n,k,F)},children:null===k||void 0===k?void 0:k.map((function(n,e){return(0,S.jsx)(U,{column:n,columnIdx:e},n.id)}))})})]})})},H=t(7923),P=t(7858),R=t(23),B=t(1087),M=t(2218),E=function(){var n=(0,M.Z)(),e=n.sortedInfoMonths,t=n.databaseMonthsDatesToString,o=(0,r.v9)((function(n){return n.infoMonths})).infoMonths,i=(0,h.Z)(),a=i.monthURL,l=i.isMonthInURL?new Date(a):null,s=l&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(l);return(0,S.jsx)(R.Z,{className:"monthListContainer bg-white rounded-0 border border-primary",children:o&&0!==o.length?null===t||void 0===t?void 0:t.map((function(n,t){return(0,S.jsx)(R.Z.Item,{className:"border-0 p-0 px-1",children:(0,S.jsx)(B.rU,{to:"/".concat(null===e||void 0===e?void 0:e[t]),className:"".concat(s===n&&s?"text-warning":"text-reset"," text-decoration-none text-capitalize"),children:n})},n)})):(0,S.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},A=t(3234),O=function(){var n=(0,l.useState)(!1),e=(0,a.Z)(n,2),t=e[0],r=e[1],o=(0,A.Z)().monthURLStringFormat;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(b.Z,{onClick:function(){return r(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,size:"sm",className:"p-0 px-1 border border-primary w-100 mt-1 text-start bg-white fw-medium d-flex justify-content-between align-items-center",children:[o,(0,S.jsx)(D.x3N,{className:"fs-3 me-1",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,S.jsx)(P.Z,{in:t,children:(0,S.jsx)("div",{children:(0,S.jsx)(E,{})})})]})},Y=function(){return(0,S.jsx)("header",{className:"me-3",children:(0,S.jsx)(d.Z,{fluid:!0,children:(0,S.jsxs)(c.Z,{className:"col-sm-8 col-md-9 col-xl-8 col-xxl-8 ms-sm-auto mx-xl-auto px-1 ",children:[(0,S.jsx)(O,{}),(0,S.jsx)(H.Z,{})]})})})},$=t(4849),G=function(){var n,e=(0,r.v9)((function(n){return n.infoMonths})).infoMonths,t=(0,r.v9)((function(n){return n.monthsPanel})),i=t.month,a=t.error;if(t.isLoading)n=(0,S.jsx)($.Z,{animation:"border",variant:"secondary",children:(0,S.jsx)("span",{className:"visually-hidden",children:"Loading..."})});else if(a){if("status"in a){var l="status"in a&&a.status;n=(0,S.jsx)("h3",{className:"text-danger mx-auto ",children:(0,S.jsxs)(S.Fragment,{children:[" B\u0142\u0105d: ",l," "]})})}}else n=e&&0!==(null===e||void 0===e?void 0:e.length)?i&&""!==(null===i||void 0===i?void 0:i.id)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Y,{}),(0,S.jsx)(F,{})]}):(0,S.jsxs)("h3",{className:"text-warning",children:["Brak danych z miesi\u0105ca ",o.xk,". Zapisz miesi\u0105c za pomoc\u0105 formularza"]}):(0,S.jsx)("h5",{className:"text-warning",children:"Brak miesi\u0119cy zapisanych w bazie danych. Zapisz miesi\u0105c za pomoc\u0105 formularza"});return{panelContent:n}},K=(t(5293),function(){var n=(0,r.v9)((function(n){return n.infoMonths})).infoMonths,e=(0,r.v9)((function(n){return n.monthsPanel})),t=e.month,o=e.error,i=e.isLoading,a=G().panelContent,l="d-flex flex-column backgroundImage";return i&&!t?l="d-flex align-items-center justify-content-center":!o&&t&&n&&0!==(null===n||void 0===n?void 0:n.length)||(l="d-flex justify-content-end align-items-center p-1 pe-sm-5 col-sm-7 col-md-8 ms-auto mx-xxl-auto"),(0,S.jsx)("main",{className:l,style:{height:"100vh"},children:a})})},7923:function(n,e,t){var r=t(5048),o=t(3234),i=t(184);e.Z=function(){var n,e,t,a,l,s=(0,r.v9)((function(n){return n.monthsPanel})).month,d=(0,o.Z)().monthURLStringFormat;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:" d-flex justify-content-center my-2 fw-medium position-relative",children:[(0,i.jsx)("div",{className:"text-capitalize fw-medium d-none d-md-block  position-absolute end-0",children:d}),(0,i.jsx)("div",{className:"col-3 text-end",children:"Wszystkie"}),(0,i.jsxs)("div",{className:"mx-2",children:[null===s||void 0===s||null===(n=s.calc)||void 0===n?void 0:n.allHours," -"," ",(0,i.jsx)("span",{className:"".concat((null===s||void 0===s||null===(e=s.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===s||void 0===s||null===(t=s.calc)||void 0===t?void 0:t.currentHours})]}),(0,i.jsx)("div",{className:"col-3 ".concat((null===s||void 0===s||null===(a=s.calc)||void 0===a?void 0:a.currentHours)<=0?"text-danger":""),children:(null===s||void 0===s||null===(l=s.calc)||void 0===l?void 0:l.currentHours)<0?"Brak":"Dost\u0119pne"})]})})}},2767:function(n,e,t){t.d(e,{Z:function(){return a},p:function(){return i}});var r=t(1830),o=t.n(r),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},a=function(n){o().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},5293:function(){}}]);
//# sourceMappingURL=937.c6c890af.chunk.js.map