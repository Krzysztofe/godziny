"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[147],{147:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var a=r(7689),t=r(1413),s=r(9439),d=r(793),i=r(3572),o=r(6712),l=r(2791),u=r(322),c=r(4165),m=r(3433),v=r(5861),h=r(1830),f=r.n(h),x=r(6856),p=r(1578),y=r(3853),j=r(184),b=function(e){var n=(0,a.UO)().monthURL,r=n&&new Date(n),t=(r&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r).slice(0,-5),e.day.date.slice(5));"0"===t[0]&&t.slice(1);return(0,j.jsxs)("div",{className:"px-1 py-2 py-sm-1",children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between",style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[(0,j.jsx)("div",{children:e.day.userName}),(0,j.jsxs)("div",{children:[e.day.hours," ",(0,j.jsx)(y.TCC,{className:"text-secondary"})]})]}),(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("div",{children:t}),(0,j.jsx)("div",{children:"Poza"===e.day.place?(0,j.jsx)(p.ols,{className:"text-success"}):(0,j.jsx)(x.P8U,{className:"text-danger"})})]})]})},Z=r(3360),g=function(e){var n,r=(0,u.S$)(void 0),i=r.data,l=(r.error,(0,u.CB)()),h=(0,s.Z)(l,2),x=h[0],p=h[1],y=(0,a.UO)().monthURL,g=(0,o.Z)(y),H=g.databaseColumns,w=(g.databaseAllHours,g.databaseMonth),N=(g.acceptedHoursSum,g.rejectedHoursSum,g.submitedHoursSum,function(){var e=(0,v.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var e=(0,v.Z)((0,c.Z)().mark((function e(r){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=4;break}return a=(0,m.Z)(H).map((function(e){return e&&e.days?(0,t.Z)((0,t.Z)({},e),{},{days:e.days.filter((function(e){return e.id!==n}))}):e})),e.next=4,x({id:i&&(null===w||void 0===w?void 0:w.id),columns:(0,t.Z)((0,t.Z)({},w),{},{columns:a})});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),C=(0,j.jsx)(d._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id.toString()),index:e.index,children:function(n){return(0,j.jsxs)("div",(0,t.Z)((0,t.Z)((0,t.Z)({className:"bg-white card mb-2"},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[(0,j.jsx)(b,{day:e.day}),(0,j.jsx)(Z.Z,{variant:"secondary",size:"sm",className:"rounded-top-0 w-100 fw-medium",onClick:function(){return N(e.day.id)},children:"Usu\u0144"})]}))}});return p.isLoading&&(C=(0,j.jsx)("div",{children:' "Loading" '})),p.isError&&(C=(0,j.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,j.jsx)(j.Fragment,{children:C})},H=function(e){return(0,j.jsx)("div",{className:"w-100",children:(0,j.jsx)(d.bK,{droppableId:e.column.id,children:function(n,r){var a,s;return(0,j.jsxs)("div",(0,t.Z)((0,t.Z)({},n.droppableProps),{},{ref:n.innerRef,className:"p-1 bg-secondary-subtle",style:{height:"100%"},children:[e.column.days&&e.column.days.length>0&&(null===(a=e.column)||void 0===a||null===(s=a.days)||void 0===s?void 0:s.map((function(e,n){return(0,j.jsx)(g,{day:e,index:n},crypto.randomUUID())}))),n.placeholder]}))}})})},w=function(){var e=(0,a.UO)().monthURL,n=(0,o.Z)(e),r=n.databaseAcceptedHours,t=n.databaseRejectedHours,s=n.dataBaseSubmitedHours;return(0,j.jsx)(j.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:s},{headerText:"Przyznane:",counter:r},{headerText:"Odrzucone:",counter:t}].map((function(e){var n=e.headerText,r=e.counter;return(0,j.jsxs)("div",{className:"p-1 bg-secondary-subtle text-dark-emphasis fw-medium w-100 ",style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[n," ","",r]},n)}))})},N=r(7022),C=function(){var e=(0,a.UO)().monthURL,n=(0,o.Z)(e),r=n.data,c=(n.error,n.databaseAllHours),m=n.databaseColumns,v=(n.databaseAcceptedHours,n.databaseRejectedHours,n.dataBaseSubmitedHours,n.dataCurrentHours),h=n.databaseMonth,f=n.submitedHoursSum,x=n.acceptedHoursSum,p=n.rejectedHoursSum,y=(0,u.CB)(),b=(0,s.Z)(y,2),Z=b[0],g=(b[1],(0,l.useState)([])),C=(0,s.Z)(g,2),S=C[0],U=C[1];return(0,l.useEffect)((function(){r&&h&&U(m)}),[r,e]),(0,l.useEffect)((function(){r&&(null===S||void 0===S?void 0:S.length)>1&&(null===h||void 0===h?void 0:h.month)&&Z({id:r&&(null===h||void 0===h?void 0:h.id),columns:(0,t.Z)((0,t.Z)({},h),{},{columns:S,currentHours:c-f-x-p+p,submitedHours:f,acceptedHours:x,rejectedHours:p})})}),[S,c,v]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("main",{className:" mb-2 overflow-y-scroll ",children:[(0,j.jsx)(N.Z,{className:"mx-0 ms-sm-auto sticky-top d-flex column-gap-2",children:(0,j.jsx)(w,{})}),(0,j.jsx)(N.Z,{className:"mx-0 ms-sm-auto mb-5 d-flex column-gap-2",style:{height:"fit-content"},children:(0,j.jsx)(d.Z5,{onDragEnd:function(e){return(0,i.qs)(e,S,U)},children:S&&S.length>0&&S.map((function(e,n){return(0,j.jsx)(H,{column:e},e.id)}))})})]})})},S=r(3027),U=r(4849),z=r(5705),I=r(8007),k=I.Ry({allHours:I.Rx().max(320,"Max. 320").required("Podaj liczb\u0119 godzin")}),B=function(){var e=(0,a.UO)().monthURL,n=(0,u.CB)(),r=(0,s.Z)(n,2),d=r[0],i=r[1],l=(0,o.Z)(e),m=l.databaseMonth,h=l.data,f=(0,z.TA)({initialValues:{allHours:0},validationSchema:k,onSubmit:function(){var e=(0,v.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({id:h&&(null===m||void 0===m?void 0:m.id),columns:(0,t.Z)((0,t.Z)({},m),{},{allHours:n.allHours})});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:f,success:i}},R=function(){var e=B(),n=e.formik,r=e.success,a=(0,j.jsx)("div",{className:0===n.values.allHours?"text-danger":"",children:"Zapisz liczb\u0119 godzin"});return r.isLoading&&(a=(0,j.jsx)(U.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(a=(0,j.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(S.Z,{onSubmit:n.handleSubmit,className:"",children:(0,j.jsxs)(S.Z.Group,{className:"my-1",children:[(0,j.jsx)("div",{className:"text-center fw-medium",children:n.values.allHours}),(0,j.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,j.jsx)("div",{className:"fw-medium",children:"0"}),(0,j.jsx)(S.Z.Range,{name:"allHours",min:0,max:320,value:n.values.allHours,onChange:n.handleChange,onBlur:n.handleBlur,className:"form-range custom-range mx-2 medium",style:{height:10,background:"linear-gradient(to right, olive 0%, red ".concat(n.values.allHours,"%, transparent ").concat(n.values.allHours,"%, transparent 100%)")}}),(0,j.jsx)("div",{className:"fw-medium",children:"320"})]}),(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(Z.Z,{type:"submit",variant:"secondary",size:"sm",className:"fw-medium mx-auto",children:a})})]})})})},T=function(){var e=(0,a.UO)().monthURL,n=(0,o.Z)(e),r=n.databaseAllHours,t=n.dataCurrentHours,s=e&&new Date(e);s&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(s);return(0,j.jsx)("header",{children:(0,j.jsxs)(N.Z,{className:"mx-0 ms-sm-auto",children:[(0,j.jsx)(R,{}),(0,j.jsxs)("div",{className:"d-flex justify-content-center mb-1 fw-medium",children:[(0,j.jsx)("div",{className:"text-end",style:{width:"25%"},children:"Wszystkie"}),(0,j.jsxs)("div",{className:"text-center mx-2",style:{},children:[r," - ",t]}),(0,j.jsx)("div",{style:{width:"25%"},children:"Wolne"})]})]})})},L=function(){var e=(0,a.UO)().monthURL,n=(0,o.Z)(e).databaseMonth;return(0,j.jsx)(j.Fragment,{children:n&&null!==n?(0,j.jsxs)("div",{className:"d-flex flex-column",style:{height:"100vh"},children:[(0,j.jsx)(T,{}),(0,j.jsx)(C,{})]}):(0,j.jsx)("main",{style:{textAlign:"center"},children:"Brak danych, wybierz miesi\u0105c"})})}},6712:function(e,n,r){var a=r(1413),t=r(322),s=r(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,t.S$)(void 0),r=n.data,d=n.error,i=r&&Object.keys(r),o=i&&Object.values(r).flat().map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{id:i[n]})})),l=(0,s.nr)(o),u=r&&l.length>0?null===l||void 0===l?void 0:l.find((function(n){return n.month===e})):void 0,c=r&&(null===u||void 0===u?void 0:u.columns),m=r?null===u||void 0===u?void 0:u.allHours:"",v=r?null===u||void 0===u?void 0:u.currentHours:"",h=r?null===u||void 0===u?void 0:u.submitedHours:"",f=r?null===u||void 0===u?void 0:u.acceptedHours:"",x=r?null===u||void 0===u?void 0:u.rejectedHours:"",p=r&&l.length>0&&null!==c&&void 0!==c&&c[0].days?null===c||void 0===c?void 0:c[0].days.reduce((function(e,n){return e+n.hours}),0):0,y=r&&l.length>0&&null!==c&&void 0!==c&&c[0].days?null===c||void 0===c?void 0:c[1].days.reduce((function(e,n){return e+n.hours}),0):0,j=r&&l.length>0&&null!==c&&void 0!==c&&c[0].days?null===c||void 0===c?void 0:c[2].days.reduce((function(e,n){return e+n.hours}),0):0,b=r&&l?l.map((function(e){return e.month})):[];return{string:b.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),data:r,error:d,databaseMonthsId:i,databaseMonthsCollection:l,databaseMonth:u,databaseColumns:c,databaseAllHours:m,dataCurrentHours:v,databaseAcceptedHours:f,databaseRejectedHours:x,dataBaseSubmitedHours:h,acceptedHoursSum:y,rejectedHoursSum:j,submitedHoursSum:p,databaseMonthsDates:b}}},3572:function(e,n,r){r.d(n,{nr:function(){return d},qs:function(){return i}});var a=r(9439),t=r(3433),s=r(1413),d=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,r;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,s.Z)((0,s.Z)({},e),{},{columns:null===e||void 0===e||null===(r=e.columns)||void 0===r?void 0:r.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{days:e.days||[]})}))})})):[]},i=function(e,n,r){var d=e.source,i=e.destination;if(i&&(d.draggableId!==i.droppableId||d.index===i.index))if(d.droppableId!==i.droppableId){var o=n.findIndex((function(e){return e.id===d.droppableId})),l=n.findIndex((function(e){return e.id===i.droppableId})),u=(0,t.Z)(n[o].days),c=d.droppableId!==i.dropableId?(0,t.Z)(n[l].days):u,m=u.splice(d.index,1),v=(0,a.Z)(m,1)[0];c.splice(i.index,0,v);var h=(0,t.Z)(n);h[o]=(0,s.Z)((0,s.Z)({},n[o]),{},{days:u}),h[l]=(0,s.Z)((0,s.Z)({},n[l]),{},{days:c}),r(h)}else{var f=i.index,x=n.findIndex((function(e){return e.id===d.droppableId})),p=(0,t.Z)(n[x].days),y=p.splice(d.index,1),j=(0,a.Z)(y,1)[0];p.splice(f,0,j);var b=(0,t.Z)(n);b[x]=(0,s.Z)((0,s.Z)({},n[x]),{},{days:p}),r(b)}}}}]);
//# sourceMappingURL=147.302aad6a.chunk.js.map