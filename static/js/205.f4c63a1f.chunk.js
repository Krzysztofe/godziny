"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[205],{7205:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var a=n(9439),r=n(2791),i=n(3360),o=n(7732),s=n(8014),c=n(7689),l=n(4849),d=n(1830),u=n.n(d),m=n(3200),h=n(184),f=function(){var e,t=(0,c.s0)(),n=(0,r.useState)(!1),o=(0,a.Z)(n,2),s=o[0],d=o[1];return e=s?(0,h.jsx)(l.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,h.jsx)("div",{className:"text-start w-100",children:"Wyloguj"}),(0,h.jsx)(i.Z,{onClick:function(){d(!0),m.I.signOut().then((function(){t("/")})).catch((function(e){u().fire({title:"B\u0142\u0105d",text:e.message,confirmButtonColor:"rgb(31, 180, 255)"})})).finally((function(){d(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:s,children:e})},p=n(3855),x=n(9662),v=n(1100),b=n(3210),g=n(4165),y=n(3433),j=n(1413),Z=n(5861),w=n(5705),z=n(8007),N=z.Ry({userName:z.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(e){return"Imi\u0119"!==e})).required("Imi\u0119 wymagane"),hours:z.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(e){return"Liczba godzin"!==e})).required("Liczba godzin wyma"),place:z.Z_().test("is-place-valid","Lokalizacja wymagana",(function(e){return"Lokalizacja"!==e})).required("Lokalizacja wymagana")}),k=n(9065),L=function(){var e=(0,k.Z)(),t=e.yearFromURL,n=e.monthFromURL,r=(0,b.Og)(),i=(0,a.Z)(r,2),o=i[0],s=i[1],c=(0,b.I8)({year:t,month:n}).data,l=(0,b._1)({year:t,month:n}).data,d=(0,w.TA)({initialValues:{id:crypto.randomUUID(),date:x.nt,hours:"",userName:"",place:""},validationSchema:N,onSubmit:function(){var e=(0,Z.Z)((0,g.Z)().mark((function e(a){var r;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.setFieldValue("id",crypto.randomUUID()),!(null!==c&&void 0!==c&&c.currentHours&&(null===c||void 0===c?void 0:c.currentHours)-+d.values.hours<0)){e.next=3;break}return e.abrupt("return");case 3:if(r=(0,j.Z)((0,j.Z)({},a),{},{hours:+a.hours}),null===l||void 0===l||!l.id){e.next=7;break}return e.next=7,o({year:t,month:n,firstColumnBody:(0,j.Z)((0,j.Z)({},l),{},{days:null!==l&&void 0!==l&&l.days?[].concat((0,y.Z)(l.days),[(0,j.Z)({},r)]):[(0,j.Z)({},r)]})});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return{formik:d,success:s}},D=[{name:"userName",firstOption:"Imi\u0119",labelText:"Podaj imi\u0119",options:["Jan","Maria","Mariola"]},{name:"hours",firstOption:"Liczba godzin",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}],S=function(){var e=(0,k.Z)(),t=e.yearFromURL,n=e.monthFromURL,a=(0,b.a6)({year:t,month:n}).data,r=(0,b.I8)({year:t,month:n}).data,o=L(),s=o.formik,c=o.success,l=(0,v.Z)(c,"Zapisz dzie\u0144").btnContent;return(0,h.jsxs)(p.Z,{onSubmit:s.handleSubmit,className:"mt-2 ".concat(a?"":"d-none"," ").concat(0===(null===r||void 0===r?void 0:r.allHours)?"formContainer":""),children:[D.map((function(e){var t=e.name,n=e.firstOption,a=e.labelText,r=e.options;return(0,h.jsxs)(p.Z.Group,{children:[(0,h.jsx)(p.Z.Label,{htmlFor:t,className:"mb-0 fs-7",children:a}),(0,h.jsxs)(p.Z.Select,{id:t,name:t,onChange:s.handleChange,onBlur:s.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,h.jsx)("option",{children:n}),r.map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))]}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:s.touched[t]&&s.errors[t]&&s.errors[t]})]},a)})),(0,h.jsxs)(p.Z.Group,{children:[(0,h.jsx)(p.Z.Label,{htmlFor:"date",className:"mb-0 fs-7",children:"Podaj dzie\u0144"}),(0,h.jsx)(p.Z.Control,{id:"date",type:"date",name:"date",value:s.values.date,onChange:s.handleChange,onBlur:s.handleBlur,min:x.nt,max:x.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:s.touched.date&&s.errors.date&&s.errors.date})]}),(0,h.jsx)(i.Z,{variant:"emphasis",type:"submit",disabled:c.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:l}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:null!==r&&void 0!==r&&r.currentHours&&(null===r||void 0===r?void 0:r.currentHours)-+s.values.hours<0?"Brak dost\u0119pnych godzin":""})]})},C=function(){var e=(0,b.S$)(void 0).data;return{monthDates:e&&Object.values(e).flatMap((function(e){return Object.values(e).flatMap((function(e){return e.id}))}))}},F={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},H=function(){var e=(0,c.s0)(),t=C().monthDates,n=(0,b.Su)(),r=(0,a.Z)(n,2),i=r[0],o=r[1],s=(0,w.TA)({initialValues:{monthDate:"".concat(x.j0,"-").concat(x.vs)},validationSchema:z.Ry({monthDate:z.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==t&&void 0!==t&&t.includes(e))}))}),onSubmit:function(){var t=(0,Z.Z)((0,g.Z)().mark((function t(n){var a,r,o;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.monthDate.slice(0,4),r=n.monthDate.slice(-2),o=(0,j.Z)((0,j.Z)({},F),{},{id:n.monthDate}),t.next=5,i({year:a,month:r,monthBody:o});case 5:e("/".concat(n.monthDate));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});return{formik:s,success:o}},I=n(8820),U=function(){var e=H(),t=e.formik,n=e.success,a=(0,v.Z)(n,(0,h.jsx)(I.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(p.Z,{onSubmit:t.handleSubmit,className:"mt-1",children:[(0,h.jsxs)(p.Z.Group,{children:[(0,h.jsx)(p.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-7",children:"Podaj miesi\u0105c"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(p.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(x.j0,"-").concat(x.vs),max:"2025-12",value:t.values.monthDate,onChange:t.handleChange,onBlur:t.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,h.jsx)(i.Z,{type:"submit",disabled:n.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:a})]})]}),(0,h.jsx)(p.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:t.touched.monthDate&&t.errors.monthDate&&t.errors.monthDate})]})})},B=n(7858),T=n(23),R=n(1087),P=function(){var e=(0,b.S$)(void 0).data,t=C().monthDates,n=(0,k.Z)().monthURL,a=null===t||void 0===t?void 0:t.map((function(e){var t=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(t)})),r=/^\d{4}-\d{2}$/.test(n)?new Date(n):null,i=r&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r);return(0,h.jsx)(T.Z,{className:"monthListContainer bg-white rounded-0 border border-primary",children:e?null===a||void 0===a?void 0:a.map((function(e,n){return(0,h.jsx)(T.Z.Item,{className:"border-0 p-0 px-1",children:(0,h.jsx)(R.rU,{to:"/".concat(null===t||void 0===t?void 0:t[n]),className:"".concat(i===e&&i?"text-warning":"text-reset"," text-decoration-none text-capitalize"),children:e})},e)})):(0,h.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},O=n(6856),E=function(){var e=(0,r.useState)(!1),t=(0,a.Z)(e,2),n=t[0],o=t[1];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(i.Z,{onClick:function(){return o(!n)},"aria-controls":"example-collapse-text","aria-expanded":n,size:"sm",className:"p-0 px-1 border border-primary w-100 mt-1 text-start bg-white fw-medium d-flex justify-content-between align-items-center",children:["Wybierz miesi\u0105c",(0,h.jsx)(O.x3N,{className:"fs-3 me-1",style:{transform:"".concat(n?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,h.jsx)(B.Z,{in:n,children:(0,h.jsx)("div",{children:(0,h.jsx)(P,{})})})]})},M=function(){var e=(0,c.TH)().pathname,t=(0,r.useState)(!1),n=(0,a.Z)(t,2),l=n[0],d=n[1],u=(0,r.useState)(window.innerWidth),m=(0,a.Z)(u,2),p=m[0],x=m[1];return(0,r.useEffect)((function(){var e=function(){x(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((function(){p>575&&d(!0)}),[p]),(0,h.jsx)(h.Fragment,{children:["/"].includes(e)?null:(0,h.jsxs)("aside",{children:[(0,h.jsx)(i.Z,{variant:"info",onClick:function(){return d((function(e){return!e}))},className:"me-2 p-2 mt-1  ".concat(p>575?"d-none":"d-block"),style:{position:"absolute",right:0,borderRadius:"50%"},children:(0,h.jsx)(s.vHB,{className:"fs-1"})}),(0,h.jsxs)(o.Z,{show:l,onHide:function(){return d(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"bg-primary-subtle",style:{width:200},children:[(0,h.jsx)(o.Z.Header,{className:"pb-0",children:(0,h.jsx)(f,{})}),(0,h.jsxs)(o.Z.Body,{className:"pt-0",children:[(0,h.jsx)(U,{}),(0,h.jsx)(E,{}),(0,h.jsx)(S,{}),(0,h.jsx)(R.rU,{to:"/ustawienia",className:"text-dark",children:"Ustawienia"})]})]})]})})}},9662:function(e,t,n){n.d(t,{j0:function(){return s},nt:function(){return l},st:function(){return d},vs:function(){return c},xk:function(){return u}});var a=new Date,r=function(e){var t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(a)},i=new Date(a.getTime()+12096e5),o=new Date(a.getTime()+5184e6),s=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),l=(String(a.getDate()).padStart(2,"0"),r(a),r(i)),d=r(o),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},3200:function(e,t,n){n.d(t,{I:function(){return o}});var a=n(4702),r=n(1793),i=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),o=(0,r.v0)(i)},1100:function(e,t,n){var a=n(1830),r=n.n(a),i=n(2791),o=n(4849),s=n(184);t.Z=function(e,t){(0,i.useEffect)((function(){if(e.isError){var t=e.error,n=t&&"status"in t&&t.status&&t.status;r().fire({title:"B\u0142\u0105d: ".concat(n||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[e.isError]);var n=t;return e.isLoading&&(n=(0,s.jsx)(o.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:n}}},9065:function(e,t,n){var a=n(7689);t.Z=function(){var e=(0,a.TH)().pathname.split("/").slice(-1)[0],t=null===e||void 0===e?void 0:e.slice(0,4),n=null===e||void 0===e?void 0:e.slice(-2);return{monthURL:e,yearFromURL:t,monthFromURL:n}}}}]);
//# sourceMappingURL=205.f4c63a1f.chunk.js.map