"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[230],{2040:function(n,e,r){var t=r(7881);e.Z=function(){return(0,t.jsx)("div",{className:"border d-md-none"})}},6078:function(n,e,r){r.d(e,{Z:function(){return u}});var t=r(8388),i=r(7074),o=r(6563),a=r(7881),d=function(n){return(0,a.jsx)(o.Z,{id:"noButton",className:"_radius bg-primary border-0 px-5 ms-4",onClick:n.action,children:"Ok"})},s=function(n){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{id:"noButton",className:"_radius bg-dark border-0 px-4 px-sm-5",children:"Nie"}),(0,a.jsx)(o.Z,{onClick:n.action,className:"_radius bg-primary border-0 px-4 px-sm-5 ms-4",children:"Tak"})]})},u=(0,r(1233).memo)((function(n){var e=(0,i.I0)();return n.isPrinted?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{id:"opacityContainer",className:"fixed-top _d-center _alert",onClick:function(r){var i;["opacityContainer","noButton"].includes(null===(i=r.target)||void 0===i?void 0:i.id)&&(null!==n&&void 0!==n&&n.setIsPrinted&&(null===n||void 0===n||n.setIsPrinted(!1)),e((0,t.VG)("")))},children:(0,a.jsxs)("div",{className:"p-5 bg-white _radius text-center fs-2 fw-medium _anim-dropDown",children:[n.header,(0,a.jsx)("div",{className:"_w-fitContent m-auto mt-4",children:n.header.includes("Usun\u0105\u0107")?(0,a.jsx)(s,{action:n.action}):(0,a.jsx)(d,{action:n.action})})]})})}):null}))},525:function(n,e,r){var t=r(561),i=r(7881);e.Z=function(){return(0,i.jsx)(t.GnT,{className:"text-light-emphasis  fs-2 ms-auto"})}},3321:function(n,e,r){r.d(e,{Z:function(){return u}});var t=r(9439),i=r(1233),o=r(302),a=function(){var n=o.Z.getInstance().auth,e=(0,i.useState)(61),r=(0,t.Z)(e,2),a=r[0],d=r[1],s=0,u=function(){s=Date.now()+3e5};return(0,i.useEffect)((function(){var e=setInterval((function(){!function(){var e=Math.max(0,Math.floor((s-Date.now())/1e3));d(e),s<Date.now()&&(null===n||void 0===n||n.signOut())}()}),1e3);return function(){return clearInterval(e)}}),[]),(0,i.useEffect)((function(){u();var n=["mousemove","keypress","click","scroll"];return n.map((function(n){return document.addEventListener(n,u)})),function(){n.map((function(n){return document.addEventListener(n,u)}))}}),[]),{secondsRemaining:a}},d=r(7881),s=function(){var n=a().secondsRemaining;return n+1>60?null:(0,d.jsx)("div",{className:"fixed-top _d-center p-5 _autoLogout",children:(0,d.jsxs)("div",{className:"p-4 bg-white text-center rounded-1 _fs-primary fw-semiBold _anim-dropDown",children:["Wylogowanie nast\u0105pi za",(0,d.jsxs)("div",{className:"d-flex mx-auto _w-fitContent",children:[n+1," ",(0,d.jsx)("div",{children:"\xa0s."})]})]})})},u=function(n){return(0,d.jsxs)("main",{className:"d-flex m-0  bg-secondary _indexContainer ",children:[(0,d.jsx)("aside",{className:"_indexContainer__aside"}),(0,d.jsxs)("div",{className:"_indexContainer__rightSide bg-secondary",children:[(0,d.jsx)(s,{}),n.children]})]})}},5486:function(n,e,r){var t=r(7881);e.Z=function(n){return(0,t.jsx)(t.Fragment,{children:n.styles((0,t.jsx)("div",{className:"text-danger fs-1 text-center",children:"B\u0142\u0105d. Od\u015bwie\u017c stron\u0119"}))})}},7858:function(n,e,r){var t=r(1922),i=r(7881);e.Z=function(n){return(0,i.jsx)(i.Fragment,{children:n.styles((0,i.jsx)(t.Z,{animation:"border",variant:"primary",className:"fs-5",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})}))})}},7848:function(n,e,r){var t=r(9439),i=r(1233),o=r(6078),a=r(7881);e.Z=function(n,e){var r=(0,i.useState)(!1),d=(0,t.Z)(r,2),s=d[0],u=d[1];return{handleAlert:function(){u(!0)},alert:(0,a.jsx)(o.Z,{action:n,isPrinted:s,setIsPrinted:u,header:e})}}},9889:function(n,e,r){var t=r(1922),i=r(7881);e.Z=function(n,e){var r=e;return n&&(r=(0,i.jsx)(t.Z,{animation:"border",size:"sm",variant:"primary",className:"text-dark",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:r}}},1623:function(n,e,r){var t=r(5244),i=r(634);e.Z=function(){var n=(0,i.Z)(),e=n.yearFromURL,r=n.monthFromURL,o=(0,t.a6)({year:e,month:r});return{data:o.data,error:o.error,isLoading:o.isLoading}}},6315:function(n,e,r){var t=r(4110);e.Z=function(){var n=(0,t.TH)().pathname.slice(1);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,r=n&&new Date(n);return{monthURLStringFormat:r&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(r))}}return{monthURLStringFormat:""}}},634:function(n,e,r){var t=r(4110);e.Z=function(){var n=(0,t.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),r=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:r,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},6230:function(n,e,r){r.r(e),r.d(e,{default:function(){return dn}});var t=r(7074),i=r(3321),o=r(5486),a=r(7858),d=r(1623),s=r(9614),u=r(2084),c=r(9439),l=r(1233),v=r(4110),m=r(2040),f=r(9316),x=r(3041),h=r(7881),p=(0,x.Ge)((function(n){var e=n._,r=n._2,t=n._3,i=n._4;return(0,h.jsx)("div",{className:"position-sticky top-0 z-3 fs-2 pt-4 py-md-4 bg-secondary",children:(0,h.jsxs)("div",{className:"d-flex mx-auto fw-medium _w-fitContent",children:[(0,h.jsxs)("div",{children:["Wszystkie ",e,"\xa0-\xa0"]}),(0,h.jsxs)("div",{className:r,children:[(0,h.jsxs)("strong",{children:[t,"\xa0"]}),i]})]})})}),{svg:!1,shouldUpdate:function(n,e){return(null===n||void 0===n?void 0:n._)!==(null===e||void 0===e?void 0:e._)||(null===n||void 0===n?void 0:n._2)!==(null===e||void 0===e?void 0:e._2)||(null===n||void 0===n?void 0:n._3)!==(null===e||void 0===e?void 0:e._3)||(null===n||void 0===n?void 0:n._4)!==(null===e||void 0===e?void 0:e._4)}}),j=function(){var n,e,r,t,i=(0,d.Z)().data,o=(0,l.useState)((function(){return{$:new Array(2)}}))[0],a=null===i||void 0===i||null===(n=i.calcHours)||void 0===n?void 0:n.allHours,s="".concat(i&&(null===i||void 0===i||null===(e=i.calcHours)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),u=(0,f.r)(i&&(null===i||void 0===i||null===(r=i.calcHours)||void 0===r?void 0:r.currentHours),!1,o.$,0,!1),c=(0,f.r)(i&&(null===i||void 0===i||null===(t=i.calcHours)||void 0===t?void 0:t.currentHours)<=0?"Brak":"Dost\u0119pne",!1,o.$,1,!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p,{_:a,_2:s,_3:u,_4:c}),o.$.map((function(n){return n.portal}))]})},g=r(5449),y=r(1413),Z=r(3190),b=r(6563),_=r(525),H=r(7848),N=r(9889),w=r(4165),I=r(5861),C=r(634),k=r(5244),L=function(n,e){var r=n.columns.map((function(n){var r,t=null===n||void 0===n||null===(r=n.days)||void 0===r?void 0:r.filter((function(n){return!(!n||!n.id)&&n.id!==e}));return(0,y.Z)((0,y.Z)({},n),{},{days:t})}));return(0,y.Z)((0,y.Z)({},n),{},{columns:r})},F=function(n,e,r){if(!n||!n.calcHours)return{currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0,allHours:0};var t=n.calcHours;return(0,y.Z)((0,y.Z)({},t),{},{currentHours:2!==e&&r?t.currentHours+r:t.currentHours,submittedHours:0===e&&r?t.submittedHours-r:t.submittedHours,acceptedHours:1===e&&r?t.acceptedHours-r:t.acceptedHours,rejectedHours:2===e&&r?t.rejectedHours-r:t.rejectedHours})},D=function(n,e){var r=(0,d.Z)().data,t=(0,k.ur)(),i=(0,c.Z)(t,2),o=i[0],a=i[1],s=(0,C.Z)(),u=s.yearFromURL,l=s.monthFromURL,v=function(){var t=(0,I.Z)((0,w.Z)().mark((function t(){var i;return(0,w.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null===n||void 0===n?void 0:n.hours,t.t0=r,!t.t0){t.next=5;break}return t.next=5,o({year:u,month:l,colIdx:e,monthBody:(0,y.Z)((0,y.Z)({},r),{},{calcHours:F(r,+e,i),columns:L((0,y.Z)({},r),null===n||void 0===n?void 0:n.id).columns})});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{deleteDayAsync:v,success:a}},U=function(){var n=(0,l.useContext)(B),e=n.day,r=n.columnIdx,t=D(e,r),i=t.deleteDayAsync,o=t.success,a=(0,H.Z)(i,"Usun\u0105\u0107 dzie\u0144?"),d=a.handleAlert,s=a.alert,u=(0,N.Z)(o.isLoading,(0,h.jsx)(_.Z,{})).btnContent;return e?(0,h.jsxs)(h.Fragment,{children:[s,(0,h.jsxs)(b.Z,{onClick:d,className:"d-flex justify-content-between fs-4 _fw-semiBold align-items-center w-100 p-0 bg-transparent border-0 text-dark _buttonDeleteDay  text-light-emphasis",disabled:o.isLoading,children:[(0,h.jsxs)("div",{children:[null===e||void 0===e?void 0:e.hours," h"]}),(0,h.jsx)("div",{children:u})]})]}):null},R=r(9153),z=r(3223),S=function(){return"Poza"===(0,l.useContext)(B).day.place?(0,h.jsx)(z.ols,{className:"text-light-emphasis"}):(0,h.jsx)(R.P8U,{className:"text-light-emphasis"})},P=function(){var n=(0,l.useContext)(B).day;if(!n)return(0,h.jsx)("div",{children:"Brak danych"});var e=n&&function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(e)}(n.date);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between text-light-emphasis fs-4 ",children:[(0,h.jsx)("div",{children:n.userName}),(0,h.jsx)(S,{})]}),(0,h.jsx)("div",{className:"d-flex justify-content-between text-light-emphasis fs-4 _fw-semiBold",children:(0,h.jsx)("div",{children:e||""})})]})},T=function(){var n,e=(0,t.v9)((function(n){return n.searchName})).searchedName,r=(0,l.useContext)(B),i=r.day,o=r.dayIdx;return e&&"Szukaj"!==e?e!==i.userName&&(n="d-none"):n="d-block",(0,h.jsx)(g._l,{draggableId:i&&(null===i||void 0===i?void 0:i.id),index:o,isDragDisabled:!1,children:function(e,r){return(0,h.jsx)("div",(0,y.Z)((0,y.Z)((0,y.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white _radius border _overflow-hidden ".concat(r.isDragging?"border-dark":"border-dark-subtle"," ").concat(n),children:(0,h.jsxs)("div",{className:"ps-2 pe-1 py-2 py-sm-1",style:{borderTop:"8px solid ".concat(null===i||void 0===i?void 0:i.userColor),opacity:r.isDragging?.6:1},children:[(0,h.jsx)(P,{}),(0,h.jsx)(U,{})]})}))}})},B=(0,l.createContext)({}),E=function(n){var e=(0,t.v9)((function(n){return n.searchName})).searchedName,r=e&&"Szukaj"!==e?"_isSearching _bg-opacity-dark":"";return(0,h.jsx)("div",{className:"_column position-relative",children:(0,h.jsx)(g.bK,{droppableId:n.column.id,children:function(e,t){return(0,h.jsxs)("div",(0,y.Z)((0,y.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 pt-3 px-lg-3 h-100 overflow-hidden border border-1 border border-top-0   ".concat((i=t.isDraggingOver,i?"_isDragging":"_noDragging")," ").concat(r),children:[Array.isArray(n.column.days)?n.column.days.map((function(e,r){return(0,h.jsx)(B.Provider,{value:{day:e,columnIdx:n.columnIdx,dayIdx:r},children:(0,h.jsx)(T,{})},(0,Z.Z)())})):[],e.placeholder]}));var i}})})},A=function(n){var e,r=(0,d.Z)().data,t=r&&(e=null===r||void 0===r?void 0:r.columns,Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,y.Z)((0,y.Z)({},n),{},{days:[]})})):[]);(0,l.useEffect)((function(){t&&n(t)}),[null===r||void 0===r?void 0:r.columns])},$=function(n){return null===n||void 0===n?void 0:n.reduce((function(n,e){return n+((null===e||void 0===e?void 0:e.hours)||0)}),0)},M=function(n,e){var r=(0,C.Z)(),t=r.yearFromURL,i=r.monthFromURL,o=(0,k.CB)(),a=(0,c.Z)(o,1)[0],s=(0,d.Z)().data,u=function(n){var e,r,t;return{submittedHours:$(null===(e=n[0])||void 0===e?void 0:e.days),acceptedHours:$(null===(r=n[1])||void 0===r?void 0:r.days),rejectedHours:$(null===(t=n[2])||void 0===t?void 0:t.days)}}(n),v=u.submittedHours,m=u.acceptedHours,f=u.rejectedHours;(0,l.useEffect)((function(){var e;n.length>0&&s&&a({year:t,month:i,monthBody:(0,y.Z)((0,y.Z)({},s),{},{columns:n,calcHours:(0,y.Z)((0,y.Z)({},null===s||void 0===s?void 0:s.calcHours),{},{currentHours:(null===s||void 0===s||null===(e=s.calcHours)||void 0===e?void 0:e.allHours)-v-m-f+f,submittedHours:v,acceptedHours:m,rejectedHours:f})})})}),[e])},O=r(3433),G=function(n,e){return n.findIndex((function(n){return n.id===e.droppableId}))},W=function(n,e){var r=n.splice(e.index,1);return(0,c.Z)(r,1)[0]},Y=function(n,e,r){var t=(0,O.Z)(n);return t[e]=(0,y.Z)((0,y.Z)({},n[e]),{},{days:r}),t},q=function(n,e,r){var t=n.source,i=n.destination;i&&(t&&i&&t.droppableId===i.droppableId&&t.index===i.index||"rejected"!==t.droppableId&&(t.droppableId!==i.droppableId?function(n,e,r,t){var i=G(n,e),o=function(n,e){return n.findIndex((function(n){return n.id===e.droppableId}))}(n,r),a=n&&(0,O.Z)(n[i].days),d=e.droppableId!==r.droppableId?(0,O.Z)(n[o].days):a,s=W(a,e);d.splice(r.index,0,s);var u=Y(n,i,a);t(Y(u,o,d))}(e,t,i,r):function(n,e,r,t){var i=r.index,o=G(n,e),a=(0,O.Z)(n[o].days),d=W(a,e);a.splice(i,0,d),t(Y(n,o,a))}(e,t,i,r)))},K=r(6490),V=function(){var n=(0,d.Z)().data,e=(0,l.useState)([]),r=(0,c.Z)(e,2),t=r[0],i=r[1],o=(0,l.useState)(!1),a=(0,c.Z)(o,2),s=a[0],u=a[1],v=(0,l.useRef)(null);A(i),M(t,s);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("audio",{src:K,ref:v}),(0,h.jsx)("div",{className:"_d-between _dragDropContex",children:(0,h.jsx)(g.Z5,{onDragEnd:function(e){n&&q(e,t,i),u((function(n){return!n})),function(n,e){var r;if("rejected"!==n.source.droppableId&&n.source.droppableId!==(null===(r=n.destination)||void 0===r?void 0:r.droppableId)){var t=e.current;t&&(t.volume=window.innerWidth<=650?.8:.05,t.play())}}(e,v)},children:null===t||void 0===t?void 0:t.map((function(n,e){return(0,h.jsx)(E,{columnIdx:e,column:n},n.id)}))})})]})},J=(0,x.Ge)((function(n){var e=n._,r=n._2;return(0,h.jsx)("div",{className:"_counterHeader",children:(0,h.jsx)("div",{style:{transform:e,transition:"transform 0.3s"},children:r})})}),{svg:!1,shouldUpdate:function(n,e){return(null===n||void 0===n?void 0:n._)!==(null===e||void 0===e?void 0:e._)||(null===n||void 0===n?void 0:n._2)!==(null===e||void 0===e?void 0:e._2)}}),Q=function(n){var e=(0,d.Z)().data,r=(0,l.useState)(n.counter?[n.counter]:[0]),t=(0,c.Z)(r,2),i=t[0],o=t[1],a=(0,l.useRef)(!0);(0,l.useEffect)((function(){o(n.counter?[n.counter]:[0]),a.current=!1}),[null===e||void 0===e?void 0:e.id]),(0,l.useEffect)((function(){a.current&&void 0!==n.counter?o((function(e){return[].concat((0,O.Z)(e),[null===n||void 0===n?void 0:n.counter])})):a.current=!0}),[n.counter,null===e||void 0===e?void 0:e.id]);var s=(0,l.useState)((function(){return{$:new Array(1)}}))[0],u="translateY(-".concat(20*(i.length-1),"px)"),v=(0,f.r)((0,h.jsx)(x.U2,{each:i,children:function(n,e){return(0,h.jsx)("div",{className:"_counterHeader__dygit",children:n},e)}}),!1,s.$,0,!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(J,{_:u,_2:v}),s.$.map((function(n){return n.portal}))]})},X=function(){var n=((0,d.Z)().data||{}).calcHours;return{dataColumnsHeader:[{headerText:"Z\u0142o\u017cone:",counter:null===n||void 0===n?void 0:n.submittedHours},{headerText:"Przyznane:",counter:null===n||void 0===n?void 0:n.acceptedHours},{headerText:"Odrzucone:",counter:null===n||void 0===n?void 0:n.rejectedHours}]}},nn=function(){var n=X().dataColumnsHeader;return(0,h.jsx)("div",{className:"_d-between _columnsHeader",children:n.map((function(n){var e=n.headerText,r=n.counter;return(0,h.jsxs)("div",{className:"text-primary _d-center _fw-semiBold p-1 _columnsHeader__item bg-secondary-light  border border-bottom-0            \n            ",children:[e,(0,h.jsx)(Q,{counter:r,text:e})]},e)}))})},en=r(6315),rn=r(2184),tn=(0,l.memo)((function(){var n=(0,en.Z)().monthURLStringFormat;return(0,h.jsx)("div",{className:"text-center fs-4 d-md-none pt-1 pb-4 z-3 bg-secondary _currentMonth",children:(0,rn.f)(n)})})),on=function(){var n=(0,v.TH)().pathname,e=(0,l.useState)(!1),r=(0,c.Z)(e,2),t=r[0],i=r[1];return(0,l.useEffect)((function(){i(!1);var n=setTimeout((function(){i(!0)}));return function(){clearTimeout(n)}}),[n]),(0,h.jsx)(h.Fragment,{children:t&&(0,h.jsxs)("div",{className:"px-2 px-sm-5 px-md-3 pb-3 _anim-opacity",children:[(0,h.jsx)(m.Z,{}),(0,h.jsx)(j,{}),(0,h.jsx)(tn,{}),(0,h.jsx)(nn,{}),(0,h.jsx)(V,{})]})})},an=function(){var n=(0,en.Z)().monthURLStringFormat;return(0,h.jsxs)("div",{className:"_d-center fs-2 text-danger text-center _monthPanelEmpty",children:["Brak danych z miesi\u0105ca ",n,". Zapisz miesi\u0105c w ustawieniach."]})},dn=function(){var n,e=(0,d.Z)(),r=e.data,c=e.error,l=e.isLoading,v=(0,s.xY)(),m=v.error,f=v.isLoading,x=(0,t.v9)((function(n){return n.listMonths})).listMonthsError;return n=l||f?(0,h.jsx)(a.Z,{styles:u.u}):c||m||x?(0,h.jsx)(o.Z,{styles:u.u}):r&&""!==(null===r||void 0===r?void 0:r.id)?(0,h.jsx)(on,{}):(0,h.jsx)(an,{}),(0,h.jsx)(i.Z,{children:n})}},2184:function(n,e,r){r.d(e,{f:function(){return t}});var t=function(n){return n.toLowerCase().split(" ").map((function(n){var e;return(null===n||void 0===n||null===(e=n.charAt(0))||void 0===e?void 0:e.toUpperCase())+n.slice(1)})).join(" ")}},2084:function(n,e,r){r.d(e,{u:function(){return i}});var t=r(7881),i=function(n){return(0,t.jsx)("div",{className:"fixed-top _d-center fs-4 _requestContainer",style:{width:"100vw",height:"100vh",zIndex:"1060",backgroundColor:"rgba(255,255,255,0.4)"},children:n})}},6490:function(n,e,r){n.exports=r.p+"static/media/dragSound.91940e3f5c0dacec1c6c.wav"}}]);
//# sourceMappingURL=230.b0703049.chunk.js.map