"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[839],{5991:function(n,e,r){var d=r(184);e.Z=function(n){return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:n.name,children:n.label}),(0,d.jsx)("input",{id:n.name,type:n.type,name:n.name,value:n.value,onChange:n.handleChange,onBlur:n.handleBlur,placeholder:n.placeholder,style:{width:50}})]})}},1839:function(n,e,r){r.r(e),r.d(e,{default:function(){return L}});var d=r(1413),t=r(9439),i=r(2791),o=r(4794),a=r(7689),u=r(322),s=r(4165),l=r(3433),c=r(5861),v=r(6355),h=r(1830),f=r.n(h),m=r(184),p=function(n){return(0,m.jsxs)("div",{children:[(0,m.jsxs)("small",{children:["Imi\u0119:",n.day.userName]}),(0,m.jsx)("small",{children:n.day.date}),(0,m.jsxs)("small",{children:["Godz.: ",n.day.hours]})]})},y=r(9404),x=function(n){var e,r=(0,u.P2)(void 0),i=r.data,h=(r.error,(0,u.X)()),x=(0,t.Z)(h,2),b=x[0],j=x[1],Z=(0,a.UO)().monthURL,g=(0,y.Z)(Z),H=g.databaseColumns,w=(g.databaseAllHours,g.databaseMonth),C=(g.acceptedHoursSum,g.rejectedHoursSum,g.submitedHoursSum,function(){var n=(0,c.Z)((0,s.Z)().mark((function n(e){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var n=(0,c.Z)((0,s.Z)().mark((function n(r){var t;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.isConfirmed){n.next=4;break}return t=(0,l.Z)(H).map((function(n){return n&&n.days?(0,d.Z)((0,d.Z)({},n),{},{days:n.days.filter((function(n){return n.id!==e}))}):n})),n.next=4,b({id:i&&(null===w||void 0===w?void 0:w.id),columns:(0,d.Z)((0,d.Z)({},w),{},{columns:t})});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),I=(0,m.jsx)("div",{style:{border:"1px solid black"},children:(0,m.jsx)(o._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id.toString()),index:n.index,children:function(e){return(0,m.jsxs)("div",(0,d.Z)((0,d.Z)((0,d.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[(0,m.jsx)(p,{day:n.day}),(0,m.jsx)("button",{onClick:function(){return C(n.day.id)},children:(0,m.jsx)(v.AMf,{})})]}))}})});return j.isLoading&&(I=(0,m.jsx)("div",{children:' "Loading" '})),j.isError&&(I=(0,m.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,m.jsx)(m.Fragment,{children:I})},b=function(n){return(0,m.jsx)("div",{children:(0,m.jsx)(o.bK,{droppableId:n.column.id,children:function(e,r){var t,i;return(0,m.jsxs)("div",(0,d.Z)((0,d.Z)({},e.droppableProps),{},{ref:e.innerRef,style:{border:"1px solid black",width:"20vw",minHeight:"100vh",height:"fit-content"},children:[n.column.days&&n.column.days.length>0&&(null===(t=n.column)||void 0===t||null===(i=t.days)||void 0===i?void 0:i.map((function(n,e){return(0,m.jsx)(x,{day:n,index:e},crypto.randomUUID())}))),e.placeholder]}))}})})},j=r(5048),Z=r(5991),g=r(411),H=r(6712),w=r(3728),C=r(4849),I=function(){var n=(0,a.UO)().monthURL,e=(0,j.I0)(),r=(0,j.v9)((function(n){return n.hoursPanel})).numberOfDays,i=(0,H.Z)(n),o=i.databaseMonth,l=i.data,v=(0,u.X)(),h=(0,t.Z)(v,2),f=h[0],p=h[1],y=function(){var n=(0,c.Z)((0,s.Z)().mark((function n(e){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,f({id:l&&(null===o||void 0===o?void 0:o.id),columns:(0,d.Z)((0,d.Z)({},o),{},{allHours:+r})});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),x=(0,m.jsx)(w.pl2,{});return p.isLoading&&(x=(0,m.jsx)(C.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),p.isError&&(x=(0,m.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,m.jsxs)("form",{onSubmit:y,style:{display:"flex"},children:[(0,m.jsx)(Z.Z,{type:"number",name:"numberOfDays",value:r,label:"Godziny w miesi\u0105cu ",placeholder:"Liczba",handleChange:function(n){var r=n.target.value;e((0,g.Cp)(r))}}),(0,m.jsx)("button",{type:"submit",children:x})]})},S=function(){var n=(0,a.UO)().monthURL,e=(0,y.Z)(n),r=e.databaseAllHours,d=e.dataCurrentHours,t=n&&new Date(n),i=t&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(t);return(0,m.jsxs)("header",{children:[(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsx)(I,{}),(0,m.jsx)("div",{style:{marginLeft:30},children:i})]}),(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsxs)("div",{style:{marginRight:20},children:["Wszystkie w miesi\u0105cu: ",r]}),(0,m.jsxs)("div",{children:["Do wykorzystania: ",d]})]})]})},k=r(3572),L=function(){var n=(0,u.P2)(void 0),e=n.data,r=n.error,s=(0,u.X)(),l=(0,t.Z)(s,2),c=l[0],v=l[1],h=(0,a.UO)().monthURL,f=(0,y.Z)(h),p=f.databaseAllHours,x=f.databaseColumns,j=f.databaseAcceptedHours,Z=f.databaseRejectedHours,g=f.dataBaseSubmitedHours,H=f.databaseMonth,w=f.submitedHoursSum,C=f.acceptedHoursSum,I=f.rejectedHoursSum,L=(0,i.useState)([]),A=(0,t.Z)(L,2),B=A[0],z=A[1];(0,i.useEffect)((function(){e&&H&&z(x)}),[e,h]),(0,i.useEffect)((function(){e&&(null===B||void 0===B?void 0:B.length)>1&&(null===H||void 0===H?void 0:H.month)&&c({id:e&&(null===H||void 0===H?void 0:H.id),columns:(0,d.Z)((0,d.Z)({},H),{},{columns:B,currentHours:p-w-C-I+I,submitedHours:w,acceptedHours:C,rejectedHours:I})})}),[B]);var O=v.isError?(0,m.jsx)("div",{children:"B\u0142\u0105d"}):(0,m.jsx)("div",{children:(0,m.jsx)("div",{children:(0,m.jsxs)(o.Z5,{onDragEnd:function(n){return(0,k.qs)(n,B,z)},children:[(0,m.jsx)("div",{style:{display:"flex"},children:[{header:"Z\u0142o\u017cone:",counter:g},{header:"Zakceptowane:",counter:j},{header:"Odrzucone:",counter:Z}].map((function(n){var e=n.header,r=n.counter;return(0,m.jsxs)("h4",{style:{marginLeft:20,width:"20vw"},children:[e," ","",r]},e)}))}),(0,m.jsx)("div",{style:{display:"flex"},children:B&&B.length>0&&B.map((function(n,e){return(0,m.jsx)(b,{column:n},n.id)}))})]})})});return r&&"error"in r&&(O=(0,m.jsxs)("div",{style:{textAlign:"center"},children:[" ",r.error," "]})),(0,m.jsx)(m.Fragment,{children:void 0===H||null===H?(0,m.jsx)("div",{style:{textAlign:"center"},children:"Wybierz miesi\u0105c"}):(0,m.jsx)("div",{style:{display:"flex",marginLeft:"30vw"},children:(0,m.jsxs)("div",{children:[(0,m.jsx)(S,{}),O]})})})}},9404:function(n,e,r){var d=r(1413),t=r(322),i=r(3572);e.Z=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,t.P2)(void 0).data,r=e&&Object.keys(e),o=r&&Object.values(e).flat().map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{id:r[e]})})),a=(0,i.nr)(o),u=e&&a.length>0?null===a||void 0===a?void 0:a.find((function(e){return e.month===n})):void 0,s=e&&(null===u||void 0===u?void 0:u.columns),l=e?null===u||void 0===u?void 0:u.allHours:"",c=e?null===u||void 0===u?void 0:u.currentHours:"",v=e?null===u||void 0===u?void 0:u.submitedHours:"",h=e?null===u||void 0===u?void 0:u.acceptedHours:"",f=e?null===u||void 0===u?void 0:u.rejectedHours:"",m=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[0].days.reduce((function(n,e){return n+e.hours}),0):0,p=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[1].days.reduce((function(n,e){return n+e.hours}),0):0,y=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[2].days.reduce((function(n,e){return n+e.hours}),0):0;return{data:e,databaseMonthsId:r,databaseMonthsCollection:a,databaseMonth:u,databaseColumns:s,databaseAllHours:l,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:f,dataBaseSubmitedHours:v,acceptedHoursSum:p,rejectedHoursSum:y,submitedHoursSum:m}}},6712:function(n,e,r){var d=r(1413),t=r(322),i=r(3572);e.Z=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=(0,t.P2)(void 0).data,r=e&&Object.keys(e),o=r&&Object.values(e).flat().map((function(n,e){return(0,d.Z)((0,d.Z)({},n),{},{id:r[e]})})),a=(0,i.nr)(o),u=e&&a.length>0?null===a||void 0===a?void 0:a.find((function(e){return e.month===n})):void 0,s=e&&(null===u||void 0===u?void 0:u.columns),l=e?null===u||void 0===u?void 0:u.allHours:"",c=e?null===u||void 0===u?void 0:u.currentHours:"",v=e?null===u||void 0===u?void 0:u.submitedHours:"",h=e?null===u||void 0===u?void 0:u.acceptedHours:"",f=e?null===u||void 0===u?void 0:u.rejectedHours:"",m=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[0].days.reduce((function(n,e){return n+e.hours}),0):0,p=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[1].days.reduce((function(n,e){return n+e.hours}),0):0,y=e&&a.length>0&&null!==s&&void 0!==s&&s[0].days?null===s||void 0===s?void 0:s[2].days.reduce((function(n,e){return n+e.hours}),0):0,x=e&&a?a.map((function(n){return n.month})):[];return{string:x.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)})),data:e,databaseMonthsId:r,databaseMonthsCollection:a,databaseMonth:u,databaseColumns:s,databaseAllHours:l,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:f,dataBaseSubmitedHours:v,acceptedHoursSum:p,rejectedHoursSum:y,submitedHoursSum:m,databaseMonthsDates:x}}},3572:function(n,e,r){r.d(e,{nr:function(){return o},qs:function(){return a}});var d=r(9439),t=r(3433),i=r(1413),o=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){var e,r;return(null===n||void 0===n||null===(e=n.columns)||void 0===e?void 0:e.every((function(n){return n.hasOwnProperty("days")})))?n:(0,i.Z)((0,i.Z)({},n),{},{columns:null===n||void 0===n||null===(r=n.columns)||void 0===r?void 0:r.map((function(n){return(0,i.Z)((0,i.Z)({},n),{},{days:n.days||[]})}))})})):[]},a=function(n,e,r){var o=n.source,a=n.destination;if(a&&(o.draggableId!==a.droppableId||o.index===a.index))if(o.droppableId!==a.droppableId){var u=e.findIndex((function(n){return n.id===o.droppableId})),s=e.findIndex((function(n){return n.id===a.droppableId})),l=(0,t.Z)(e[u].days),c=o.droppableId!==a.dropableId?(0,t.Z)(e[s].days):l,v=l.splice(o.index,1),h=(0,d.Z)(v,1)[0];c.splice(a.index,0,h);var f=(0,t.Z)(e);f[u]=(0,i.Z)((0,i.Z)({},e[u]),{},{days:l}),f[s]=(0,i.Z)((0,i.Z)({},e[s]),{},{days:c}),r(f)}else{var m=a.index,p=e.findIndex((function(n){return n.id===o.droppableId})),y=(0,t.Z)(e[p].days),x=y.splice(o.index,1),b=(0,d.Z)(x,1)[0];y.splice(m,0,b);var j=(0,t.Z)(e);j[p]=(0,i.Z)((0,i.Z)({},e[p]),{},{days:y}),r(j)}}}}]);
//# sourceMappingURL=839.745ba9fc.chunk.js.map