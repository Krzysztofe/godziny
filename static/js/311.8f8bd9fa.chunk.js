"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[311],{9311:function(e,n,a){a.r(n),a.d(n,{default:function(){return T}});var r=a(9439),t=a(7689),o=a(3728),i=a(4165),d=a(1413),s=a(3433),l=a(5861),u=a(5705),c=a(6712),m={id:crypto.randomUUID(),date:"",hours:"",userName:"",place:""},h=a(8007),v=h.Ry({userName:h.Z_().required("Podaj imi\u0119"),date:h.Z_().required("Podaj dat\u0119"),hours:h.Rx().required("Podaj liczb\u0119 godzin").moreThan(0,"Liczba godzin musi by\u0107 wi\u0119ksza od 0"),place:h.Z_().required("Podaj lokalizacj\u0119")}),p=a(322),f=function(){var e=(0,p.X)(),n=(0,r.Z)(e,2),a=n[0],o=n[1],h=(0,t.TH)().pathname.split("/"),f=h[h.length-1],y=((0,t.UO)().monthURL,(0,c.Z)(f)),Z=y.databaseColumns,x=y.databaseMonth,b=y.data,j=y.dataCurrentHours,g=(0,u.TA)({initialValues:m,validationSchema:v,onSubmit:function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var r,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.setFieldValue("id",crypto.randomUUID()),!(j-+g.values.hours<0)){e.next=3;break}return e.abrupt("return");case 3:return(t=b&&x&&(null===Z||void 0===Z?void 0:Z.length)>0?(0,s.Z)(Z):[])[0]=b&&x&&(null===Z||void 0===Z?void 0:Z.length)>0&&(0,d.Z)((0,d.Z)({},null===Z||void 0===Z?void 0:Z[0]),{},{days:[].concat((0,s.Z)(null===Z||void 0===Z||null===(r=Z[0])||void 0===r?void 0:r.days),[n])}),e.next=7,a({id:b&&x.id,columns:(0,d.Z)((0,d.Z)({},x),{},{columns:t})});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:g,success:o}},y=a(4849),Z=a(3360),x=a(3027),b=a(184),j=function(){(0,t.UO)().monthURL;var e=f(),n=e.formik,a=e.success,r=(0,t.TH)().pathname.split("/"),i=r[r.length-1],d=(0,c.Z)(i),s=d.dataCurrentHours,l=d.databaseAllHours,u=(0,b.jsx)("div",{});s-+n.values.hours<0&&(u=(0,b.jsx)("small",{style:{color:"red"},children:"Brak godzin do wykorzystania "})),0===l&&(u=(0,b.jsx)("small",{style:{color:"red"},children:" Podaj godziny w miesi\u0105cu "}));var m=(0,b.jsx)(o.pl2,{});return a.isLoading&&(m=(0,b.jsx)(y.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),a.isError&&(m=(0,b.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,b.jsxs)(x.Z,{onSubmit:n.handleSubmit,className:"mt-4",children:[[{type:"text",value:"userName",label:"Imi\u0119"},{type:"date",value:"date",label:"Dzie\u0144"},{type:"number",value:"hours",label:"Godz."}].map((function(e){var a=e.type,r=e.value,t=e.label;return(0,b.jsxs)(x.Z.Group,{className:"",children:[(0,b.jsx)("div",{className:" fs-6 ",children:(0,b.jsx)(x.Z.Label,{htmlFor:"password",className:"mb-0",children:t})}),(0,b.jsx)(x.Z.Control,{id:t,type:a,name:r,value:n.values[r],onChange:n.handleChange,onBlur:n.handleBlur,placeholder:"",size:"sm",className:"shadow-sm rounded-0"}),(0,b.jsx)(x.Z.Text,{className:"text-danger",style:{fontSize:"0.7rem"},children:n.touched[r]&&n.errors[r]&&n.errors[r]})]},t)})),["Wewn\u0105trz","Poza"].map((function(e){return(0,b.jsx)(x.Z.Group,{className:"mb-3",children:(0,b.jsx)(x.Z.Check,{type:"radio",id:e,name:"place",value:e,label:e,onChange:n.handleChange,checked:n.values.place===e})},e)})),(0,b.jsx)(x.Z.Text,{className:"text-danger",style:{fontSize:"0.7rem"},children:n.touched.place&&n.errors.place&&n.errors.place}),u,(0,b.jsx)("div",{className:"d-grid",children:(0,b.jsx)(Z.Z,{variant:"primary",type:"submit",className:"rounded-0 fw-medium mt-4",children:m})})]})},g=a(2791),z=(crypto.randomUUID(),{id:"",month:"",allHours:0,currentHours:0,submitedHours:0,acceptedHours:0,rejectedHours:0,columns:[{id:"miesiac",columnName:"Miesi\u0105c",days:[]},{id:"oczekuj\u0105ce",columnName:"Oczekuj\u0105ce",days:[null]},{id:"zatwierdzone",columnName:"Zatwierdzone",days:[null]}]}),w=function(){var e=(0,p.Su)(),n=(0,r.Z)(e,2),a=n[0],t=n[1],o=new Date,s=new Intl.DateTimeFormat("pl",{year:"numeric"}).format(o),c=new Intl.DateTimeFormat("pl",{month:"2-digit"}).format(o),m=(0,u.TA)({initialValues:{monthYear:"".concat(s,"-").concat(c)},onSubmit:function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,d.Z)((0,d.Z)({},z),{},{month:n.monthYear}),e.next=3,a(r);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:m,success:t}},H=function(){var e=w(),n=e.formik,a=e.success,r=(0,b.jsx)(o.pl2,{});return a.isLoading&&(r=(0,b.jsx)(y.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),a.isError&&(r=(0,b.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(x.Z,{onSubmit:n.handleSubmit,className:"",children:(0,b.jsxs)(x.Z.Group,{className:"d-flex",children:[(0,b.jsx)(x.Z.Control,{type:"month",name:"monthYear",min:"2023-06",max:"2025-12",value:n.values.monthYear,onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"rounded-0"}),(0,b.jsx)(Z.Z,{type:"submit",variant:"secondary",className:"rounded-0",size:"sm",children:r})]})})})},I=a(3200),N=a(3787),k=a(8014),C=a(23),S=a(1087),D=function(){var e=(0,p.P2)(void 0).data,n=(0,t.UO)().monthURL,a=(0,c.Z)(n).databaseMonthsCollection,r=e&&a?a.map((function(e){return e.month})).sort((function(e,n){return e<n?-1:e>n?1:0})):[],o=e&&(null===r||void 0===r?void 0:r.map((function(n){var a=e&&r&&new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)})));return(0,b.jsx)(b.Fragment,{children:void 0===e||null===e?(0,b.jsx)("p",{children:"Brak danych"}):o.map((function(e,n){return(0,b.jsx)(C.Z,{children:(0,b.jsx)(C.Z.Item,{className:"border-0 p-0 px-1",children:(0,b.jsx)(S.rU,{to:"/miesiac/".concat(r[n]),style:{textDecoration:"none"},children:e},e)})},e)}))})},T=function(){var e=(0,t.s0)(),n=(0,t.TH)().pathname,a=(0,g.useState)(!1),o=(0,r.Z)(a,2),i=o[0],d=o[1];return(0,b.jsx)(b.Fragment,{children:["/"].includes(n)?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z.Z,{variant:"primary",onClick:function(){return d((function(e){return!e}))},className:"me-2",children:(0,b.jsx)(k.vHB,{})}),(0,b.jsxs)(N.Z,{show:i,onHide:function(){return d(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"w-20",style:{width:200},children:[(0,b.jsx)(N.Z.Header,{closeButton:!0,children:(0,b.jsx)(N.Z.Title,{children:(0,b.jsx)("div",{onClick:function(){I.I.signOut(),e("/")},className:"fs-6",style:{cursor:"pointer"},children:"Wyloguj"})})}),(0,b.jsxs)(N.Z.Body,{children:[(0,b.jsx)(H,{}),(0,b.jsx)(D,{}),(0,b.jsx)(j,{})]})]})]})})}},3200:function(e,n,a){a.d(n,{I:function(){return i}});var r=a(4702),t=a(1793),o=(0,r.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),i=(0,t.v0)(o)},6712:function(e,n,a){var r=a(1413),t=a(322),o=a(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,t.P2)(void 0).data,a=n&&Object.keys(n),i=a&&Object.values(n).flat().map((function(e,n){return(0,r.Z)((0,r.Z)({},e),{},{id:a[n]})})),d=(0,o.nr)(i),s=n&&d.length>0?null===d||void 0===d?void 0:d.find((function(n){return n.month===e})):void 0,l=n&&(null===s||void 0===s?void 0:s.columns),u=n?null===s||void 0===s?void 0:s.allHours:"",c=n?null===s||void 0===s?void 0:s.currentHours:"",m=n?null===s||void 0===s?void 0:s.submitedHours:"",h=n?null===s||void 0===s?void 0:s.acceptedHours:"",v=n?null===s||void 0===s?void 0:s.rejectedHours:"",p=n&&d.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[0].days.reduce((function(e,n){return e+n.hours}),0):0,f=n&&d.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[1].days.reduce((function(e,n){return e+n.hours}),0):0,y=n&&d.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[2].days.reduce((function(e,n){return e+n.hours}),0):0,Z=n&&d?d.map((function(e){return e.month})):[];return{string:Z.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),data:n,databaseMonthsId:a,databaseMonthsCollection:d,databaseMonth:s,databaseColumns:l,databaseAllHours:u,dataCurrentHours:c,databaseAcceptedHours:h,databaseRejectedHours:v,dataBaseSubmitedHours:m,acceptedHoursSum:f,rejectedHoursSum:y,submitedHoursSum:p,databaseMonthsDates:Z}}},3572:function(e,n,a){a.d(n,{nr:function(){return i},qs:function(){return d}});var r=a(9439),t=a(3433),o=a(1413),i=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,a;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,o.Z)((0,o.Z)({},e),{},{columns:null===e||void 0===e||null===(a=e.columns)||void 0===a?void 0:a.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{days:e.days||[]})}))})})):[]},d=function(e,n,a){var i=e.source,d=e.destination;if(d&&(i.draggableId!==d.droppableId||i.index===d.index))if(i.droppableId!==d.droppableId){var s=n.findIndex((function(e){return e.id===i.droppableId})),l=n.findIndex((function(e){return e.id===d.droppableId})),u=(0,t.Z)(n[s].days),c=i.droppableId!==d.dropableId?(0,t.Z)(n[l].days):u,m=u.splice(i.index,1),h=(0,r.Z)(m,1)[0];c.splice(d.index,0,h);var v=(0,t.Z)(n);v[s]=(0,o.Z)((0,o.Z)({},n[s]),{},{days:u}),v[l]=(0,o.Z)((0,o.Z)({},n[l]),{},{days:c}),a(v)}else{var p=d.index,f=n.findIndex((function(e){return e.id===i.droppableId})),y=(0,t.Z)(n[f].days),Z=y.splice(i.index,1),x=(0,r.Z)(Z,1)[0];y.splice(p,0,x);var b=(0,t.Z)(n);b[f]=(0,o.Z)((0,o.Z)({},n[f]),{},{days:y}),a(b)}}}}]);
//# sourceMappingURL=311.8f8bd9fa.chunk.js.map