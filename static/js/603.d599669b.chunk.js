"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[603],{1603:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var r=t(9439),a=t(2791),s=t(3360),i=t(7732),o=t(8014),c=t(7689),l=t(4849),d=t(1830),u=t.n(d),m=t(3200),h=t(184),p=function(){var e,n=(0,c.s0)(),t=(0,a.useState)(!1),i=(0,r.Z)(t,2),o=i[0],d=i[1];return e=o?(0,h.jsx)(l.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,h.jsx)("div",{className:"text-start w-100",children:"Wyloguj"}),(0,h.jsx)(s.Z,{onClick:function(){d(!0),m.I.signOut().then((function(){n("/")})).catch((function(e){u().fire({title:"B\u0142\u0105d",text:e.message,confirmButtonColor:"rgb(31, 180, 255)"})})).finally((function(){d(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:o,children:e})},f=t(3027),x=t(9662),b=t(1100),g=t(3210),j=t(4165),y=t(3433),v=t(1413),Z=t(5861),N=t(5705),z=t(8007),w=z.Ry({userName:z.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(e){return"Imi\u0119"!==e})).required("Imi\u0119 wymagane"),hours:z.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(e){return"Liczba godzin"!==e})).required("Liczba godzin wymagana"),place:z.Z_().test("is-place-valid","Lokalizacja wymagana",(function(e){return"Lokalizacja"!==e})).required("Lokalizacja wymagana")}),k=t(9065),L=function(){var e=(0,k.Z)(),n=e.yearFromURL,t=e.monthFromURL,a=(0,g.Og)(),s=(0,r.Z)(a,2),i=s[0],o=s[1],c=(0,g.I8)({year:n,month:t}).data,l=(0,g._1)({year:n,month:t}).data,d=(0,N.TA)({initialValues:{id:crypto.randomUUID(),date:x.kc,hours:0,userName:"",place:""},validationSchema:w,onSubmit:function(){var e=(0,Z.Z)((0,j.Z)().mark((function e(r){var a;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.setFieldValue("id",crypto.randomUUID()),!(c.currentHours-+d.values.hours<0)){e.next=3;break}return e.abrupt("return");case 3:return a=(0,v.Z)((0,v.Z)({},r),{},{hours:+r.hours}),e.next=6,i({year:n,month:t,firstColumnBody:(0,v.Z)((0,v.Z)({},l),{},{days:null!==l&&void 0!==l&&l.days?[].concat((0,y.Z)(l.days),[a]):[a]})});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return{formik:d,success:o}},D=function(){var e=(0,k.Z)(),n=e.yearFromURL,t=e.monthFromURL,r=(0,g.a6)({year:n,month:t}).data,a=(0,g.I8)({year:n,month:t}).data,i=L(),o=i.formik,c=i.success,l=(0,b.Z)(c,"Zapisz dzie\u0144").btnContent;return(0,h.jsxs)(f.Z,{onSubmit:o.handleSubmit,className:"mt-2 ".concat(r?"":"d-none"," ").concat(0===(null===a||void 0===a?void 0:a.allHours)?"formContainer":""),children:[(0,h.jsxs)(f.Z.Group,{children:[(0,h.jsx)(f.Z.Label,{htmlFor:"userName",className:"mb-0 fs-7",children:"Podaj imi\u0119"}),(0,h.jsxs)(f.Z.Select,{id:"userName",name:"userName",onChange:o.handleChange,onBlur:o.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,h.jsx)("option",{children:"Imi\u0119"}),["Jan","Maria","Mariola"].map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))]}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.userName&&o.errors.userName&&o.errors.userName})]}),(0,h.jsxs)(f.Z.Group,{children:[(0,h.jsx)(f.Z.Label,{htmlFor:"date",className:"mb-0 fs-7",children:"Podaj dzie\u0144"}),(0,h.jsx)(f.Z.Control,{id:"date",type:"date",name:"date",value:o.values.date,onChange:o.handleChange,onBlur:o.handleBlur,min:x.kc,max:x.p1,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.date&&o.errors.date&&o.errors.date})]}),(0,h.jsxs)(f.Z.Group,{children:[(0,h.jsx)(f.Z.Label,{htmlFor:"hours",className:"mb-0 fs-7",children:"Podaj liczb\u0119 godzin"}),(0,h.jsxs)(f.Z.Select,{id:"hours",name:"hours",onChange:o.handleChange,onBlur:o.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,h.jsx)("option",{children:"Liczba godzin "}),[1,2,3,4,5,6,7,8,9,10].map((function(e){return(0,h.jsx)("option",{value:+e,children:e},e)}))]}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.hours&&o.errors.hours&&o.errors.hours})]}),(0,h.jsxs)(f.Z.Group,{children:[(0,h.jsx)(f.Z.Label,{htmlFor:"place",className:"mb-0 fs-7",children:"Podaj lokalizacj\u0119"}),(0,h.jsxs)(f.Z.Select,{id:"place",name:"place",onChange:o.handleChange,onBlur:o.handleBlur,size:"sm",className:"p-0 px-1 border border-primary",style:{cursor:"pointer"},children:[(0,h.jsx)("option",{children:"Lokalizacja"}),(0,h.jsx)("option",{value:"Wewn\u0105trz",children:"Wewn\u0105trz"}),(0,h.jsx)("option",{value:"Poza",children:"Poza"})]}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.place&&o.errors.place&&o.errors.place})]}),(0,h.jsx)(s.Z,{variant:"info",type:"submit",disabled:c.isLoading,className:"fw-medium w-100 mt-2 ",children:l}),(0,h.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:(null===a||void 0===a?void 0:a.currentHours)-+o.values.hours<0?"Brak dost\u0119pnych godzin":""})]})},S=function(e){return{monthDates:e&&Object.values(e).flatMap((function(n){return e&&Object.values(n)})).map((function(e){return e.id}))}},C={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},F=function(){var e=(0,c.s0)(),n=(0,g.S$)(void 0).data,t=S(n).monthDates,a=(0,g.Su)(),s=(0,r.Z)(a,2),i=s[0],o=s[1],l=(0,N.TA)({initialValues:{monthDate:"".concat(x.j0,"-").concat(x.vs)},validationSchema:z.Ry({monthDate:z.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==t&&void 0!==t&&t.includes(e))}))}),onSubmit:function(){var n=(0,Z.Z)((0,j.Z)().mark((function n(t){var r,a,s;return(0,j.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.monthDate.slice(0,4),a=t.monthDate.slice(-2),s=(0,v.Z)((0,v.Z)({},C),{},{id:t.monthDate}),n.next=5,i({year:r,month:a,monthBody:s});case 5:e("/".concat(t.monthDate));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:l,success:o}},B=t(8820),I=function(){var e=F(),n=e.formik,t=e.success,r=(0,b.Z)(t,(0,h.jsx)(B.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(f.Z,{onSubmit:n.handleSubmit,className:"mt-1",children:[(0,h.jsxs)(f.Z.Group,{children:[(0,h.jsx)(f.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-7",children:"Podaj miesi\u0105c"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(f.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(x.j0,"-").concat(x.vs),max:"2025-12",value:n.values.monthDate,onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,h.jsx)(s.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:r})]})]}),(0,h.jsx)(f.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:n.touched.monthDate&&n.errors.monthDate&&n.errors.monthDate})]})})},H=t(7858),U=t(23),T=t(1087),P=function(){var e=(0,g.S$)(void 0).data,n=S(e).monthDates,t=(0,k.Z)().monthURL,r=null===n||void 0===n?void 0:n.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),a=new Date(t),s=t&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a);return(0,h.jsx)(U.Z,{className:"monthListContainer bg-white border border-primary",children:e?r.map((function(e,t){return(0,h.jsx)(U.Z.Item,{className:"border-0 p-0 px-1",children:(0,h.jsx)(T.rU,{to:"/".concat(n[t]),className:"".concat(s!==e?"text-reset":"text-success"," text-decoration-none text-capitalize"),children:e})},e)})):(0,h.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},R=t(6856),A=function(){var e=(0,a.useState)(!1),n=(0,r.Z)(e,2),t=n[0],i=n[1];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(s.Z,{onClick:function(){return i(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,variant:"info",className:"fw-medium p-1 w-100 mt-1",children:["Wybierz miesi\u0105c",(0,h.jsx)(R.x3N,{className:"fs-3 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,h.jsx)(H.Z,{in:t,children:(0,h.jsx)("div",{children:(0,h.jsx)(P,{})})})]})},M=function(){var e=(0,c.TH)().pathname,n=(0,a.useState)(!1),t=(0,r.Z)(n,2),l=t[0],d=t[1];return(0,h.jsx)(h.Fragment,{children:["/"].includes(e)?null:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.Z,{variant:"secondary",onClick:function(){return d((function(e){return!e}))},className:"me-2 p-1 mt-1 col-2 col-sm-1",style:{position:"absolute",right:0},children:(0,h.jsx)(o.vHB,{className:"fs-1"})}),(0,h.jsxs)(i.Z,{show:l,onHide:function(){return d(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"w-20 bg-primary-subtle",style:{width:200},children:[(0,h.jsx)(i.Z.Header,{className:"pb-0",children:(0,h.jsx)(p,{})}),(0,h.jsxs)(i.Z.Body,{className:"pt-0",children:[(0,h.jsx)(I,{}),(0,h.jsx)(A,{}),(0,h.jsx)(D,{})]})]})]})})}},9662:function(e,n,t){t.d(n,{j0:function(){return o},kc:function(){return l},p1:function(){return d},vs:function(){return c},xk:function(){return u}});var r=new Date,a=function(e){var n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(n,"-").concat(t,"-").concat(r)},s=new Date(r.getTime()+12096e5),i=new Date(r.getTime()+5184e6),o=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),l=(String(r.getDate()).padStart(2,"0"),a(r),a(s)),d=a(i),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},3200:function(e,n,t){t.d(n,{I:function(){return i}});var r=t(4702),a=t(1793),s=(0,r.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),i=(0,a.v0)(s)},1100:function(e,n,t){var r=t(1830),a=t.n(r),s=t(2791),i=t(4849),o=t(184);n.Z=function(e,n){(0,s.useEffect)((function(){if(e.isError){var n=e.error,t=n&&"status"in n&&n.status&&n.status;a().fire({title:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[e.isError]);var t=n;return e.isLoading&&(t=(0,o.jsx)(i.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,o.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},9065:function(e,n,t){var r=t(7689);n.Z=function(){var e=(0,r.TH)().pathname.split("/").slice(-1)[0],n=null===e||void 0===e?void 0:e.slice(0,4),t=null===e||void 0===e?void 0:e.slice(-2);return{monthURL:e,yearFromURL:n,monthFromURL:t}}}}]);
//# sourceMappingURL=603.d599669b.chunk.js.map