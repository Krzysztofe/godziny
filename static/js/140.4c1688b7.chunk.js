"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[140],{9140:function(n,e,t){t.r(e),t.d(e,{default:function(){return V}});var a=t(9439),r=(t(2685),t(2791)),i=t(3360),o=t(7732),s=t(8820),c=t(7689),l=t(1087),u=t(7923),d=t(5048),m=t(9065),h=t(7615),f=t(9288),v=t(6021),x=t(1362),p=t(8841),g=function(){var n=(0,d.I0)(),e=(0,m.Z)(),t=e.yearFromURL,a=e.monthFromURL,i=(0,h.a6)({year:t,month:a}),o=i.data,s=i.error,c=i.isLoading,l=(0,v.xY)(),u=l.data,g=l.error,b=l.isLoading,Z=(0,h.yv)(),j=Z.data,w=Z.error,y=Z.isLoading;return(0,r.useEffect)((function(){n((0,f.jw)(o)),n((0,f.MP)(s)),n((0,f.ed)(c))}),[o,s,c,n]),(0,r.useEffect)((function(){n((0,x.Rf)(u)),n((0,x.E7)(g)),n((0,x.$$)(b))}),[u,g,b,n]),(0,r.useEffect)((function(){n((0,p.rn)(j)),n((0,p.K9)(w)),n((0,p.MT)(y))}),[j,w,y,n]),{}},b=(t(5293),t(4849)),Z=t(3200),j=t(2767),w=t(7425),y=t(184),N=function(){var n=(0,c.s0)(),e=(0,r.useState)(!1),t=(0,a.Z)(e,2),o=t[0],s=t[1],l=(0,y.jsxs)("div",{className:"d-flex align-center text-start w-100",children:[(0,y.jsx)(w.aIK,{className:"fs-6 me-1"}),"Wyloguj"]});return o&&(l=(0,y.jsx)(b.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),(0,y.jsx)(i.Z,{onClick:function(){s(!0),Z.I8.signOut().then((function(){n("/")})).catch((function(n){return(0,j.Z)(n)})).finally((function(){s(!1)}))},className:"fw-bolder text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:o,children:l})},z=t(3855),k=t(9662),L=t(1100),S=function(){var n=(0,v.xY)().data,e=n||[],t=null===e||void 0===e?void 0:e.map((function(n){return n.userName}));return{dataSelects:[{name:"userName",firstOption:"".concat(0===t.length?"Zapisz w ustawieniach":"Imi\u0119"),labelText:"Podaj imi\u0119",options:t},{name:"hours",firstOption:"Godziny",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}]}},C=t(4165),H=t(3433),D=t(1413),B=t(5861),F=t(5705),U=t(8007),R=U.Ry({userName:U.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(n){return"Imi\u0119"!==n})).required("Imi\u0119 wymagane"),hours:U.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(n){return"Liczba godzin"!==n})).required("Liczba godzin wymagana"),place:U.Z_().test("is-place-valid","Lokalizacja wymagana",(function(n){return"Lokalizacja"!==n})).required("Lokalizacja wymagana")}),I=function(){var n,e=(0,m.Z)(),t=e.yearFromURL,r=e.monthFromURL,i=(0,d.v9)((function(n){return n.monthsPanel})).month,o=(0,d.v9)((function(n){return n.users})).users,s=(0,h.Og)(),c=(0,a.Z)(s,2),l=c[0],u=c[1],f=i&&(null===i||void 0===i||null===(n=i.columns)||void 0===n?void 0:n[0]),v=(0,F.TA)({initialValues:{id:"",date:k.nt,hours:"",userName:"Imi\u0119",place:"",userColor:""},validationSchema:R,onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){var a,s,c,u,d;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===i||void 0===i||null===(a=i.calc)||void 0===a?void 0:a.currentHours)-+e.hours<0||0===(null===i||void 0===i||null===(s=i.calc)||void 0===s?void 0:s.currentHours))){n.next=2;break}return n.abrupt("return");case 2:return u=null===o||void 0===o||null===(c=o.find((function(n){return n.userName===e.userName})))||void 0===c?void 0:c.userColor,d=(0,D.Z)((0,D.Z)({},e),{},{id:crypto.randomUUID(),hours:+e.hours,userColor:u||""}),n.next=6,l({year:t,month:r,firstColumnBody:(0,D.Z)((0,D.Z)({},f),{},{days:null!==f&&void 0!==f&&f.days?[].concat((0,H.Z)(f.days),[d]):[d]})});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:v,success:u}},T=function(){var n,e,t=(0,d.v9)((function(n){return n.monthsPanel})).month,a=S().dataSelects,r=I(),o=r.formik,s=r.success,c=(0,L.Z)(s,"Dodaj dzie\u0144").btnContent,l=(0,m.Z)().isMonthInURL,u=null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.allHours,h=null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.currentHours;return(0,y.jsxs)(z.Z,{onSubmit:o.handleSubmit,className:"mt-2 ".concat(t&&l?"":"d-none"," ").concat(0===u?"formContainer":""),children:[a.map((function(n){var e=n.name,t=n.firstOption,a=n.labelText,r=n.options;return(0,y.jsxs)(z.Z.Group,{children:[(0,y.jsx)(z.Z.Label,{htmlFor:e,className:"mb-0 fs-6 fw-medium",children:a}),(0,y.jsxs)(z.Z.Select,{id:e,name:e,onChange:o.handleChange,onBlur:o.handleBlur,size:"sm",className:"p-0 px-1 border border-primary text-capitalize ".concat("Zapisz w ustawieniach"===t?"text-danger":""),style:{cursor:"pointer"},children:[(0,y.jsx)("option",{children:t}),null===r||void 0===r?void 0:r.map((function(n){return(0,y.jsx)("option",{value:n,children:n},n)}))]}),(0,y.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched[e]&&o.errors[e]&&o.errors[e]})]},a)})),(0,y.jsxs)(z.Z.Group,{children:[(0,y.jsx)(z.Z.Label,{htmlFor:"date",className:"mb-0 fs-6 fw-medium",children:"Podaj dzie\u0144"}),(0,y.jsx)(z.Z.Control,{id:"date",type:"date",name:"date",value:o.values.date,onChange:o.handleChange,onBlur:o.handleBlur,min:k.nt,max:k.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary",style:{minHeight:0,cursor:"pointer"}}),(0,y.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.date&&o.errors.date&&o.errors.date})]}),(0,y.jsx)(i.Z,{type:"submit",disabled:s.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:c}),(0,y.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:h-+o.values.hours<0||0===h?"Brak dost\u0119pnych godzin":""})]})},M=t(7858),E=t(6856),P=function(){var n,e,t=(0,m.Z)(),r=t.yearFromURL,i=t.monthFromURL,o=(0,d.v9)((function(n){return n.monthsPanel})).month,s=(0,h.uZ)(),c=(0,a.Z)(s,2),l=c[0],u=c[1],f=null===o||void 0===o||null===(n=o.calc)||void 0===n?void 0:n.submittedHours,v=null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.acceptedHours,x=(0,F.TA)({initialValues:{allHours:0},onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(f+v>+x.values.allHours)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l({year:r,month:i,allHours:+e.allHours});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:x,success:u}},A=function(){var n=P(),e=n.formik,t=n.success,a=(0,L.Z)(t,"Dodaj godziny").btnContent,r=(0,d.v9)((function(n){return n.monthsPanel})).month,o=null===r||void 0===r?void 0:r.calc.submittedHours,s=null===r||void 0===r?void 0:r.calc.acceptedHours,c=e.values.allHours/3.2,l="linear-gradient(to right, rgba(180,120,255) ".concat(c,"%, rgba(180,180,255) ").concat(c,"%)");return(0,y.jsxs)(z.Z,{onSubmit:e.handleSubmit,className:"",children:[(0,y.jsxs)("div",{className:"d-flex",children:[(0,y.jsx)(z.Z.Control,{type:"number",name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:"Liczba",size:"sm",className:"p-0 px-1 mb-2 border border-primary",style:{minHeight:0,cursor:"pointer",width:"fit-content"}}),(0,y.jsx)("span",{children:" \xa0 h"})]}),(0,y.jsx)(z.Z.Group,{className:"mt-2 d-flex align-items-center w-100",children:(0,y.jsx)(z.Z.Range,{name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,className:"form-range custom-range medium",style:{height:10,background:l}})}),(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsx)("div",{className:"fw-medium",children:"0 h"}),(0,y.jsx)("div",{className:"text-danger  mt-auto fs-8",children:o+s>+e.values.allHours?"Min. ".concat(o+s," h"):""}),(0,y.jsx)("div",{className:"fw-medium",children:"320 h"})]}),(0,y.jsx)(i.Z,{type:"submit",variant:"info",size:"sm",className:"fw-medium w-100",disabled:t.isLoading,children:a})]})},O=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],o=e[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.Z,{variant:"outline-info",onClick:function(){return o(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 ",children:["Godziny",(0,y.jsx)(E.x3N,{className:"fs-5 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,y.jsx)(M.Z,{in:t,children:(0,y.jsx)("div",{className:"bg-white p-0",children:(0,y.jsx)(A,{})})})]})},W={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},G=function(){var n=(0,d.v9)((function(n){return n.infoMonths})).infoMonths;return{validationSchema:U.Ry({monthDate:U.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==n&&void 0!==n&&n.includes(e))}))})}},Y=function(){var n=(0,c.s0)(),e=(0,h.CB)(),t=(0,a.Z)(e,2),i=t[0],o=t[1],s=(0,h.kM)(),l=(0,a.Z)(s,1)[0],u=(0,h.bw)(),m=(0,a.Z)(u,1)[0],f=(0,d.v9)((function(n){return n.infoMonths})).infoMonths,v=G().validationSchema,x=(0,r.useState)(!1),p=(0,a.Z)(x,2),g=p[0],b=p[1],Z=(0,F.TA)({initialValues:{monthDate:"".concat(k.j0,"-").concat(k.vs)},validationSchema:v,onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){var t,a,r;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.monthDate.slice(0,4),a=e.monthDate.slice(-2),r=(0,D.Z)((0,D.Z)({},W),{},{id:e.monthDate}),n.next=5,i({year:t,month:a,monthBody:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,r.useEffect)((function(){o.isSuccess?b(!0):b(!1)}),[o.isSuccess]),(0,r.useEffect)((function(){var e=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(){var t,a,r,i,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=9;break}return t=Z.values.monthDate.slice(0,4),a=Z.values.monthDate.slice(-2),r=f||[],e.next=6,l([].concat((0,H.Z)(r),["".concat(t,"-").concat(a)]));case 6:n("/".concat(Z.values.monthDate)),e.next=15;break;case 9:if(!o.isError){e.next=15;break}return i=Z.values.monthDate.slice(0,4),s=Z.values.monthDate.slice(-2),e.next=14,m({year:i,month:s});case 14:(0,j.Z)("");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[g,l]),{formik:Z,success:o}},$=function(){var n=Y(),e=n.formik,t=n.success,a=(0,L.Z)(t,(0,y.jsx)(s.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(z.Z,{onSubmit:e.handleSubmit,className:"mt-1",children:[(0,y.jsxs)(z.Z.Group,{children:[(0,y.jsx)(z.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-6 fw-medium",children:"Podaj miesi\u0105c"}),(0,y.jsxs)("div",{className:"d-flex",children:[(0,y.jsx)(z.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(k.j0,"-").concat(k.vs),max:"2025-12",value:e.values.monthDate,onChange:e.handleChange,onBlur:e.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,y.jsx)(i.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:a})]})]}),(0,y.jsx)(z.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:e.touched.monthDate&&e.errors.monthDate&&e.errors.monthDate})]})})},_=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],o=e[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.Z,{variant:"outline-info",onClick:function(){return o(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 ",children:["Miesi\u0105c",(0,y.jsx)(E.x3N,{className:"fs-4 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,y.jsx)(M.Z,{in:t,children:(0,y.jsx)("div",{className:"bg-white p-0",children:(0,y.jsx)($,{})})})]})},q=t(1419),K=t(9743),V=function(){g();var n=(0,m.Z)().isMonthInURL,e=(0,c.TH)().pathname,t=(0,r.useState)(!1),d=(0,a.Z)(t,2),h=d[0],f=d[1],v=(0,q.Z)().windowWidth;(0,r.useEffect)((function(){v>575&&f(!0)}),[v]);var x="100%";return v>=576&&(x="200px"),v>=768&&(x="230px"),v>=992&&(x="250px"),(0,y.jsx)(y.Fragment,{children:["/"].includes(e)?null:(0,y.jsxs)("aside",{children:[(0,y.jsx)(i.Z,{variant:"info",onClick:function(){return f((function(n){return!n}))},className:"rounded-0 p-0 ".concat(v>575?"d-none":"d-block"),style:{position:"absolute",height:"2.5rem",width:"110%",right:0,bottom:0},children:"Menu"}),(0,y.jsxs)(o.Z,{show:h,onHide:function(){return f(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"".concat(v<576&&"backgroundImage"," p-1 border-white"),style:{width:x,backgroundColor:v>575&&"rgba(255, 255, 255, 0.4)"},children:[(0,y.jsx)(o.Z.Header,{closeButton:v<576,className:"ms-auto"}),n&&(0,y.jsxs)(o.Z.Body,{className:"flex-grow-0 p-2 bg-white rounded",children:[(0,y.jsx)(_,{}),(0,y.jsx)(O,{}),v<576?(0,y.jsxs)(K.Z,{className:"w-100 fw-medium ",children:[" ",(0,y.jsx)(u.Z,{})," "]}):null,(0,y.jsx)(T,{})]}),(0,y.jsxs)(l.rU,{to:"/ustawienia",className:"text-info mt-auto fw-medium text-decoration-none ",children:[(0,y.jsx)(s.QAE,{})," Ustawienia"]}),(0,y.jsx)(N,{})]})]})})}},9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return l},st:function(){return u},vs:function(){return c},xk:function(){return d}});var a=new Date,r=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(a)},i=new Date(a.getTime()+12096e5),o=new Date(a.getTime()+5184e6),s=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),l=(String(a.getDate()).padStart(2,"0"),r(a),r(i)),u=r(o),d=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},3200:function(n,e,t){t.d(e,{I8:function(){return s}});var a=t(4702),r=t(1793),i=t(2685),o=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,r.v0)(o);(0,i.N8)(o)},1100:function(n,e,t){var a=t(1830),r=t.n(a),i=t(2791),o=t(4849),s=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;r().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(o.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},3234:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.UO)().monthURL;if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,t){var a=t(9439),r=t(2791);e.Z=function(){var n=(0,r.useState)(window.innerWidth),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,r.useEffect)((function(){var n=function(){i(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:t}}},7923:function(n,e,t){var a=t(5048),r=t(3234),i=t(1419),o=t(2677),s=t(184);e.Z=function(){var n,e,t,c,l,u=(0,a.v9)((function(n){return n.monthsPanel})).month,d=((0,r.Z)().monthURLStringFormat,(0,i.Z)().windowWidth,"col-4 col-xxl-3 p-0");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"".concat(d," text-end"),children:"Wszystkie"}),(0,s.jsxs)(o.Z,{className:"col-4 col-md-2 col-xxl-1 p-0 text-center",children:[null===u||void 0===u||null===(n=u.calc)||void 0===n?void 0:n.allHours," -"," ",(0,s.jsx)("span",{className:"".concat((null===u||void 0===u||null===(e=u.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===u||void 0===u||null===(t=u.calc)||void 0===t?void 0:t.currentHours})]}),(0,s.jsx)(o.Z,{className:"".concat(d," ").concat((null===u||void 0===u||null===(c=u.calc)||void 0===c?void 0:c.currentHours)<=0?"text-danger":""),children:(null===u||void 0===u||null===(l=u.calc)||void 0===l?void 0:l.currentHours)<0?"Brak":"Dost\u0119pne"})]})}},2767:function(n,e,t){t.d(e,{Z:function(){return o},p:function(){return i}});var a=t(1830),r=t.n(a),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},o=function(n){r().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},5293:function(){}}]);
//# sourceMappingURL=140.4c1688b7.chunk.js.map