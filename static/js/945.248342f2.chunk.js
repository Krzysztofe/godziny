"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[945],{2945:function(e,n,r){r.r(n),r.d(n,{default:function(){return P}});var d=r(1413),t=r(9439),o=r(2791),a=r(793),i=r(7689),s=r(322),l=r(4165),u=r(3433),c=r(5861),v=r(6355),m=r(1830),h=r.n(m),f=r(184),x=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsxs)("small",{children:["Imi\u0119:",e.day.userName]}),(0,f.jsx)("small",{children:e.day.date}),(0,f.jsxs)("small",{children:["Godz.: ",e.day.hours]})]})},p=r(3572),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,s.P2)(void 0).data,r=n&&Object.keys(n),t=r&&Object.values(n).flat().map((function(e,n){return(0,d.Z)((0,d.Z)({},e),{},{id:r[n]})})),o=(0,p.nr)(t),a=n&&o.length>0?null===o||void 0===o?void 0:o.find((function(n){return n.month===e})):void 0,i=n&&(null===a||void 0===a?void 0:a.columns),l=n?null===a||void 0===a?void 0:a.allHours:"",u=n?null===a||void 0===a?void 0:a.currentHours:"",c=n?null===a||void 0===a?void 0:a.submitedHours:"",v=n?null===a||void 0===a?void 0:a.acceptedHours:"",m=n?null===a||void 0===a?void 0:a.rejectedHours:"",h=n&&o.length>0&&null!==i&&void 0!==i&&i[0].days?null===i||void 0===i?void 0:i[0].days.reduce((function(e,n){return e+n.hours}),0):0,f=n&&o.length>0&&null!==i&&void 0!==i&&i[0].days?null===i||void 0===i?void 0:i[1].days.reduce((function(e,n){return e+n.hours}),0):0,x=n&&o.length>0&&null!==i&&void 0!==i&&i[0].days?null===i||void 0===i?void 0:i[2].days.reduce((function(e,n){return e+n.hours}),0):0;return{data:n,databaseMonthsId:r,databaseMonthsCollection:o,databaseMonth:a,databaseColumns:i,databaseAllHours:l,dataCurrentHours:u,databaseAcceptedHours:v,databaseRejectedHours:m,dataBaseSubmitedHours:c,acceptedHoursSum:f,rejectedHoursSum:x,submitedHoursSum:h}},b=function(e){var n,r=(0,s.P2)(void 0),o=r.data,m=(r.error,(0,s.X)()),p=(0,t.Z)(m,2),b=p[0],j=p[1],Z=(0,i.UO)().monthURL,H=y(Z),g=H.databaseColumns,w=(H.databaseAllHours,H.databaseMonth),S=(H.acceptedHoursSum,H.rejectedHoursSum,H.submitedHoursSum,function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h().fire({title:"Chcesz usun\u0105\u0107 dzie\u0144?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}).then(function(){var e=(0,c.Z)((0,l.Z)().mark((function e(r){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isConfirmed){e.next=4;break}return t=(0,u.Z)(g).map((function(e){return e&&e.days?(0,d.Z)((0,d.Z)({},e),{},{days:e.days.filter((function(e){return e.id!==n}))}):e})),e.next=4,b({id:o&&(null===w||void 0===w?void 0:w.id),columns:(0,d.Z)((0,d.Z)({},w),{},{columns:t})});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),C=(0,f.jsx)("div",{style:{border:"1px solid black"},children:(0,f.jsx)(a._l,{draggableId:e.day&&(null===e||void 0===e||null===(n=e.day)||void 0===n?void 0:n.id.toString()),index:e.index,children:function(n){return(0,f.jsxs)("div",(0,d.Z)((0,d.Z)((0,d.Z)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[(0,f.jsx)(x,{day:e.day}),(0,f.jsx)("button",{onClick:function(){return S(e.day.id)},children:(0,f.jsx)(v.AMf,{})})]}))}})});return j.isLoading&&(C=(0,f.jsx)("div",{children:' "Loading" '})),j.isError&&(C=(0,f.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,f.jsx)(f.Fragment,{children:C})},j=function(e){return(0,f.jsx)("div",{children:(0,f.jsx)(a.bK,{droppableId:e.column.id,children:function(n,r){var t,o;return(0,f.jsxs)("div",(0,d.Z)((0,d.Z)({},n.droppableProps),{},{ref:n.innerRef,style:{border:"1px solid black",width:"20vw",minHeight:"100vh",height:"fit-content"},children:[e.column.days&&e.column.days.length>0&&(null===(t=e.column)||void 0===t||null===(o=t.days)||void 0===o?void 0:o.map((function(e,n){return(0,f.jsx)(b,{day:e,index:n},crypto.randomUUID())}))),n.placeholder]}))}})})},Z=r(3855),H=r(3360),g=r(4849),w=r(5705),S=r(6712),C=r(8007),k=C.Ry({allHours:C.Rx().max(320,"Max. 320").required("Podaj liczb\u0119 godzin")}),I=function(){var e=(0,i.UO)().monthURL,n=(0,s.X)(),r=(0,t.Z)(n,2),o=r[0],a=r[1],u=(0,S.Z)(e),v=u.databaseMonth,m=u.data,h=(0,w.TA)({initialValues:{allHours:0},validationSchema:k,onSubmit:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n,r){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.resetForm,e.next=3,o({id:m&&(null===v||void 0===v?void 0:v.id),columns:(0,d.Z)((0,d.Z)({},v),{},{allHours:n.allHours})});case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()});return{formik:h,success:a}},z=r(8820),A=function(){var e=I(),n=e.formik,r=e.success,d=(0,f.jsx)(z.dEn,{style:{fontSize:"2rem"}});return r.isLoading&&(d=(0,f.jsx)(g.Z,{animation:"border",variant:"secondary",children:(0,f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),r.isError&&(d=(0,f.jsx)("div",{children:' "B\u0142\u0105d" '})),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Z.Z,{onSubmit:n.handleSubmit,className:"",children:(0,f.jsxs)(Z.Z.Group,{className:"d-flex align-items-end my-3",style:{height:"2rem"},children:[(0,f.jsx)(Z.Z.Label,{htmlFor:"allHours",className:"mb-0",children:"Podaj ilo\u015b\u0107 godzin"}),(0,f.jsxs)("div",{className:"align-self-start",children:[(0,f.jsx)(Z.Z.Control,{id:"allHours",type:"number",name:"allHours",min:1,value:n.values.allHours,onChange:n.handleChange,onBlur:n.handleBlur,size:"sm",className:"rounded-0 ms-2",style:{width:"4rem"}}),(0,f.jsx)(Z.Z.Text,{className:"text-danger d-block mt-0 mb-1 lh-0 ms-2",style:{fontSize:"0.7rem",height:"1rem"},children:n.touched.allHours&&n.errors.allHours&&n.errors.allHours})]}),(0,f.jsx)(H.Z,{type:"submit",variant:"secondary",className:"rounded-0 d-flex align-items-center justify-content-center px-0  bg-transparent  text-dark border-0",style:{width:"10%",height:"100%"},children:d})]})})})},B=r(7022),N=r(9743),L=r(2677),M=function(){var e=(0,i.UO)().monthURL,n=y(e),r=n.databaseAllHours,d=n.dataCurrentHours,t=e&&new Date(e);t&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(t);return(0,f.jsx)("header",{children:(0,f.jsx)(B.Z,{children:(0,f.jsxs)(N.Z,{children:[(0,f.jsx)(L.Z,{sm:7,className:"order-1 order-sm-2 px-0",children:(0,f.jsx)(A,{})}),(0,f.jsx)(L.Z,{sm:5,className:"order-2 order-sm-1 px-0",children:(0,f.jsxs)("div",{className:"d-flex my-3",children:[(0,f.jsxs)("div",{children:["Wszystkie: ",r]}),(0,f.jsxs)("div",{className:"ms-4",children:["Wolne: ",d]})]})})]})})})},P=function(){var e=(0,s.P2)(void 0),n=e.data,r=e.error,l=(0,s.X)(),u=(0,t.Z)(l,2),c=u[0],v=u[1],m=(0,i.UO)().monthURL,h=y(m),x=h.databaseAllHours,b=h.databaseColumns,Z=h.databaseAcceptedHours,H=h.databaseRejectedHours,g=h.dataBaseSubmitedHours,w=h.databaseMonth,S=h.submitedHoursSum,C=h.acceptedHoursSum,k=h.rejectedHoursSum,I=(0,o.useState)([]),z=(0,t.Z)(I,2),A=z[0],B=z[1];(0,o.useEffect)((function(){n&&w&&B(b)}),[n,m]),(0,o.useEffect)((function(){n&&(null===A||void 0===A?void 0:A.length)>1&&(null===w||void 0===w?void 0:w.month)&&c({id:n&&(null===w||void 0===w?void 0:w.id),columns:(0,d.Z)((0,d.Z)({},w),{},{columns:A,currentHours:x-S-C-k+k,submitedHours:S,acceptedHours:C,rejectedHours:k})})}),[A]);var N=v.isError?(0,f.jsx)("div",{children:"B\u0142\u0105d"}):(0,f.jsx)("div",{children:(0,f.jsx)("div",{children:(0,f.jsxs)(a.Z5,{onDragEnd:function(e){return(0,p.qs)(e,A,B)},children:[(0,f.jsx)("div",{style:{display:"flex"},children:[{header:"Z\u0142o\u017cone:",counter:g},{header:"Zakceptowane:",counter:Z},{header:"Odrzucone:",counter:H}].map((function(e){var n=e.header,r=e.counter;return(0,f.jsxs)("h6",{style:{marginLeft:20,width:"20vw"},children:[n," ","",r]},n)}))}),(0,f.jsx)("div",{style:{display:"flex"},children:A&&A.length>0&&A.map((function(e,n){return(0,f.jsx)(j,{column:e},e.id)}))})]})})});return r&&"error"in r&&(N=(0,f.jsxs)("div",{style:{textAlign:"center"},children:[" ",r.error," "]})),(0,f.jsx)(f.Fragment,{children:void 0===w||null===w?(0,f.jsx)("div",{style:{textAlign:"center"},children:"Brak danych, wybierz miesi\u0105c"}):(0,f.jsx)("div",{style:{display:"flex",marginLeft:"30vw"},children:(0,f.jsxs)("div",{children:[(0,f.jsx)(M,{}),N]})})})}},6712:function(e,n,r){var d=r(1413),t=r(322),o=r(3572);n.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,t.P2)(void 0).data,r=n&&Object.keys(n),a=r&&Object.values(n).flat().map((function(e,n){return(0,d.Z)((0,d.Z)({},e),{},{id:r[n]})})),i=(0,o.nr)(a),s=n&&i.length>0?null===i||void 0===i?void 0:i.find((function(n){return n.month===e})):void 0,l=n&&(null===s||void 0===s?void 0:s.columns),u=n?null===s||void 0===s?void 0:s.allHours:"",c=n?null===s||void 0===s?void 0:s.currentHours:"",v=n?null===s||void 0===s?void 0:s.submitedHours:"",m=n?null===s||void 0===s?void 0:s.acceptedHours:"",h=n?null===s||void 0===s?void 0:s.rejectedHours:"",f=n&&i.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[0].days.reduce((function(e,n){return e+n.hours}),0):0,x=n&&i.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[1].days.reduce((function(e,n){return e+n.hours}),0):0,p=n&&i.length>0&&null!==l&&void 0!==l&&l[0].days?null===l||void 0===l?void 0:l[2].days.reduce((function(e,n){return e+n.hours}),0):0,y=n&&i?i.map((function(e){return e.month})):[];return{string:y.map((function(e){var n=new Date(e);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(n)})),data:n,databaseMonthsId:r,databaseMonthsCollection:i,databaseMonth:s,databaseColumns:l,databaseAllHours:u,dataCurrentHours:c,databaseAcceptedHours:m,databaseRejectedHours:h,dataBaseSubmitedHours:v,acceptedHoursSum:x,rejectedHoursSum:p,submitedHoursSum:f,databaseMonthsDates:y}}},3572:function(e,n,r){r.d(n,{nr:function(){return a},qs:function(){return i}});var d=r(9439),t=r(3433),o=r(1413),a=function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){var n,r;return(null===e||void 0===e||null===(n=e.columns)||void 0===n?void 0:n.every((function(e){return e.hasOwnProperty("days")})))?e:(0,o.Z)((0,o.Z)({},e),{},{columns:null===e||void 0===e||null===(r=e.columns)||void 0===r?void 0:r.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{days:e.days||[]})}))})})):[]},i=function(e,n,r){var a=e.source,i=e.destination;if(i&&(a.draggableId!==i.droppableId||a.index===i.index))if(a.droppableId!==i.droppableId){var s=n.findIndex((function(e){return e.id===a.droppableId})),l=n.findIndex((function(e){return e.id===i.droppableId})),u=(0,t.Z)(n[s].days),c=a.droppableId!==i.dropableId?(0,t.Z)(n[l].days):u,v=u.splice(a.index,1),m=(0,d.Z)(v,1)[0];c.splice(i.index,0,m);var h=(0,t.Z)(n);h[s]=(0,o.Z)((0,o.Z)({},n[s]),{},{days:u}),h[l]=(0,o.Z)((0,o.Z)({},n[l]),{},{days:c}),r(h)}else{var f=i.index,x=n.findIndex((function(e){return e.id===a.droppableId})),p=(0,t.Z)(n[x].days),y=p.splice(a.index,1),b=(0,d.Z)(y,1)[0];p.splice(f,0,b);var j=(0,t.Z)(n);j[x]=(0,o.Z)((0,o.Z)({},n[x]),{},{days:p}),r(j)}}}}]);
//# sourceMappingURL=945.248342f2.chunk.js.map