"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[454],{9454:function(n,e,t){t.r(e),t.d(e,{default:function(){return X}});var a=t(9439),r=(t(2685),t(2791)),i=t(3360),o=t(7732),s=t(9743),c=t(7689),l=t(3234),u=t(9065),d=t(1419),m=t(7923),h=(t(2740),t(23)),f=t(8820),v=t(1087),x=t(4849),p=t(3200),g=t(2767),b=t(7425),j=t(184),Z=function(){var n=(0,c.s0)(),e=(0,r.useState)(!1),t=(0,a.Z)(e,2),o=t[0],s=t[1],l=(0,j.jsxs)("div",{className:"d-flex align-center  d-flex align-items-center text-start w-100",children:[(0,j.jsx)(b.aIK,{className:"fs-6 me-1 "}),"Wyloguj"]});return o&&(l=(0,j.jsx)(x.Z,{animation:"border",size:"sm",variant:"secondary",className:"mx-auto",children:(0,j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),(0,j.jsx)(i.Z,{onClick:function(){s(!0),p.I8.signOut().then((function(){n("/")})).catch((function(n){return(0,g.Z)(n)})).finally((function(){s(!1)}))},className:"fs-6 fw-medium text-info p-0 bg-transparent border-0 w-50",style:{cursor:"pointer",fontSize:"0.8rem"},disabled:o,children:l})},w=function(){var n="bg-transparent border-0 p-0 ps-2";return(0,j.jsxs)(h.Z,{className:"mt-auto fw-medium mb-3",children:[(0,j.jsx)(h.Z.Item,{className:n,children:(0,j.jsxs)(v.rU,{to:"/ustawienia",className:"text-info text-decoration-none",children:[(0,j.jsx)(f.QAE,{})," Ustawienia"]})}),(0,j.jsx)(h.Z.Item,{className:n,children:(0,j.jsx)(Z,{})})]})},y=t(3855),N=t(5048),z=t(9662),k=t(1100),L=t(6021),S=function(){var n=(0,L.xY)().data,e=n||[],t=null===e||void 0===e?void 0:e.map((function(n){return n.userName}));return{dataSelects:[{name:"userName",firstOption:"".concat(0===t.length?"Ustawienia":"Imi\u0119"),labelText:"Podaj imi\u0119",options:t},{name:"hours",firstOption:"Godziny",labelText:"Podaj liczb\u0119 godzin",options:[1,2,3,4,5,6,7,8,9,10]},{name:"place",firstOption:"Lokalizacja",labelText:"Podaj lokalizacj\u0119",options:["Wewn\u0105trz","Poza"]}]}},C=t(4165),H=t(3433),D=t(1413),B=t(5861),F=t(5705),U=t(7615),I=t(8007),R=I.Ry({userName:I.Z_().test("is-name-valid","Imi\u0119 wymagane",(function(n){return"Imi\u0119"!==n})).required("Imi\u0119 wymagane"),hours:I.Z_().test("is-hours-valid","Liczba godzin wymagana",(function(n){return"Liczba godzin"!==n})).required("Liczba godzin wymagana"),place:I.Z_().test("is-place-valid","Lokalizacja wymagana",(function(n){return"Lokalizacja"!==n})).required("Lokalizacja wymagana")}),T=function(){var n,e=(0,u.Z)(),t=e.yearFromURL,r=e.monthFromURL,i=(0,N.v9)((function(n){return n.monthsPanel})).month,o=(0,N.v9)((function(n){return n.users})).users,s=(0,U.Og)(),c=(0,a.Z)(s,2),l=c[0],d=c[1],m=i&&(null===i||void 0===i||null===(n=i.columns)||void 0===n?void 0:n[0]),h=(0,F.TA)({initialValues:{id:"",date:z.nt,hours:"",userName:"Imi\u0119",place:"",userColor:""},validationSchema:R,onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){var a,s,c,u,d;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((null===i||void 0===i||null===(a=i.calc)||void 0===a?void 0:a.currentHours)-+e.hours<0||0===(null===i||void 0===i||null===(s=i.calc)||void 0===s?void 0:s.currentHours))){n.next=2;break}return n.abrupt("return");case 2:return u=null===o||void 0===o||null===(c=o.find((function(n){return n.userName===e.userName})))||void 0===c?void 0:c.userColor,d=(0,D.Z)((0,D.Z)({},e),{},{id:crypto.randomUUID(),hours:+e.hours,userColor:u||""}),n.next=6,l({year:t,month:r,firstColumnBody:(0,D.Z)((0,D.Z)({},m),{},{days:null!==m&&void 0!==m&&m.days?[].concat((0,H.Z)(m.days),[d]):[d]})});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:h,success:d}},M=function(){var n,e,t=(0,N.v9)((function(n){return n.monthsPanel})).month,a=S().dataSelects,r=T(),o=r.formik,s=r.success,c=(0,k.Z)(s,"Dodaj dzie\u0144").btnContent,l=(0,u.Z)().isMonthInURL,d=null===t||void 0===t||null===(n=t.calc)||void 0===n?void 0:n.allHours,m=null===t||void 0===t||null===(e=t.calc)||void 0===e?void 0:e.currentHours;return(0,j.jsxs)(y.Z,{onSubmit:o.handleSubmit,className:"mt-2 ".concat(t&&l?"":"d-none"," ").concat(0===d?"formContainer":""),children:[a.map((function(n){var e=n.name,t=n.firstOption,a=n.labelText,r=n.options;return(0,j.jsxs)(y.Z.Group,{children:[(0,j.jsx)(y.Z.Label,{htmlFor:e,className:"mb-0 fs-6 fw-medium",children:a}),(0,j.jsxs)(y.Z.Select,{id:e,name:e,onChange:o.handleChange,onBlur:o.handleBlur,size:"sm",className:"p-0 px-1 border border-primary shadow-sm text-capitalize ".concat("Ustawienia"===t?"text-danger":""),style:{cursor:"pointer"},children:[(0,j.jsx)("option",{children:t}),null===r||void 0===r?void 0:r.map((function(n){return(0,j.jsx)("option",{value:n,children:n},n)}))]}),(0,j.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched[e]&&o.errors[e]&&o.errors[e]})]},a)})),(0,j.jsxs)(y.Z.Group,{children:[(0,j.jsx)(y.Z.Label,{htmlFor:"date",className:"mb-0 fs-6 fw-medium",children:"Podaj dzie\u0144"}),(0,j.jsx)(y.Z.Control,{id:"date",type:"date",name:"date",value:o.values.date,onChange:o.handleChange,onBlur:o.handleBlur,min:z.nt,max:z.st,placeholder:"Liczba",size:"sm",className:"p-0 px-1 border border-primary shadow-sm",style:{minHeight:0,cursor:"pointer"}}),(0,j.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:o.touched.date&&o.errors.date&&o.errors.date})]}),(0,j.jsx)(i.Z,{type:"submit",disabled:s.isLoading,className:"fw-medium w-100 mt-2 bg-info text-white",children:c}),(0,j.jsx)("div",{className:"text-danger d-block mt-0 fs-8",style:{height:"0.7rem"},children:m-+o.values.hours<0||0===m?"Brak dost\u0119pnych godzin":""})]})},E=t(7858),P=t(6856),A=function(){var n,e,t=(0,u.Z)(),r=t.yearFromURL,i=t.monthFromURL,o=(0,N.v9)((function(n){return n.monthsPanel})).month,s=(0,U.uZ)(),c=(0,a.Z)(s,2),l=c[0],d=c[1],m=null===o||void 0===o||null===(n=o.calc)||void 0===n?void 0:n.submittedHours,h=null===o||void 0===o||null===(e=o.calc)||void 0===e?void 0:e.acceptedHours,f=(0,F.TA)({initialValues:{allHours:0},onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(m+h>+f.values.allHours)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l({year:r,month:i,allHours:+e.allHours});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return{formik:f,success:d}},W=function(){var n=A(),e=n.formik,t=n.success,a=(0,k.Z)(t,"Dodaj godziny").btnContent,r=(0,N.v9)((function(n){return n.monthsPanel})).month,o=null===r||void 0===r?void 0:r.calc.submittedHours,s=null===r||void 0===r?void 0:r.calc.acceptedHours,c=e.values.allHours/3.2,l="linear-gradient(to right, rgba(180,120,255) ".concat(c,"%, rgba(180,180,255) ").concat(c,"%)");return(0,j.jsxs)(y.Z,{onSubmit:e.handleSubmit,className:"",children:[(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)(y.Z.Control,{type:"number",name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:"Liczba",size:"sm",className:"p-0 px-1 my-2 border border-primary shadow-sm",style:{minHeight:0,cursor:"pointer",width:"fit-content"}}),(0,j.jsx)("div",{className:"fw-medium",children:" \xa0 h"})]}),(0,j.jsx)(y.Z.Group,{className:"mt-2 d-flex align-items-center w-100",children:(0,j.jsx)(y.Z.Range,{name:"allHours",min:0,max:320,value:e.values.allHours,onChange:e.handleChange,onBlur:e.handleBlur,className:"form-range custom-range medium",style:{height:10,background:l}})}),(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("div",{className:"fw-medium",children:"0 h"}),(0,j.jsx)("div",{className:"text-danger  mt-auto fs-8",children:o+s>+e.values.allHours?"Min. ".concat(o+s," h"):""}),(0,j.jsx)("div",{className:"fw-medium",children:"320 h"})]}),(0,j.jsx)(i.Z,{type:"submit",variant:"info",size:"sm",className:"fw-medium w-100",disabled:t.isLoading,children:a})]})},O=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],o=e[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(i.Z,{variant:"outline-info",onClick:function(){return o(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 ",children:["Godziny",(0,j.jsx)(P.x3N,{className:"fs-5 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,j.jsx)(E.Z,{in:t,children:(0,j.jsx)("div",{className:"bg-white p-0",children:(0,j.jsx)(W,{})})})]})},G={id:"",columns:[{id:"submitted",days:[]},{id:"accepted",days:[]},{id:"rejected",days:[]}],calc:{allHours:0,currentHours:0,submittedHours:0,acceptedHours:0,rejectedHours:0}},Y=function(){var n=(0,N.v9)((function(n){return n.infoMonths})).infoMonths;return{validationSchema:I.Ry({monthDate:I.Z_().test("is-in-database","Miesi\u0105c zapisany",(function(e){return void 0!==e&&!(null!==n&&void 0!==n&&n.includes(e))}))})}},$=function(){var n=(0,c.s0)(),e=(0,U.CB)(),t=(0,a.Z)(e,2),i=t[0],o=t[1],s=(0,U.kM)(),l=(0,a.Z)(s,1)[0],u=(0,U.bw)(),d=(0,a.Z)(u,1)[0],m=(0,N.v9)((function(n){return n.infoMonths})).infoMonths,h=Y().validationSchema,f=(0,r.useState)(!1),v=(0,a.Z)(f,2),x=v[0],p=v[1],b=(0,F.TA)({initialValues:{monthDate:"".concat(z.j0,"-").concat(z.vs)},validationSchema:h,onSubmit:function(){var n=(0,B.Z)((0,C.Z)().mark((function n(e){var t,a,r;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.monthDate.slice(0,4),a=e.monthDate.slice(-2),r=(0,D.Z)((0,D.Z)({},G),{},{id:e.monthDate}),n.next=5,i({year:t,month:a,monthBody:r});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,r.useEffect)((function(){o.isSuccess?p(!0):p(!1)}),[o.isSuccess]),(0,r.useEffect)((function(){var e=function(){var e=(0,B.Z)((0,C.Z)().mark((function e(){var t,a,r,i,s;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=9;break}return t=b.values.monthDate.slice(0,4),a=b.values.monthDate.slice(-2),r=m||[],e.next=6,l([].concat((0,H.Z)(r),["".concat(t,"-").concat(a)]));case 6:n("/".concat(b.values.monthDate)),e.next=15;break;case 9:if(!o.isError){e.next=15;break}return i=b.values.monthDate.slice(0,4),s=b.values.monthDate.slice(-2),e.next=14,d({year:i,month:s});case 14:(0,g.Z)("");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[x,l]),{formik:b,success:o}},_=function(){var n=$(),e=n.formik,t=n.success,a=(0,k.Z)(t,(0,j.jsx)(f.dEn,{className:"text-info",style:{fontSize:"1.4rem"}})).btnContent;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(y.Z,{onSubmit:e.handleSubmit,className:"mt-1",children:[(0,j.jsxs)(y.Z.Group,{children:[(0,j.jsx)(y.Z.Label,{htmlFor:"monthDate",className:"mb-0 fs-6 fw-medium",children:"Podaj miesi\u0105c"}),(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)(y.Z.Control,{id:"monthDate",type:"month",name:"monthDate",min:"".concat(z.j0,"-").concat(z.vs),max:"2025-12",value:e.values.monthDate,onChange:e.handleChange,onBlur:e.handleBlur,size:"sm",className:"p-0 px-1 d-block border border-primary shadow-sm text-capitalize",style:{minHeight:0,height:"fit-content",cursor:"pointer"}}),(0,j.jsx)(i.Z,{type:"submit",disabled:t.isLoading,className:"col-2 d-flex justify-content-center align-items-center m-0 justify-content-center p-0 m-0 ms-1  text-info-emphasis border-0 bg-transparent",children:a})]})]}),(0,j.jsx)(y.Z.Text,{className:"text-danger d-block mt-0 lh-0",style:{fontSize:"0.6rem",height:"0.7rem"},children:e.touched.monthDate&&e.errors.monthDate&&e.errors.monthDate})]})})},q=function(){var n=(0,r.useState)(!1),e=(0,a.Z)(n,2),t=e[0],o=e[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(i.Z,{variant:"outline-info",onClick:function(){return o(!t)},"aria-controls":"example-collapse-text","aria-expanded":t,className:"fw-medium w-100 mt-2 ",children:["Miesi\u0105c",(0,j.jsx)(P.x3N,{className:"fs-4 fw-medium",style:{transform:"".concat(t?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,j.jsx)(E.Z,{in:t,children:(0,j.jsx)("div",{className:"bg-white p-0",children:(0,j.jsx)(_,{})})})]})},K=t(9288),V=t(1362),J=t(8841),Q=function(){var n=(0,N.I0)(),e=(0,u.Z)(),t=e.yearFromURL,a=e.monthFromURL,i=(0,U.a6)({year:t,month:a}),o=i.data,s=i.error,c=i.isLoading,l=(0,L.xY)(),d=l.data,m=l.error,h=l.isLoading,f=(0,U.yv)(),v=f.data,x=f.error,p=f.isLoading;return(0,r.useEffect)((function(){n((0,K.jw)(o)),n((0,K.MP)(s)),n((0,K.ed)(c))}),[o,s,c,n]),(0,r.useEffect)((function(){n((0,V.Rf)(d)),n((0,V.E7)(m)),n((0,V.$$)(h))}),[d,m,h,n]),(0,r.useEffect)((function(){n((0,J.rn)(v)),n((0,J.K9)(x)),n((0,J.MT)(p))}),[v,x,p,n]),{}},X=function(){Q();var n=(0,u.Z)().isMonthInURL,e=(0,c.TH)().pathname,t=(0,r.useState)(!1),h=(0,a.Z)(t,2),f=h[0],v=h[1],x=(0,d.Z)().windowWidth,p=(0,l.Z)().monthURLStringFormat;(0,r.useEffect)((function(){x>575&&v(!0)}),[x]);var g="100%";return x>=576&&(g="200px"),x>=768&&(g="230px"),x>=992&&(g="250px"),(0,j.jsx)(j.Fragment,{children:["/"].includes(e)?null:(0,j.jsxs)("aside",{children:[(0,j.jsx)(i.Z,{variant:"info",onClick:function(){return v((function(n){return!n}))},className:"rounded-0 p-0 fw-medium ".concat(x>575?"d-none":"d-block"),style:{position:"absolute",height:"2.5rem",width:"100%",right:0,bottom:0},children:"Menu"}),(0,j.jsxs)(o.Z,{show:f,onHide:function(){return v(!1)},name:"Disable backdrop",scroll:!0,backdrop:!1,className:"".concat(x<576&&"backgroundImage"," ").concat(x<576&&"border-0"," p-1 border-white"),style:{width:g,backgroundColor:"rgba(255, 255, 255, 0.6)"},children:[x<576&&(0,j.jsx)(o.Z.Header,{closeButton:!0,className:"w-100",children:(0,j.jsx)("div",{className:"text-capitalize fw-medium",children:p})}),n&&(0,j.jsxs)(o.Z.Body,{className:"flex-grow-0 p-2 bg-white rounded",children:[(0,j.jsx)(q,{}),(0,j.jsx)(O,{}),x<576?(0,j.jsx)(s.Z,{className:"w-100 fw-medium ",children:(0,j.jsx)(m.Z,{})}):null,(0,j.jsx)(M,{})]}),(0,j.jsx)(w,{})]})]})})}},9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return l},st:function(){return u},vs:function(){return c},xk:function(){return d}});var a=new Date,r=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(a)},i=new Date(a.getTime()+12096e5),o=new Date(a.getTime()+5184e6),s=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),l=(String(a.getDate()).padStart(2,"0"),r(a),r(i)),u=r(o),d=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(a)},3200:function(n,e,t){t.d(e,{I8:function(){return s}});var a=t(4702),r=t(1793),i=t(2685),o=(0,a.ZF)({apiKey:"AIzaSyAvvdzLRow-8AdA5zJH6uv19MOsPLNwC3A",authDomain:"godziny-3b30f.firebaseapp.com",projectId:"godziny-3b30f",storageBucket:"godziny-3b30f.appspot.com",messagingSenderId:"367174950216",appId:"1:367174950216:web:0bd1ea3c1c77b5e797677d"}),s=(0,r.v0)(o);(0,i.N8)(o)},1100:function(n,e,t){var a=t(1830),r=t.n(a),i=t(2791),o=t(4849),s=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;r().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(o.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},3234:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.TH)().pathname.slice(1);if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var a=t(7689);e.Z=function(){var n=(0,a.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,t){var a=t(9439),r=t(2791);e.Z=function(){var n=(0,r.useState)(window.innerWidth),e=(0,a.Z)(n,2),t=e[0],i=e[1];return(0,r.useEffect)((function(){var n=function(){i(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:t}}},7923:function(n,e,t){var a=t(5048),r=t(3234),i=t(1419),o=t(2677),s=t(184);e.Z=function(){var n,e,t,c,l,u=(0,a.v9)((function(n){return n.monthsPanel})).month,d=((0,r.Z)().monthURLStringFormat,(0,i.Z)().windowWidth,"col-4 col-xxl-3 p-0");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"".concat(d," text-end"),children:"Wszystkie"}),(0,s.jsxs)(o.Z,{className:"col-4 col-md-2 col-xxl-1 p-0 text-center",children:[null===u||void 0===u||null===(n=u.calc)||void 0===n?void 0:n.allHours," -"," ",(0,s.jsx)("span",{className:"".concat((null===u||void 0===u||null===(e=u.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===u||void 0===u||null===(t=u.calc)||void 0===t?void 0:t.currentHours})]}),(0,s.jsx)(o.Z,{className:"".concat(d," ").concat((null===u||void 0===u||null===(c=u.calc)||void 0===c?void 0:c.currentHours)<=0?"text-danger":""),children:(null===u||void 0===u||null===(l=u.calc)||void 0===l?void 0:l.currentHours)<0?"Brak":"Dost\u0119pne"})]})}},2767:function(n,e,t){t.d(e,{Z:function(){return o},p:function(){return i}});var a=t(1830),r=t.n(a),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},o=function(n){r().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},2740:function(){}}]);
//# sourceMappingURL=454.7a939e44.chunk.js.map