"use strict";(self.webpackChunkgodziny=self.webpackChunkgodziny||[]).push([[286],{9662:function(n,e,t){t.d(e,{j0:function(){return s},nt:function(){return l},st:function(){return d},vs:function(){return c},xk:function(){return u}});var r=new Date,o=function(n){var e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(r)},i=new Date(r.getTime()+12096e5),a=new Date(r.getTime()+5184e6),s=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),l=(String(r.getDate()).padStart(2,"0"),o(r),o(i)),d=o(a),u=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(r)},1100:function(n,e,t){var r=t(1830),o=t.n(r),i=t(2791),a=t(4849),s=t(184);e.Z=function(n,e){(0,i.useEffect)((function(){if(n.isError){var e=n.error,t=e&&"status"in e&&e.status&&e.status;o().fire({text:"B\u0142\u0105d: ".concat(t||""),confirmButtonColor:"rgb(31, 180, 255)"})}}),[n.isError]);var t=e;return n.isLoading&&(t=(0,s.jsx)(a.Z,{animation:"border",size:"sm",variant:"secondary",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})),{btnContent:t}}},2218:function(n,e,t){var r=t(3433),o=t(5048);e.Z=function(){var n,e=(0,o.v9)((function(n){return n.infoMonths})).infoMonths,t=e&&(null===(n=(0,r.Z)(e))||void 0===n?void 0:n.sort((function(n,e){return new Date(n).getTime()-new Date(e).getTime()}))),i=null===t||void 0===t?void 0:t.map((function(n){var e=new Date(n);return new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(e)}));return{sortedInfoMonths:t,databaseMonthsDatesToString:i}}},3234:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.UO)().monthURL;if(n&&/^\d{4}-\d{2}$/.test(n)){var e,t=n&&new Date(n);return{monthURLStringFormat:t&&(null===(e=new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}))||void 0===e?void 0:e.format(t))}}return{monthURLStringFormat:""}}},9065:function(n,e,t){var r=t(7689);e.Z=function(){var n=(0,r.TH)().pathname.split("/").slice(-1)[0],e=null===n||void 0===n?void 0:n.slice(0,4),t=null===n||void 0===n?void 0:n.slice(-2);return{monthURL:n,yearFromURL:e,monthFromURL:t,isMonthInURL:/^\d{4}-\d{2}$/.test(n)}}},1419:function(n,e,t){var r=t(9439),o=t(2791);e.Z=function(){var n=(0,o.useState)(window.innerWidth),e=(0,r.Z)(n,2),t=e[0],i=e[1];return(0,o.useEffect)((function(){var n=function(){i(window.innerWidth)};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),{windowWidth:t}}},4286:function(n,e,t){t.r(e),t.d(e,{default:function(){return K}});var r=t(7022),o=(t(5293),t(5048)),i=t(9662),a=t(1413),s=t(9439),c=t(2791),l=t(793),d=t(7762),u=t(3433),m=function(n){return Array.isArray(n)?null===n||void 0===n?void 0:n.map((function(n){return null!==n&&void 0!==n&&n.hasOwnProperty("days")?n:(0,a.Z)((0,a.Z)({},n),{},{days:[]})})):[]},v=function(){var n,e=(0,o.v9)((function(n){return n.monthsPanel})).month,t=0,r=0,i=0,a=m(null===e||void 0===e?void 0:e.columns),s=(0,d.Z)(a);try{for(s.s();!(n=s.n()).done;){var c=n.value,l=(c.days||[]).reduce((function(n,e){var t;return n+(null!==(t=null===e||void 0===e?void 0:e.hours)&&void 0!==t?t:0)}),0);switch(c.id){case"submitted":t=l;break;case"accepted":r=l;break;case"rejected":i=l}}}catch(u){s.e(u)}finally{s.f()}return{submittedHoursSum:t,acceptedHoursSum:r,rejectedHoursSum:i}},f=t(9065),h=t(7615),x=t(2677),p=t(4165),g=t(5861),y=t(3360),Z=t(7425),b=t(1830),j=t.n(b),w=t(1100),N=t(2767),I=t(6856),L=t(1578),D=t(184),S=function(n){var e,t;if(null!==n&&void 0!==n&&null!==(e=n.day)&&void 0!==e&&e.date){var r,o,i=new Date(n.day.date);return t=new Intl.DateTimeFormat("pl-PL",{day:"numeric",month:"short"}).format(i),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"d-flex justify-content-between fs-7",children:[(0,D.jsx)("div",{children:null===(r=n.day)||void 0===r?void 0:r.userName}),(0,D.jsx)("div",{children:"Poza"===(null===(o=n.day)||void 0===o?void 0:o.place)?(0,D.jsx)(L.ols,{style:{color:"rgb(80,173,150)"}}):(0,D.jsx)(I.P8U,{style:{color:"rgb(255, 181, 9)"}})})]}),(0,D.jsx)("div",{className:"d-flex fw-medium justify-content-between",children:(0,D.jsx)("div",{children:t||""})})]})}return(0,D.jsx)("div",{children:"Brak danych"})},C=function(n){var e,t=(0,f.Z)(),r=t.yearFromURL,i=t.monthFromURL,c=(0,o.v9)((function(n){return n.monthsPanel})).month,d=(0,h.ur)(),u=(0,s.Z)(d,2),m=u[0],v=u[1],x=(0,w.Z)(v,(0,D.jsx)(Z.GnT,{className:"text-danger"})).btnContent,b=function(){var e=(0,g.Z)((0,p.Z)().mark((function e(t,o){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j().fire((0,N.p)("Chcesz usun\u0105\u0107 dzie\u0144")).then(function(){var e=(0,g.Z)((0,p.Z)().mark((function e(a){var s,l,d;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=4;break}return d=null===c||void 0===c||null===(s=c.columns[t])||void 0===s||null===(l=s.days)||void 0===l?void 0:l.filter((function(n){return(null===n||void 0===n?void 0:n.id)!==o})),e.next=4,m({year:r,month:i,colIdx:n.columnIdx,daysBody:d||[]});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,D.jsx)(l._l,{draggableId:n.day&&(null===n||void 0===n||null===(e=n.day)||void 0===e?void 0:e.id),index:n.dayIdx,isDragDisabled:!1,children:function(e,t){var r,o;return(0,D.jsx)("div",(0,a.Z)((0,a.Z)((0,a.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,className:"mb-2 bg-white rounded border ".concat(t.isDragging?"border-secondary-subtle":"border-transparent"," "),children:(0,D.jsxs)("div",{className:"mb-2 px-1 py-2 py-sm-1",style:{borderTop:"8px solid ".concat(null===(r=n.day)||void 0===r?void 0:r.userColor),opacity:t.isDragging?.8:1},children:[(0,D.jsx)(S,{day:n.day}),(0,D.jsxs)(y.Z,{onClick:function(){return b(n.columnIdx,n.day.id)},className:"d-flex justify-content-between  align-items-center w-100 p-0 bg-transparent border-0",disabled:v.isLoading,children:[(0,D.jsxs)("div",{className:"d-flex align-items-center fs-7",children:[null===(o=n.day)||void 0===o?void 0:o.hours," h"]}),(0,D.jsx)("div",{className:"d-flex align-items-center",children:x})]})]})}))}})},T=function(n){return(0,D.jsx)(x.Z,{children:(0,D.jsx)(l.bK,{droppableId:n.column.id,children:function(e,t){return(0,D.jsxs)("div",(0,a.Z)((0,a.Z)({},e.droppableProps),{},{ref:e.innerRef,className:"p-1 h-100 ".concat(t.isDraggingOver?"bg-dark-subtle":"bg-primary"),children:[Array.isArray(n.column.days)?n.column.days.map((function(e,t){return(0,D.jsx)(C,{day:e,columnIdx:n.columnIdx,dayIdx:t},crypto.randomUUID())})):[],e.placeholder]}))}})})},z=function(n){var e,t,r,i=(0,o.v9)((function(n){return n.monthsPanel})).month;return(0,D.jsx)(D.Fragment,{children:[{headerText:"Z\u0142o\u017cone:",counter:null===i||void 0===i||null===(e=i.calc)||void 0===e?void 0:e.submittedHours},{headerText:"Przyznane:",counter:null===i||void 0===i||null===(t=i.calc)||void 0===t?void 0:t.acceptedHours},{headerText:"Odrzucone:",counter:null===i||void 0===i||null===(r=i.calc)||void 0===r?void 0:r.rejectedHours}].map((function(e){var t=e.headerText,r=e.counter;return(0,D.jsxs)(x.Z,{className:"bg-primary text-dark-emphasis fw-medium p-1 ".concat(0===n.thumbPosition?"border-bottom border-2 border-primary":" border-bottom border-2 border-white"),style:{fontSize:"clamp(0.8rem, 3.4vw, 1rem)"},children:[t," ","",r]},t)}))})},H=function(){var n=(0,c.useRef)(null),e=(0,c.useState)(0),t=(0,s.Z)(e,2),r=t[0],o=t[1];return{scrollableRef:n,thumbPosition:r,handleScroll:function(){var e=n.current;if(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;o(t/(r-i)*100)}}}},k=function(){var n=(0,f.Z)(),e=n.yearFromURL,t=n.monthFromURL,r=(0,h.CB)(),i=(0,s.Z)(r,1)[0],d=v(),x=d.submittedHoursSum,p=d.acceptedHoursSum,g=d.rejectedHoursSum,y=H(),Z=y.scrollableRef,b=y.thumbPosition,j=y.handleScroll,w=(0,o.v9)((function(n){return n.monthsPanel})).month,N=m(null===w||void 0===w?void 0:w.columns),I=(0,c.useState)([]),L=(0,s.Z)(I,2),S=L[0],C=L[1];(0,c.useEffect)((function(){C(N)}),[w]),(0,c.useEffect)((function(){var n,r;S.length>0&&i({year:e,month:t,monthBody:(0,a.Z)((0,a.Z)({},w),{},{columns:S,calc:(0,a.Z)((0,a.Z)({},null===w||void 0===w?void 0:w.calc),{},{currentHours:(null!==(n=null===w||void 0===w||null===(r=w.calc)||void 0===r?void 0:r.allHours)&&void 0!==n?n:0)-x-p-g+g,submittedHours:x,acceptedHours:p,rejectedHours:g})})})}),[S]);var k="d-flex column-gap-1";return(0,D.jsxs)("div",{ref:Z,onScroll:j,className:" p-0 overflow-y-scroll",style:{height:"fit-content",maxHeight:"100%"},children:[(0,D.jsx)("div",{className:"".concat(k," sticky-top  "),children:(0,D.jsx)(z,{thumbPosition:b})}),(0,D.jsx)("div",{className:"".concat(k),children:(0,D.jsx)(l.Z5,{onDragEnd:function(n){!function(n,e,t){var r=n.source,o=n.destination;if(o&&(r.draggableId!==o.droppableId||r.index===o.index))if(r.droppableId!==o.droppableId){var i=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===r.droppableId})),c=null===e||void 0===e?void 0:e.findIndex((function(n){return n.id===o.droppableId})),l=e&&(0,u.Z)(e[i].days),d=r.droppableId!==o.dropableId?(0,u.Z)(e[c].days):l,m=l.splice(r.index,1),v=(0,s.Z)(m,1)[0];d.splice(o.index,0,v);var f=(0,u.Z)(e);f[i]=(0,a.Z)((0,a.Z)({},e[i]),{},{days:l}),f[c]=(0,a.Z)((0,a.Z)({},e[c]),{},{days:d}),t(f)}else{var h=o.index,x=e.findIndex((function(n){return n.id===r.droppableId})),p=(0,u.Z)(e[x].days),g=p.splice(r.index,1),y=(0,s.Z)(g,1)[0];p.splice(h,0,y);var Z=(0,u.Z)(e);Z[x]=(0,a.Z)((0,a.Z)({},e[x]),{},{days:p}),t(Z)}}(n,S,C)},children:null===S||void 0===S?void 0:S.map((function(n,e){return(0,D.jsx)(T,{column:n,columnIdx:e},n.id)}))})})]})},U=t(4849),P=t(9743),F=t(7858),R=t(23),B=t(1087),M=t(2218),E=function(){var n=(0,M.Z)(),e=n.sortedInfoMonths,t=n.databaseMonthsDatesToString,r=(0,o.v9)((function(n){return n.infoMonths})).infoMonths,i=(0,f.Z)(),a=i.monthURL,s=i.isMonthInURL?new Date(a):null,c=s&&new Intl.DateTimeFormat("pl-PL",{year:"numeric",month:"long",timeZone:"UTC"}).format(s);return(0,D.jsx)(R.Z,{className:"monthListContainer bg-white rounded-0 border border-primary text-capitalize bg-transparent",children:r&&0!==r.length?null===t||void 0===t?void 0:t.map((function(n,t){return(0,D.jsx)(R.Z.Item,{className:"bg-transparent  border-0 p-0 px-1",children:(0,D.jsx)(B.rU,{to:"/".concat(null===e||void 0===e?void 0:e[t]),className:"".concat(c===n&&c?"text-warning":"text-white"," text-decoration-none"),children:n})},n)})):(0,D.jsx)("p",{className:"py-1 px-2 text-warning text-center",children:"Brak danych"})})},O=t(3234),W=t(8673),A=function(){var n=(0,o.I0)(),e=(0,o.v9)((function(n){return n.monthsListCollapse})).isOpenCollapseMonths,t=(0,O.Z)().monthURLStringFormat;return(0,D.jsxs)("div",{className:"",children:[(0,D.jsxs)(y.Z,{onClick:function(){return n((0,W.nP)())},"aria-controls":"example-collapse-text","aria-expanded":e,size:"sm",className:"w-100 text-capitalize text-white bg-transparent text-start fw-medium d-flex justify-content-between align-items-center",children:[t,(0,D.jsx)(I.x3N,{className:"fs-3",style:{transform:"".concat(e?"rotate(180deg)":""," "),transitionDuration:"320ms"}})]}),(0,D.jsx)(F.Z,{in:e,children:(0,D.jsx)("div",{children:(0,D.jsx)(E,{})})})]})},Y=t(7923),$=t(1419),G=function(){var n,e=(0,o.v9)((function(n){return n.infoMonths})).infoMonths,t=(0,o.v9)((function(n){return n.monthsPanel})),r=t.month,a=t.error,s=t.isLoading,c=(0,o.v9)((function(n){return n.monthsListCollapse})).isOpenCollapseMonths,l=(0,$.Z)().windowWidth,d=function(n){return(0,D.jsx)("div",{className:"h-100 d-flex justify-content-center align-items-center",children:(0,D.jsx)("div",{className:"fs-3 text-white text-center ",children:n})})};if(s)n=d((0,D.jsx)(U.Z,{animation:"border",variant:"secondary",className:"fs-6",children:(0,D.jsx)("span",{className:"visually-hidden",children:"Loading..."})}));else if(a){if("status"in a){var u="status"in a&&a.status;n=d((0,D.jsx)("div",{className:"text-danger text-center ",children:(0,D.jsxs)(D.Fragment,{children:[" B\u0142\u0105d: ",u," "]})}))}}else if(e&&0!==(null===e||void 0===e?void 0:e.length))if(r&&""!==(null===r||void 0===r?void 0:r.id)){var m="col-12 col-xxl-9 me-xxl-auto ps-3";n=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(P.Z,{className:"".concat(m," mt-1"),children:(0,D.jsx)(A,{})}),(0,D.jsx)(P.Z,{className:"".concat(m," d-flex justify-content-center my-2 pe-4 fw-medium"),children:(0,D.jsx)(Y.Z,{})}),(0,D.jsx)(P.Z,{className:"".concat(m," flex-grow-1"),style:{maxHeight:c?l>576?"calc(100% - 170px)":"calc(100% - 170px - 35px)":l>576?"calc(100% - 90px)":"calc(100% - 90px - 35px)",transitionDuration:"350ms"},children:(0,D.jsx)(k,{})})]})}else n=d((0,D.jsxs)("div",{children:["Brak danych z miesi\u0105ca ",i.xk,". Zapisz miesi\u0105c za pomoc\u0105 formularza"]}));else n=d((0,D.jsx)("div",{children:"Brak miesi\u0119cy zapisanych w bazie danych. Zapisz miesi\u0105c za pomoc\u0105 formularza"}));return{panelContent:n}},K=function(){var n=G().panelContent;return(0,D.jsx)("main",{children:(0,D.jsx)(r.Z,{className:" d-flex align-items-center flex-column backgroundImage",style:{height:"100vh"},children:n})})}},7923:function(n,e,t){var r=t(5048),o=t(3234),i=t(1419),a=t(2677),s=t(184);e.Z=function(){var n,e,t,c,l,d=(0,r.v9)((function(n){return n.monthsPanel})).month,u=((0,o.Z)().monthURLStringFormat,(0,i.Z)().windowWidth,"col-4 col-xxl-3 p-0");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{className:"".concat(u," text-end"),children:"Wszystkie"}),(0,s.jsxs)(a.Z,{className:"col-4 col-md-2 col-xxl-1 p-0 text-center",children:[null===d||void 0===d||null===(n=d.calc)||void 0===n?void 0:n.allHours," -"," ",(0,s.jsx)("span",{className:"".concat((null===d||void 0===d||null===(e=d.calc)||void 0===e?void 0:e.currentHours)<=0?"text-danger":""),children:null===d||void 0===d||null===(t=d.calc)||void 0===t?void 0:t.currentHours})]}),(0,s.jsx)(a.Z,{className:"".concat(u," ").concat((null===d||void 0===d||null===(c=d.calc)||void 0===c?void 0:c.currentHours)<=0?"text-danger":""),children:(null===d||void 0===d||null===(l=d.calc)||void 0===l?void 0:l.currentHours)<0?"Brak":"Dost\u0119pne"})]})}},2767:function(n,e,t){t.d(e,{Z:function(){return a},p:function(){return i}});var r=t(1830),o=t.n(r),i=function(n){return{title:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Tak",cancelButtonText:"Nie"}},a=function(n){o().fire({text:"B\u0142\u0105d ".concat(n),confirmButtonColor:"rgb(31, 180, 255)"})}},5293:function(){}}]);
//# sourceMappingURL=286.bfa7dc77.chunk.js.map